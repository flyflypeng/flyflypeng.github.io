<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>kata-containers 2.x 版本安装运行</title>
  <meta name="description"
    content="概述家里的电脑重装了系统，原来环境上的kata-containers 1.x版本也没有了，所以趁着这个机会就鼓捣一下在新的Ubuntu 20.04系统上安装一个最新的kata-containers 2.4.0版本。  kata社区推荐从Linux发行版的软件源中安装kata安全容器组件，但是社区只提供了CentO...">
  
  <meta name="author" content="Pengfei Jiang">
  <meta name="copyright" content="&copy; Pengfei Jiang 2023">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet"
    href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href=" /assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href=" /assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href=" /assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href=" /assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href=" /assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href=" /assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href=" /assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href=" /assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href=" /assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href=" /assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href=" /assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href=" /assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href=" /assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href=" /assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href=" /assets/icons/favicon-16x16.png">
  <link rel="manifest" href=" /assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content=" /assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description"
    content="概述家里的电脑重装了系统，原来环境上的kata-containers 1.x版本也没有了，所以趁着这个机会就鼓捣一下在新的Ubuntu 20.04系统上安装一个最新的kata-containers 2.4.0版本。  kata社区推荐从Linux发行版的软件源中安装kata安全容器组件，但是社区只提供了CentO..." />
  <meta property="og:url" content="http://localhost:4000" />
  <meta property="og:site_name" content="Fly Higher's Blog" />
  <meta property="og:title" content="kata-containers 2.x 版本安装运行" />
  <meta property="og:type" content="website" />
  <meta property="og:image"
    content="http://localhost:4000https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/20220423123102.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" />
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="kata-containers 2.x 版本安装运行">
  <meta name="twitter:description"
    content="概述家里的电脑重装了系统，原来环境上的kata-containers 1.x版本也没有了，所以趁着这个机会就鼓捣一下在新的Ubuntu 20.04系统上安装一个最新的kata-containers 2.4.0版本。  kata社区推荐从Linux发行版的软件源中安装kata安全容器组件，但是社区只提供了CentO...">
  <meta name="twitter:image"
    content="http://localhost:4000https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/20220423123102.png">
  <meta name="twitter:url" content="http://localhost:4000">
  

  

  <!-- Site styles -->
  <link rel="stylesheet" href=" /css/main.css">
  <link rel="canonical" href="http://localhost:4000/%E4%BA%91%E5%8E%9F%E7%94%9F/2022/04/22/kata-containers-2-x-%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%85%E8%BF%90%E8%A1%8C.html">
  <link rel="alternate" type="application/rss+xml" title="Fly Higher's Blog" href="http://localhost:4000 /feed.xml" />

  <!-- Google analytics -->
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WQJMFGY2LD"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-WQJMFGY2LD');
</script>
  
</head>

  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      
      <img src="/assets/smile_icon.png" alt="Fly Higher's Blog">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
        <li class="nav-link"><a href="/about/">About</a>
        <li class="nav-link"><a href="/posts/">Posts</a>
        <li class="nav-link"><a href="/project/">Projects</a>
        <!-- 
          
          <li class="nav-link"><a href="/about/">About</a>
          
        
          
        
          
        
          
        
          
          <li class="nav-link"><a href="/posts/">Posts</a>
          
        
          
          <li class="nav-link"><a href="/project/">Projects</a>
          
        
          
          <li class="nav-link"><a href="/tag/keyboard/">keyboard</a>
          
        
          
          <li class="nav-link"><a href="/tag/virtual/">virtual</a>
          
        
          
          <li class="nav-link"><a href="/tag/android/">Android</a>
          
        
          
          <li class="nav-link"><a href="/tag/opencv/">opencv</a>
          
        
          
          <li class="nav-link"><a href="/tag/markdown/">Markdown</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E8%8B%B1%E8%AF%AD/">英语</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E5%AD%A6%E4%B9%A0/">学习</a>
          
        
          
          <li class="nav-link"><a href="/tag/hexo/">Hexo</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E5%8D%9A%E5%AE%A2/">博客</a>
          
        
          
          <li class="nav-link"><a href="/tag/ubuntu/">Ubuntu</a>
          
        
          
          <li class="nav-link"><a href="/tag/firefox/">Firefox</a>
          
        
          
          <li class="nav-link"><a href="/tag/python/">Python</a>
          
        
          
          <li class="nav-link"><a href="/tag/make/">make</a>
          
        
          
          <li class="nav-link"><a href="/tag/makefile/">Makefile</a>
          
        
          
          <li class="nav-link"><a href="/tag/linux/">Linux</a>
          
        
          
          <li class="nav-link"><a href="/tag/sublimetext/">SublimeText</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E5%86%85%E6%A0%B8/">内核</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E8%B0%83%E5%BA%A6/">调度</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E7%A1%AC%E7%9B%98/">硬盘</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E8%AE%A1%E7%AE%97%E6%9C%BA/">计算机</a>
          
        
          
          <li class="nav-link"><a href="/tag/terminator/">Terminator</a>
          
        
          
          <li class="nav-link"><a href="/tag/cpu/">CPU</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/">体系结构</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/">系统调用</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86/">时间管理</a>
          
        
          
          <li class="nav-link"><a href="/tag/vnc/">VNC</a>
          
        
          
          <li class="nav-link"><a href="/tag/rfb/">RFB</a>
          
        
          
          <li class="nav-link"><a href="/tag/container-of/">container_of</a>
          
        
          
          <li class="nav-link"><a href="/tag/offsetof/">offsetof</a>
          
        
          
          <li class="nav-link"><a href="/tag/cs/">CS</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E5%9F%BA%E7%A1%80/">基础</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E9%98%85%E8%AF%BB/">阅读</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E4%B9%A6%E5%8D%95/">书单</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E5%B0%8F%E8%AF%B4/">小说</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E6%8A%80%E6%9C%AF/">技术</a>
          
        
          
          <li class="nav-link"><a href="/tag/ndk/">NDK</a>
          
        
          
          <li class="nav-link"><a href="/tag/debug/">Debug</a>
          
        
          
          <li class="nav-link"><a href="/tag/tombstone/">Tombstone</a>
          
        
          
          <li class="nav-link"><a href="/tag/eof/">EOF</a>
          
        
          
          <li class="nav-link"><a href="/tag/git/">Git</a>
          
        
          
          <li class="nav-link"><a href="/tag/ppa/">PPA</a>
          
        
          
          <li class="nav-link"><a href="/tag/apt/">APT</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E5%90%8C%E6%AD%A5/">同步</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85/">生产者消费者</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E7%8E%AF%E5%BD%A2%E7%BC%93%E5%86%B2%E5%8C%BA/">环形缓冲区</a>
          
        
          
          <li class="nav-link"><a href="/tag/ringbuffer/">RingBuffer</a>
          
        
          
          <li class="nav-link"><a href="/tag/aosp/">AOSP</a>
          
        
          
          <li class="nav-link"><a href="/tag/hal/">HAL</a>
          
        
          
          <li class="nav-link"><a href="/tag/ramfs/">ramfs</a>
          
        
          
          <li class="nav-link"><a href="/tag/tmpfs/">tmpfs</a>
          
        
          
          <li class="nav-link"><a href="/tag/rootfs/">rootfs</a>
          
        
          
          <li class="nav-link"><a href="/tag/initramfs/">initramfs</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/">文件系统</a>
          
        
          
          <li class="nav-link"><a href="/tag/unix/">Unix</a>
          
        
          
          <li class="nav-link"><a href="/tag/i-o/">I/O</a>
          
        
          
          <li class="nav-link"><a href="/tag/graphic/">Graphic</a>
          
        
          
          <li class="nav-link"><a href="/tag/opengles/">OpenGLES</a>
          
        
          
          <li class="nav-link"><a href="/tag/egl/">EGL</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E8%99%9A%E6%8B%9F%E5%8C%96/">虚拟化</a>
          
        
          
          <li class="nav-link"><a href="/tag/qemu/">QEMU</a>
          
        
          
          <li class="nav-link"><a href="/tag/kvm/">KVM</a>
          
        
          
          <li class="nav-link"><a href="/tag/mac/">Mac</a>
          
        
          
          <li class="nav-link"><a href="/tag/jekyll/">Jekyll</a>
          
        
          
          <li class="nav-link"><a href="/tag/iterm2/">iTerm2</a>
          
        
          
          <li class="nav-link"><a href="/tag/zsh/">zsh</a>
          
        
          
          <li class="nav-link"><a href="/tag/kubernetes/">kubernetes</a>
          
        
          
          <li class="nav-link"><a href="/tag/k8s/">k8s</a>
          
        
          
          <li class="nav-link"><a href="/tag/cloudnative/">cloudnative</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E6%88%B7%E5%A4%96/">户外</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E9%9C%B2%E8%90%A5/">露营</a>
          
        
          
          <li class="nav-link"><a href="/tag/camp/">camp</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E7%AC%94%E8%AE%B0/">笔记</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>
          
        
          
          <li class="nav-link"><a href="/tag/ptrace/">ptrace</a>
          
        
          
          <li class="nav-link"><a href="/tag/sandbox/">sandbox</a>
          
        
          
          <li class="nav-link"><a href="/tag/kata-containers/">kata-containers</a>
          
        
          
          <li class="nav-link"><a href="/tag/vscode/">vscode</a>
          
        
          
          <li class="nav-link"><a href="/tag/kernel/">kernel</a>
          
        
          
          <li class="nav-link"><a href="/tag/mlsys/">MLSys</a>
          
        
          
          <li class="nav-link"><a href="/tag/%E8%AE%BA%E6%96%87/">论文</a>
          
        
          
          <li class="nav-link"><a href="/tag/ai/">AI</a>
          
        
          
          <li class="nav-link"><a href="/category/android/">android</a>
          
        
          
          <li class="nav-link"><a href="/category/%E5%88%A9%E5%99%A8/">利器</a>
          
        
          
          <li class="nav-link"><a href="/category/%E5%AD%A6%E4%B9%A0-%E6%95%88%E7%8E%87/">学习&效率</a>
          
        
          
          <li class="nav-link"><a href="/category/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>
          
        
          
          <li class="nav-link"><a href="/category/linux/">linux</a>
          
        
          
          <li class="nav-link"><a href="/category/%E5%86%85%E6%A0%B8/">内核</a>
          
        
          
          <li class="nav-link"><a href="/category/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/">体系结构</a>
          
        
          
          <li class="nav-link"><a href="/category/%E7%94%9F%E6%B4%BB/">生活</a>
          
        
          
          <li class="nav-link"><a href="/category/%E8%99%9A%E6%8B%9F%E5%8C%96/">虚拟化</a>
          
        
          
          <li class="nav-link"><a href="/category/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>
          
        
          
          <li class="nav-link"><a href="/category/%E6%88%B7%E5%A4%96/">户外</a>
          
        
          
          <li class="nav-link"><a href="/category/%E8%AE%BA%E6%96%87/">论文</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
         -->
      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container has-cover" style="background-image: url(https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/20220423123102.png);">
  <div class="scrim has-cover">
    <header class="post-header">
      <h1 class="title">kata-containers 2.x 版本安装运行</h1>
      <p class="info">by <strong>FlyFlyPeng</strong></p>
    </header>
  </div>
</div>

<div class="wrapper">



<section class="post-meta">
  <div class="post-date">April 22, 2022</div>
  <div class="post-categories">
  in 
    
    <a href="/category/云原生">云原生</a>
    
  
  </div>
</section>

<article class="post-content">
  <h2 id="概述">概述</h2>

<p>家里的电脑重装了系统，原来环境上的<code class="language-plaintext highlighter-rouge">kata-containers 1.x</code>版本也没有了，所以趁着这个机会就鼓捣一下在新的Ubuntu 20.04系统上安装一个最新的<code class="language-plaintext highlighter-rouge">kata-containers 2.4.0</code>版本。</p>

<blockquote>
  <p>kata社区推荐从Linux发行版的软件源中安装kata安全容器组件，但是社区只提供了CentOS 8 和 Fedora 34 以上版本配套的官方软件安装包：<a href="https://github.com/kata-containers/kata-containers/tree/main/docs/install#official-packages">Official packages</a>
Ubuntu系统可以采用Snap包管理器进行安装：<a href="https://github.com/kata-containers/kata-containers/tree/main/docs/install#snap-installation">Snap Installation</a></p>
</blockquote>

<p>上述官方推荐的方法都是简单的一键安装方式，如果想弄清楚kata软件安装包中有什么文件内容，建议直接下载社区发布已经预编译好的二进制安装包进行手动安装。所以，本文中主要介绍的是如何在一台Ubuntu系统中安装kata-containers 2.x版本二进制软件包。</p>

<blockquote>
  <p>注意：kata官方社区提供的只有x86架构预编译好的二进制压缩包，如果你的机器arm64架构版本，那么你只能参考社区的编译方法手动编译安装了。</p>
</blockquote>

<h2 id="安装准备">安装准备</h2>

<p><strong>1. 准备一台Linux系统的物理机，Ubuntu、openEuler、CentOS等常见的Linux发行版系统都可以</strong></p>

<p><strong>2. 确保的你的机器环境上已经开启了BIOS中的硬件虚拟化加速支持</strong></p>

<p>可以通过下面的命令来检查你物理机上的CPU是否是支持硬件虚拟化加速功能：</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">grep</span> <span class="nt">-E</span>  <span class="s1">'(vmx|svm)'</span> /proc/cpuinfo

flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc art arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 sdbg fma cx16 xtpr pdcm pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand lahf_lm abm 3dnowprefetch cpuid_fault epb invpcid_single pti ssbd ibrs ibpb stibp tpr_shadow vnmi flexpriority ept vpid ept_ad fsgsbase tsc_adjust bmi1 avx2 smep bmi2 erms invpcid mpx rdseed adx smap clflushopt intel_pt xsaveopt xsavec xgetbv1 xsaves dtherm arat pln pts hwp hwp_notify hwp_act_window hwp_epp md_clear flush_l1d
vmx flags	: vnmi preemption_timer invvpid ept_x_only ept_ad ept_1gb flexpriority tsc_offset vtpr mtf vapic ept vpid unrestricted_guest ple pml ept_mode_based_exec
</code></pre></div></div>

<p>如果输出的结果中包含<code class="language-plaintext highlighter-rouge">vmx或svm</code>，恭喜你的CPU支持硬件虚拟化能力。</p>

<p>检查完CPU是否支持硬件虚拟化能力之后，你还需要确认你物理机上的BIOS是否开启了硬件虚拟化能力。</p>

<p>开启的方法也非常简单，步骤如下：</p>
<ol>
  <li>根据机器所安装主板的厂商，搜索一下进入BIOS的按键上什么，一般都是<code class="language-plaintext highlighter-rouge">F12</code>、<code class="language-plaintext highlighter-rouge">ESC</code>键等</li>
  <li>重启电脑，然后一直按住进入BIOS的按键，等待进入BIOS环境</li>
  <li>进入BIOS配置界面后，找到CPU处理器的设置界面，然后开启虚拟化技术支持。</li>
  <li>保存后退出，然后正常进入系统启动流程，启动系统</li>
</ol>

<p><strong>3. 加载KVM虚拟化模块</strong></p>

<p>在一般发行版系统中都保存有KVM内核模块文件，只需要手动加载一下即可：</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>modprobe kvm kvm_intel
</code></pre></div></div>

<p>查看KVM模块是否加载到内核中了：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo lsmod | grep kvm
kvm_intel             303104  0
kvm                   864256  1 kvm_intel
</code></pre></div></div>

<h2 id="手动安装">手动安装</h2>

<h3 id="安装kata-containers二进制组件">安装kata-containers二进制组件</h3>

<p><strong>1. 从<code class="language-plaintext highlighter-rouge">kata-containers</code>官方社区下载编译好的二进制压缩包</strong></p>

<p>从下载链接页面中找到最新release的二进制压缩包即可
下载链接：https://github.com/kata-containers/kata-containers/releases</p>

<p>下载图中红色框起来的压缩包：
<img src="https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/20220422230322.png" alt="" /></p>

<p><strong>2. 解压二进制软件包，并拷贝到<code class="language-plaintext highlighter-rouge">/opt/</code>目录下</strong></p>

<p>下载下来的二进制软件包采用<code class="language-plaintext highlighter-rouge">xz</code>命令进行解压，得到如下的目录和文件，其结构如下所示：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-xf</span> kata-static-2.4.0-x86_64.tar.xz

<span class="nv">$ </span><span class="nb">ls
</span>kata-static-2.4.0-x86_64.tar.xz  opt

<span class="nv">$ </span>tree <span class="nt">-L</span> 4 ./opt/
./opt/
└── kata
    ├── bin
    │   ├── cloud-hypervisor
    │   ├── containerd-shim-kata-v2
    │   ├── firecracker
    │   ├── jailer
    │   ├── kata-collect-data.sh
    │   ├── kata-monitor
    │   ├── kata-runtime
    │   └── qemu-system-x86_64
    ├── libexec
    │   └── kata-qemu
    │       └── virtiofsd
    └── share
        ├── bash-completion
        │   └── completions
        ├── defaults
        │   └── kata-containers
        ├── kata-containers
        │   ├── config-5.15.26
        │   ├── kata-alpine-3.15.initrd
        │   ├── kata-clearlinux-latest.image
        │   ├── kata-containers-initrd.img -&gt; kata-alpine-3.15.initrd
        │   ├── kata-containers.img -&gt; kata-clearlinux-latest.image
        │   ├── vmlinux-5.15.26-90
        │   ├── vmlinux.container -&gt; vmlinux-5.15.26-90
        │   ├── vmlinuz-5.15.26-90
        │   └── vmlinuz.container -&gt; vmlinuz-5.15.26-90
        └── kata-qemu
            └── qemu

12 directories, 18 files
</code></pre></div></div>

<p>简要介绍一下上述各个目录中存放文件的作用：</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">./opt/kata/bin</code>：该目录下主要存放了kata运行时相关的二进制文件（例如最主要的二进制文件<code class="language-plaintext highlighter-rouge">containerd-shim-kata-v2</code>）、虚拟化组件的二进制文件，例如<code class="language-plaintext highlighter-rouge">qemu-system-x86_64</code></li>
  <li><code class="language-plaintext highlighter-rouge">./opt/kata/libexec/kata-qemu</code>：该目录存放的是<code class="language-plaintext highlighter-rouge">virtiofsd</code>二进制文件，它的作用事在宿主机上作为virtiofs的后端，实现宿主机和安全容器虚拟机中之间目录文件的共享</li>
  <li><code class="language-plaintext highlighter-rouge">./opt/kata/share/bash-completion</code>：该目录下存放的就是bash环境中的自动补全脚本</li>
  <li><code class="language-plaintext highlighter-rouge">./opt/kata/share/defaults/kata-containers/</code>：该目录下存放的是kata-containers安全容器的配置文件<code class="language-plaintext highlighter-rouge">configuration.toml</code></li>
  <li><code class="language-plaintext highlighter-rouge">./opt/kata/share/kata-containers/</code>：该目录下存放的则是安全容器中Guest Kernel的裁剪的配置选项文件、Guest OS的initrd格式和image格式镜像，以及Guest Kernel的二进制文件</li>
  <li><code class="language-plaintext highlighter-rouge">./opt/kata/share/kata-qemu/qemu</code>：该目录下主要存放了qemu虚拟化相关的bios二进制文件、firmware固件信息</li>
</ul>

<p>然后，把解压到当前目录下<code class="language-plaintext highlighter-rouge">./opt/kata</code>文件夹给移动到根目录下的<code class="language-plaintext highlighter-rouge">/opt/</code>下面：</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mv</span> ./opt/kata /opt/
</code></pre></div></div>

<p><strong>3. 将<code class="language-plaintext highlighter-rouge">containerd-shim-kata-v2</code>二进制软链接到<code class="language-plaintext highlighter-rouge">/usr/local/bin/</code>目录下，以便containerd容器引擎可以找到kata运行时对应的二进制文件</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo ln</span> <span class="nt">-s</span> /opt/kata/bin/containerd-shim-kata-v2 /usr/local/bin/containerd-shim-kata-v2
</code></pre></div></div>

<h3 id="安装和配置containerd容器引擎">安装和配置containerd容器引擎</h3>

<p><strong>1. 安装containerd</strong></p>

<blockquote>
  <p>由于<code class="language-plaintext highlighter-rouge">kata-containers 2.x</code>版本已经不支持OCI Runtime Spec的<code class="language-plaintext highlighter-rouge">shimv1</code>标准，因此需要通过<code class="language-plaintext highlighter-rouge">containerd</code>容器引擎或者我们在openEuler上开源的<a href="https://gitee.com/openeuler/iSulad">iSulad</a>容器引擎来支持<code class="language-plaintext highlighter-rouge">Containerd-Shimv2</code>接口标准。</p>
</blockquote>

<p>我本地的环境上Ubuntu系统，并且我之前环境中已经装过了<code class="language-plaintext highlighter-rouge">Docker CE 20.10.14</code>版本。由于在安装Docker软件包的同时，它也会安装好<code class="language-plaintext highlighter-rouge">containerd</code>组件。</p>

<p>所以，这里建议你直接参考Docker官方的教程来安装Docker，顺便完成containerd组件的安装。</p>

<p><a href="https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/#install-docker-ce">Get Docker CE for Ubuntu</a></p>

<p><strong>2. 修改containerd配置文件，支持kata运行时</strong></p>

<p>containerd默认的配置文件路径：<code class="language-plaintext highlighter-rouge">/etc/containerd/config.toml</code>，将该文件中的内容修改为如下的内容，添加对于kata容器运行时的支持：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cat /etc/containerd/config.toml
#   Copyright 2018-2022 Docker Inc.

#   Licensed under the Apache License, Version 2.0 (the "License");
#   you may not use this file except in compliance with the License.
#   You may obtain a copy of the License at

#       http://www.apache.org/licenses/LICENSE-2.0

#   Unless required by applicable law or agreed to in writing, software
#   distributed under the License is distributed on an "AS IS" BASIS,
#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#   See the License for the specific language governing permissions and
#   limitations under the License.

disabled_plugins = ["cri"]

root = "/var/lib/containerd"
state = "/run/containerd"
subreaper = true
oom_score = 0

[grpc]
  address = "/run/containerd/containerd.sock"
  uid = 0
  gid = 0

#[debug]
#  address = "/run/containerd/debug.sock"
#  uid = 0
#  gid = 0
#  level = "info"

[plugins]
  [plugins."io.containerd.grpc.v1.cri"]
    [plugins."io.containerd.grpc.v1.cri".containerd]
      default_runtime_name = "kata"
      [plugins."io.containerd.grpc.v1.cri".containerd.runtimes]
        [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]
          runtime_type = "io.containerd.kata.v2"
</code></pre></div></div>

<blockquote>
  <p>注意：上面的containerd配置文件中，我已经把Docker安装包默认安装时配置的containerd.toml文件做了一些修改，把很多注释掉的配置选项都打开了。
其中，关于kata容器运行时的配置主要集中在<code class="language-plaintext highlighter-rouge">[plugins]</code>配置项中。</p>
</blockquote>

<p><strong>3. 重启containerd系统服务</strong></p>

<p>完成上述的配置之后，重启一下<code class="language-plaintext highlighter-rouge">containerd.service</code>系统服务，使配置生效。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>systemctl restart containerd

<span class="nv">$ </span><span class="nb">sudo </span>systemctl status containerd.service
● containerd.service - containerd container runtime
     Loaded: loaded <span class="o">(</span>/lib/systemd/system/containerd.service<span class="p">;</span> enabled<span class="p">;</span> vendor preset: enabled<span class="o">)</span>
     Active: active <span class="o">(</span>running<span class="o">)</span> since Fri 2022-04-22 21:52:39 CST<span class="p">;</span> 1h 47min ago
       Docs: https://containerd.io
    Process: 388705 <span class="nv">ExecStartPre</span><span class="o">=</span>/sbin/modprobe overlay <span class="o">(</span><span class="nv">code</span><span class="o">=</span>exited, <span class="nv">status</span><span class="o">=</span>0/SUCCESS<span class="o">)</span>
   Main PID: 388706 <span class="o">(</span>containerd<span class="o">)</span>
      Tasks: 11
     Memory: 19.0M
     CGroup: /system.slice/containerd.service
             └─388706 /usr/bin/containerd
</code></pre></div></div>

<h2 id="测试kata安全容器是否安装成功">测试kata安全容器是否安装成功</h2>

<p>好了，通过上面的步骤我们已经在本地的机器上安装好kata安全容器的二进制软件包和containerd容器引擎，接下来我们通过下面的命令来验证一下安装的kata安全容器是否已经安装成功。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ image</span><span class="o">=</span><span class="s2">"docker.io/library/busybox:latest"</span>

<span class="nv">$ </span><span class="nb">sudo </span>ctr image pull <span class="s2">"</span><span class="nv">$image</span><span class="s2">"</span>

<span class="c"># 查看安全容器中Guest Kernel的版本号</span>
<span class="nv">$ </span><span class="nb">sudo </span>ctr run <span class="nt">--runtime</span> <span class="s2">"io.containerd.kata.v2"</span> <span class="nt">--rm</span> <span class="nt">-t</span> <span class="s2">"</span><span class="nv">$image</span><span class="s2">"</span> test-kata <span class="nb">uname</span> <span class="nt">-r</span>

5.15.26

<span class="c"># 查看物理机上安装的Linux内核版本号，两者不同则说明安全容器已经成功运行了</span>
<span class="nv">$ </span><span class="nb">uname</span> <span class="nt">-r</span>
5.13.0-30-generic
</code></pre></div></div>

<p>另外，我们还可以启动一个kata安全容器，在宿主机上观察是否存在<code class="language-plaintext highlighter-rouge">qemu</code>进程：</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>ctr run <span class="nt">--runtime</span> <span class="s2">"io.containerd.kata.v2"</span> <span class="nt">-d</span> <span class="nt">-t</span> <span class="s2">"</span><span class="nv">$image</span><span class="s2">"</span> test-kata <span class="nb">sleep </span>999999

<span class="nv">$ </span>ps <span class="nt">-ef</span> | <span class="nb">grep </span>qemu
root      395216  395206  0 23:47 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd <span class="nt">--syslog</span> <span class="nt">-o</span> <span class="nv">cache</span><span class="o">=</span>auto <span class="nt">-o</span> no_posix_lock <span class="nt">-o</span> <span class="nb">source</span><span class="o">=</span>/run/kata-containers/shared/sandboxes/test-kata/shared <span class="nt">--fd</span><span class="o">=</span>3 <span class="nt">-f</span> <span class="nt">--thread-pool-size</span><span class="o">=</span>1 <span class="nt">-o</span> announce_submounts
root      395223       1  1 23:47 ?        00:00:00 /opt/kata/bin/qemu-system-x86_64 <span class="nt">-name</span> sandbox-test-kata <span class="nt">-uuid</span> 9ecd8760-80dc-41c1-8e4e-58adc4f68079 <span class="nt">-machine</span> q35,accel<span class="o">=</span>kvm,kernel_irqchip<span class="o">=</span>on,nvdimm<span class="o">=</span>on <span class="nt">-cpu</span> host,pmu<span class="o">=</span>off <span class="nt">-qmp</span> unix:/run/vc/vm/test-kata/qmp.sock,server<span class="o">=</span>on,wait<span class="o">=</span>off <span class="nt">-m</span> 2048M,slots<span class="o">=</span>10,maxmem<span class="o">=</span>16688M <span class="nt">-device</span> pci-bridge,bus<span class="o">=</span>pcie.0,id<span class="o">=</span>pci-bridge-0,chassis_nr<span class="o">=</span>1,shpc<span class="o">=</span>off,addr<span class="o">=</span>2,io-reserve<span class="o">=</span>4k,mem-reserve<span class="o">=</span>1m,pref64-reserve<span class="o">=</span>1m <span class="nt">-device</span> virtio-serial-pci,disable-modern<span class="o">=</span><span class="nb">false</span>,id<span class="o">=</span>serial0 <span class="nt">-device</span> virtconsole,chardev<span class="o">=</span>charconsole0,id<span class="o">=</span>console0 <span class="nt">-chardev</span> socket,id<span class="o">=</span>charconsole0,path<span class="o">=</span>/run/vc/vm/test-kata/console.sock,server<span class="o">=</span>on,wait<span class="o">=</span>off <span class="nt">-device</span> nvdimm,id<span class="o">=</span>nv0,memdev<span class="o">=</span>mem0,unarmed<span class="o">=</span>on <span class="nt">-object</span> memory-backend-file,id<span class="o">=</span>mem0,mem-path<span class="o">=</span>/opt/kata/share/kata-containers/kata-clearlinux-latest.image,size<span class="o">=</span>134217728,readonly<span class="o">=</span>on <span class="nt">-device</span> virtio-scsi-pci,id<span class="o">=</span>scsi0,disable-modern<span class="o">=</span><span class="nb">false</span> <span class="nt">-object</span> rng-random,id<span class="o">=</span>rng0,filename<span class="o">=</span>/dev/urandom <span class="nt">-device</span> virtio-rng-pci,rng<span class="o">=</span>rng0 <span class="nt">-device</span> vhost-vsock-pci,disable-modern<span class="o">=</span><span class="nb">false</span>,vhostfd<span class="o">=</span>3,id<span class="o">=</span>vsock-3535502973,guest-cid<span class="o">=</span>3535502973 <span class="nt">-chardev</span> socket,id<span class="o">=</span>char-59c971d21afa49b1,path<span class="o">=</span>/run/vc/vm/test-kata/vhost-fs.sock <span class="nt">-device</span> vhost-user-fs-pci,chardev<span class="o">=</span>char-59c971d21afa49b1,tag<span class="o">=</span>kataShared <span class="nt">-rtc</span> <span class="nv">base</span><span class="o">=</span>utc,driftfix<span class="o">=</span>slew,clock<span class="o">=</span>host <span class="nt">-global</span> kvm-pit.lost_tick_policy<span class="o">=</span>discard <span class="nt">-vga</span> none <span class="nt">-no-user-config</span> <span class="nt">-nodefaults</span> <span class="nt">-nographic</span> <span class="nt">--no-reboot</span> <span class="nt">-daemonize</span> <span class="nt">-object</span> memory-backend-file,id<span class="o">=</span>dimm1,size<span class="o">=</span>2048M,mem-path<span class="o">=</span>/dev/shm,share<span class="o">=</span>on <span class="nt">-numa</span> node,memdev<span class="o">=</span>dimm1 <span class="nt">-kernel</span> /opt/kata/share/kata-containers/vmlinux-5.15.26-90 <span class="nt">-append</span> <span class="nv">tsc</span><span class="o">=</span>reliable no_timer_check rcupdate.rcu_expedited<span class="o">=</span>1 i8042.direct<span class="o">=</span>1 i8042.dumbkbd<span class="o">=</span>1 i8042.nopnp<span class="o">=</span>1 i8042.noaux<span class="o">=</span>1 noreplace-smp <span class="nv">reboot</span><span class="o">=</span>k <span class="nv">console</span><span class="o">=</span>hvc0 <span class="nv">console</span><span class="o">=</span>hvc1 cryptomgr.notests net.ifnames<span class="o">=</span>0 <span class="nv">pci</span><span class="o">=</span><span class="nv">lastbus</span><span class="o">=</span>0 <span class="nv">root</span><span class="o">=</span>/dev/pmem0p1 <span class="nv">rootflags</span><span class="o">=</span>dax,data<span class="o">=</span>ordered,errors<span class="o">=</span>remount-ro ro <span class="nv">rootfstype</span><span class="o">=</span>ext4 quiet systemd.show_status<span class="o">=</span><span class="nb">false </span><span class="nv">panic</span><span class="o">=</span>1 <span class="nv">nr_cpus</span><span class="o">=</span>4 systemd.unit<span class="o">=</span>kata-containers.target systemd.mask<span class="o">=</span>systemd-networkd.service systemd.mask<span class="o">=</span>systemd-networkd.socket scsi_mod.scan<span class="o">=</span>none <span class="nt">-pidfile</span> /run/vc/vm/test-kata/pid <span class="nt">-smp</span> 1,cores<span class="o">=</span>1,threads<span class="o">=</span>1,sockets<span class="o">=</span>4,maxcpus<span class="o">=</span>4
root      395226  395216  0 23:47 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd <span class="nt">--syslog</span> <span class="nt">-o</span> <span class="nv">cache</span><span class="o">=</span>auto <span class="nt">-o</span> no_posix_lock <span class="nt">-o</span> <span class="nb">source</span><span class="o">=</span>/run/kata-containers/shared/sandboxes/test-kata/shared <span class="nt">--fd</span><span class="o">=</span>3 <span class="nt">-f</span> <span class="nt">--thread-pool-size</span><span class="o">=</span>1 <span class="nt">-o</span> announce_submounts
flyflyp+  395289  380349  0 23:47 pts/3    00:00:00 <span class="nb">grep</span> <span class="nt">--color</span><span class="o">=</span>auto <span class="nt">--exclude-dir</span><span class="o">=</span>.bzr <span class="nt">--exclude-dir</span><span class="o">=</span>CVS <span class="nt">--exclude-dir</span><span class="o">=</span>.git <span class="nt">--exclude-dir</span><span class="o">=</span>.hg <span class="nt">--exclude-dir</span><span class="o">=</span>.svn <span class="nt">--exclude-dir</span><span class="o">=</span>.idea <span class="nt">--exclude-dir</span><span class="o">=</span>.tox qemu
</code></pre></div></div>

<p>看来真的是通过qemu hypervisor把安全容器虚拟机给拉起来了，如果大家有兴趣，可以分析一下这个qemu进程中各个命令行参数的含义。</p>

<h2 id="参考">参考</h2>

<ul>
  <li><a href="https://github.com/kata-containers/kata-containers/blob/main/docs/install/container-manager/containerd/containerd-install.md">Install Kata Containers with containerd</a></li>
  <li><a href="https://gitee.com/openeuler/iSulad/blob/master/docs/integration.md">iSulad配置支持kata安全容器文档</a></li>
</ul>

</article>



<section class="tags">
  <strong>Tags:</strong> <a href="/tag/云原生">云原生</a>,&nbsp;<a href="/tag/kata-containers">kata-containers</a>,&nbsp;<a href="/tag/sandbox">sandbox</a>
</section>



<section class="rss">
  <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
</section>

<section class="share">
  <span>Share: </span>
  
    
    
      <a href="//twitter.com/share?text=kata-containers+2.x+%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%85%E8%BF%90%E8%A1%8C&url=http%3A%2F%2Flocalhost%3A4000%2F%25E4%25BA%2591%25E5%258E%259F%25E7%2594%259F%2F2022%2F04%2F22%2Fkata-containers-2-x-%25E7%2589%2588%25E6%259C%25AC%25E5%25AE%2589%25E8%25A3%2585%25E8%25BF%2590%25E8%25A1%258C.html&via=flyflypeng_bear"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
        <i class="fa fa-twitter-square fa-lg"></i>
      </a>
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
</section>

	<section class="post-navigation">
		<span class="prev-post">
			
				<a href="/linux/2022/03/28/ptrace-%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E6%8B%A6%E6%88%AA%E5%92%8C%E6%A8%A1%E6%8B%9F.html">
					<span class="fa-stack fa-lg">
						<i class="fa fa-square fa-stack-2x"></i>
						<i class="fa fa-angle-double-left fa-stack-1x fa-inverse"></i>
					</span>
					<span class="page-number">ptrace 系统调用拦截和模拟</span>
				</a>
			
		</span>
		<span class="next-post">
			
				<a href="/%E5%88%A9%E5%99%A8/2022/04/23/vscode%E5%86%85%E6%A0%B8%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE.html">
					<span class="page-number">VSCode配置Linux内核源码阅读环境</span>
					<span class="fa-stack fa-lg">
						<i class="fa fa-square fa-stack-2x"></i>
						<i class="fa fa-angle-double-right fa-stack-1x fa-inverse"></i>
					</span>
				</a>
			
		</span>
	</section>




<section class="disqus">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'flyflypeng-tech';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">Fly Higher's Blog</h3>

    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <ul class="pages">
        <li class="nav-link"><a href="/about/">About</a>
        <li class="nav-link"><a href="/posts/">Posts</a>
        <li class="nav-link"><a href="/project/">Projects</a>
       <!--  
        
          <li class="nav-link"><a href="/about/">About</a>
        
        
        
        
        
        
        
        
        
          <li class="nav-link"><a href="/posts/">Posts</a>
        
        
        
          <li class="nav-link"><a href="/project/">Projects</a>
        
        
        
          <li class="nav-link"><a href="/tag/keyboard/">keyboard</a>
        
        
        
          <li class="nav-link"><a href="/tag/virtual/">virtual</a>
        
        
        
          <li class="nav-link"><a href="/tag/android/">Android</a>
        
        
        
          <li class="nav-link"><a href="/tag/opencv/">opencv</a>
        
        
        
          <li class="nav-link"><a href="/tag/markdown/">Markdown</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E8%8B%B1%E8%AF%AD/">英语</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E5%AD%A6%E4%B9%A0/">学习</a>
        
        
        
          <li class="nav-link"><a href="/tag/hexo/">Hexo</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E5%8D%9A%E5%AE%A2/">博客</a>
        
        
        
          <li class="nav-link"><a href="/tag/ubuntu/">Ubuntu</a>
        
        
        
          <li class="nav-link"><a href="/tag/firefox/">Firefox</a>
        
        
        
          <li class="nav-link"><a href="/tag/python/">Python</a>
        
        
        
          <li class="nav-link"><a href="/tag/make/">make</a>
        
        
        
          <li class="nav-link"><a href="/tag/makefile/">Makefile</a>
        
        
        
          <li class="nav-link"><a href="/tag/linux/">Linux</a>
        
        
        
          <li class="nav-link"><a href="/tag/sublimetext/">SublimeText</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E5%86%85%E6%A0%B8/">内核</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E8%B0%83%E5%BA%A6/">调度</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E7%A1%AC%E7%9B%98/">硬盘</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E8%AE%A1%E7%AE%97%E6%9C%BA/">计算机</a>
        
        
        
          <li class="nav-link"><a href="/tag/terminator/">Terminator</a>
        
        
        
          <li class="nav-link"><a href="/tag/cpu/">CPU</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/">体系结构</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/">系统调用</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86/">时间管理</a>
        
        
        
          <li class="nav-link"><a href="/tag/vnc/">VNC</a>
        
        
        
          <li class="nav-link"><a href="/tag/rfb/">RFB</a>
        
        
        
          <li class="nav-link"><a href="/tag/container-of/">container_of</a>
        
        
        
          <li class="nav-link"><a href="/tag/offsetof/">offsetof</a>
        
        
        
          <li class="nav-link"><a href="/tag/cs/">CS</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E5%9F%BA%E7%A1%80/">基础</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E9%98%85%E8%AF%BB/">阅读</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E4%B9%A6%E5%8D%95/">书单</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E5%B0%8F%E8%AF%B4/">小说</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E6%8A%80%E6%9C%AF/">技术</a>
        
        
        
          <li class="nav-link"><a href="/tag/ndk/">NDK</a>
        
        
        
          <li class="nav-link"><a href="/tag/debug/">Debug</a>
        
        
        
          <li class="nav-link"><a href="/tag/tombstone/">Tombstone</a>
        
        
        
          <li class="nav-link"><a href="/tag/eof/">EOF</a>
        
        
        
          <li class="nav-link"><a href="/tag/git/">Git</a>
        
        
        
          <li class="nav-link"><a href="/tag/ppa/">PPA</a>
        
        
        
          <li class="nav-link"><a href="/tag/apt/">APT</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E5%90%8C%E6%AD%A5/">同步</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85/">生产者消费者</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E7%8E%AF%E5%BD%A2%E7%BC%93%E5%86%B2%E5%8C%BA/">环形缓冲区</a>
        
        
        
          <li class="nav-link"><a href="/tag/ringbuffer/">RingBuffer</a>
        
        
        
          <li class="nav-link"><a href="/tag/aosp/">AOSP</a>
        
        
        
          <li class="nav-link"><a href="/tag/hal/">HAL</a>
        
        
        
          <li class="nav-link"><a href="/tag/ramfs/">ramfs</a>
        
        
        
          <li class="nav-link"><a href="/tag/tmpfs/">tmpfs</a>
        
        
        
          <li class="nav-link"><a href="/tag/rootfs/">rootfs</a>
        
        
        
          <li class="nav-link"><a href="/tag/initramfs/">initramfs</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/">文件系统</a>
        
        
        
          <li class="nav-link"><a href="/tag/unix/">Unix</a>
        
        
        
          <li class="nav-link"><a href="/tag/i-o/">I/O</a>
        
        
        
          <li class="nav-link"><a href="/tag/graphic/">Graphic</a>
        
        
        
          <li class="nav-link"><a href="/tag/opengles/">OpenGLES</a>
        
        
        
          <li class="nav-link"><a href="/tag/egl/">EGL</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E8%99%9A%E6%8B%9F%E5%8C%96/">虚拟化</a>
        
        
        
          <li class="nav-link"><a href="/tag/qemu/">QEMU</a>
        
        
        
          <li class="nav-link"><a href="/tag/kvm/">KVM</a>
        
        
        
          <li class="nav-link"><a href="/tag/mac/">Mac</a>
        
        
        
          <li class="nav-link"><a href="/tag/jekyll/">Jekyll</a>
        
        
        
          <li class="nav-link"><a href="/tag/iterm2/">iTerm2</a>
        
        
        
          <li class="nav-link"><a href="/tag/zsh/">zsh</a>
        
        
        
          <li class="nav-link"><a href="/tag/kubernetes/">kubernetes</a>
        
        
        
          <li class="nav-link"><a href="/tag/k8s/">k8s</a>
        
        
        
          <li class="nav-link"><a href="/tag/cloudnative/">cloudnative</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E6%88%B7%E5%A4%96/">户外</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E9%9C%B2%E8%90%A5/">露营</a>
        
        
        
          <li class="nav-link"><a href="/tag/camp/">camp</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E7%AC%94%E8%AE%B0/">笔记</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>
        
        
        
          <li class="nav-link"><a href="/tag/ptrace/">ptrace</a>
        
        
        
          <li class="nav-link"><a href="/tag/sandbox/">sandbox</a>
        
        
        
          <li class="nav-link"><a href="/tag/kata-containers/">kata-containers</a>
        
        
        
          <li class="nav-link"><a href="/tag/vscode/">vscode</a>
        
        
        
          <li class="nav-link"><a href="/tag/kernel/">kernel</a>
        
        
        
          <li class="nav-link"><a href="/tag/mlsys/">MLSys</a>
        
        
        
          <li class="nav-link"><a href="/tag/%E8%AE%BA%E6%96%87/">论文</a>
        
        
        
          <li class="nav-link"><a href="/tag/ai/">AI</a>
        
        
        
          <li class="nav-link"><a href="/category/android/">android</a>
        
        
        
          <li class="nav-link"><a href="/category/%E5%88%A9%E5%99%A8/">利器</a>
        
        
        
          <li class="nav-link"><a href="/category/%E5%AD%A6%E4%B9%A0-%E6%95%88%E7%8E%87/">学习&效率</a>
        
        
        
          <li class="nav-link"><a href="/category/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>
        
        
        
          <li class="nav-link"><a href="/category/linux/">linux</a>
        
        
        
          <li class="nav-link"><a href="/category/%E5%86%85%E6%A0%B8/">内核</a>
        
        
        
          <li class="nav-link"><a href="/category/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/">体系结构</a>
        
        
        
          <li class="nav-link"><a href="/category/%E7%94%9F%E6%B4%BB/">生活</a>
        
        
        
          <li class="nav-link"><a href="/category/%E8%99%9A%E6%8B%9F%E5%8C%96/">虚拟化</a>
        
        
        
          <li class="nav-link"><a href="/category/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a>
        
        
        
          <li class="nav-link"><a href="/category/%E6%88%B7%E5%A4%96/">户外</a>
        
        
        
          <li class="nav-link"><a href="/category/%E8%AE%BA%E6%96%87/">论文</a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
         -->
      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:flyflyflypeng@gmail.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">flyflyflypeng@gmail.com</span>
          </a>
        </li>

        
          
          <li>
            <a href="https://twitter.com/flyflypeng_bear" title="Follow me on Twitter">
              <i class="fa fa-twitter"></i>
              <span class="username">flyflypeng_bear</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://github.com/flyflypeng" title="Fork me on GitHub">
              <i class="fa fa-github"></i>
              <span class="username">flyflypeng</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://www.instagram.com/FlyFlyPeng/" title="Follow me on Instagram">
              <i class="fa fa-instagram"></i>
              <span class="username">FlyFlyPeng</span>
            </a>
          </li>
          
        

      </ul>
    </div>

    <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
      <p class="text">Do one thing and do it well.
</p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {
  // Default syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });
});

</script>






  </body>

</html>
