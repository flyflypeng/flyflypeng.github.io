<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Fly Higher&apos;s Blog</title>
    <description>Do one thing and do it well.
</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Mon, 30 Jan 2023 19:59:06 +0800</pubDate>
    <lastBuildDate>Mon, 30 Jan 2023 19:59:06 +0800</lastBuildDate>
    <generator>Jekyll v4.3.2</generator>
    
      <item>
        <title>è®ºæ–‡åˆ†äº« - VirtualFlow: Decoupling Deep Learning Models from the underlying Hardware</title>
        <description>&lt;h2 id=&quot;reference&quot;&gt;Reference&lt;/h2&gt;

&lt;p&gt;Or, Andrew, Haoyu Zhang, and Michael None Freedman. â€œVirtualflow: Decoupling deep learning models from the underlying hardware.â€Â &lt;em&gt;Proceedings of Machine Learning and Systems&lt;/em&gt;Â 4 (2022): 126-140.&lt;/p&gt;

&lt;h2 id=&quot;faq&quot;&gt;FAQ&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;Tensorflowçš„AIæ¡†æ¶ä¸­å·²ç»ç”¨Executorçš„æ¦‚å¿µæŠ½è±¡è§£è€¦äº†åº•å±‚çš„å®é™…æ‰§è¡Œç¡¬ä»¶ï¼ŒVirtualFlowæ‰€æŠ½è±¡çš„Virtual Nodesä¸Executorç›¸æ¯”æœ‰ä»€ä¹ˆå·®å¼‚ï¼Ÿ
    &lt;blockquote&gt;
      &lt;p&gt;ä¼ ç»Ÿçš„AIæ¡†æ¶ä¸­Virtual Nodeså’ŒPhysical Acceleratorsèµ„æºçš„æ˜ å°„å…³ç³»æ˜¯&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1:1&lt;/code&gt;ï¼Œä¾‹å¦‚åœ¨Tensorflowä¸­æ¯ä¸ªGPUè®¾å¤‡å¯¹åº”ä¸€ä¸ªæŠ½è±¡çš„Executorå¯¹è±¡ã€‚
ä½†æ˜¯è¿™åªæ˜¯&lt;strong&gt;æ—¶é—´å’Œèµ„æºç©ºé—´ä¸­çš„ä¸€ç§åˆ’åˆ†æ–¹å¼&lt;/strong&gt;
VirtualFlowåˆ™æ˜¯å°†æ—¶é—´å’Œèµ„æºä¸¤ä¸ªç»´åº¦ç»„æˆçš„ç©ºé—´è¿›è¡Œåˆ’åˆ†ï¼Œæ‹“å±•äº†ä¼ ç»ŸAIæ¡†æ¶ä¸­çš„Virtual Nodeså’ŒPhysical Acceleratorsèµ„æº&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1:1&lt;/code&gt;çš„æ˜ å°„å…³ç³»
VirtualFlowçš„ä¸€ä¸ªåˆ›æ–°ç‚¹å°±&lt;strong&gt;åœ¨äºç”¨æ—¶é—´æ¢ç©ºé—´ï¼Œå¹¶ä¿æŒæ¨¡å‹çš„æ”¶æ•›é€Ÿåº¦å’Œæ¨¡å‹ç²¾åº¦ä¸å˜&lt;/strong&gt;&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;æ¨¡å‹çš„æ”¶æ•›æ€§å’Œbatch-size/learning-rateè¿™äº›çš„hyperparametersä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ
    &lt;blockquote&gt;
      &lt;p&gt;åœ¨è¯´æ¨¡å‹æ”¶æ•›çš„æ—¶å€™ï¼Œ&lt;strong&gt;ä¸€èˆ¬æŒ‡çš„æ˜¯è®­ç»ƒã€éªŒè¯æŸå¤±æ›²çº¿æ²¡æœ‰å¤§çš„æ³¢åŠ¨&lt;/strong&gt;ï¼Œè€Œä¸”éšç€è®­ç»ƒè½®æ•°ä¸æ–­å¢åŠ ï¼Œæ³¢åŠ¨ä¾ç„¶å¯ä»¥åœ¨ä¸€å®šå®¹å¿èŒƒå›´å†…ã€‚
ä¸ªäººç†è§£ï¼Œæ”¶æ•›çš„æ„ä¹‰æ˜¯ç³»ç»Ÿç¨³å®šï¼Œå°±æ˜¯æ¨¡å‹çš„æŸä¸€ä¸ªæƒé‡å‚æ•°å‘ç”Ÿå°çš„æ”¹å˜çš„æ—¶å€™ï¼Œæ¨¡å‹è¾“å‡ºç»“æœä¸ä¼šå‘ç”Ÿå¼ºçƒˆå˜åŒ–ï¼Œå¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„å‘æ•£ã€‚
ç½‘ç»œæ¨¡å‹ä¸æ”¶æ•›ç›´è§‚ä½“ç°æ˜¯&lt;strong&gt;losså‡½æ•°æ— æ³•ä¸‹é™&lt;/strong&gt;ï¼Œæœ¬è´¨ä¸Šæ˜¯ç½‘ç»œæˆ–è€…è®­ç»ƒæ–¹æ³•æœ‰é—®é¢˜ï¼ŒåŒ…æ‹¬batch-sizeå¤§å°ï¼Œæ˜¯å¦æ•°æ®å½’ä¸€åŒ–ï¼Œå­¦ä¹ ç‡è®¾è®¡ï¼Œåˆå§‹åŒ–æƒé‡ç­‰ï¼Œè¿™äº›éƒ½éœ€è¦æ£€æŸ¥ä¸€ä¸‹&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;VirtualFlowçš„Virtual Nodesæ˜¯æ€ä¹ˆä¿è¯æ¨¡å‹çš„æ”¶æ•›æ€§ï¼Ÿ
    &lt;blockquote&gt;
      &lt;p&gt;åœºæ™¯è¯´æ˜ï¼šåŸæ¥å¤§æ¨¡å‹éš¾ä»¥åœ¨èµ„æºè¾ƒå°è§„æ¨¡çš„GPUé›†ç¾¤ä¸Šç›´æ¥å¤ç”¨åŸæ¥çš„Hyperparametersè¿›è¡Œè®­ç»ƒï¼Œå› ä¸ºåŸæ¥åœ¨å¤§é›†ç¾¤ä¸Šä½¿ç”¨çš„batch-sizeåœ¨ä¸ä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œåœ¨å°è§„æ¨¡çš„GPUé›†ç¾¤ä¸Šè¿è¡Œä¸èµ·æ¥ã€‚å¦‚æœç›´æ¥è°ƒæ•´æ¨¡å‹çš„Hyperparametersé€‚åº”å°è§„æ¨¡çš„GPUé›†ç¾¤ï¼Œé‚£ä¹ˆå°±ä¼šå­˜åœ¨æ¨¡å‹æ”¶æ•›æ€§å’Œæ¨¡å‹ç²¾åº¦å˜åŒ–çš„é—®é¢˜
æ‰€ä»¥ï¼ŒVirtualFlowæ˜¯ç›´æ¥ç”¨ä¸åŸå§‹å¤§è§„æ¨¡é›†ç¾¤è®­ç»ƒåœºæ™¯ç›¸åŒæ•°é‡çš„Virtual NodesèŠ‚ç‚¹æ¥æ¨¡æ‹ŸåŸå§‹å¤§è§„æ¨¡é›†ç¾¤ä¸­çš„GPUèŠ‚ç‚¹ï¼Œè¿™æ ·å°±ä¸éœ€è¦è°ƒæ•´æ¨¡å‹çš„Hyperparameterså‚æ•°ã€‚
æ–‡ä¸­çš„ä¸€ä¸ªå¯é‡ç°ç›¸åŒæ¨¡å‹ç²¾åº¦çš„å®éªŒè®¾è®¡ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„å®éªŒå¯¹ç…§ç»„ä¸­æ‰€æœ‰çš„virtual nodesçš„æ•°é‡æ˜¯ç›¸åŒã€‚
&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/20230130153829.png&quot; alt=&quot;&quot; /&gt;
 &lt;strong&gt;æ€»ç»“ä¸€ä¸‹å°±æ˜¯VirtualFlowé€šè¿‡Virtual Nodesæ¨¡æ‹Ÿå‡ºäº†å’ŒåŸåœºæ™¯ç›¸åŒçš„GPUæ•°é‡ï¼Œè‡ªå·±å°è£…äº†Virtual Nodesåˆ°Physical GPU Resourceä¹‹é—´çš„å¤æ‚çš„æ˜ å°„å…³ç³»å’Œå¤„ç†é€»è¾‘&lt;/strong&gt;&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;VirtualFlowä¸­ä¸åŒæ¨¡å‹çš„Virtual Nodesè®¾ç½®å¤šå¤§æ‰æ¯”è¾ƒåˆé€‚å‘¢ï¼Ÿ
    &lt;blockquote&gt;
      &lt;p&gt;è¿™ä¸ªéœ€è¦æ ¹æ®å…·ä½“çš„åœºæ™¯è¿›è¡Œé€‰æ‹©ã€‚&lt;/p&gt;
      &lt;ul&gt;
        &lt;li&gt;åœ¨è®ºæ–‡ä¸­é‡ç‚¹æåˆ°çš„&lt;strong&gt;ç”¨å°è§„æ¨¡GPUé›†ç¾¤æ¨¡æ‹Ÿå¤§é›†ç¾¤åˆ†å¸ƒå¼çš„è®­ç»ƒåœºæ™¯&lt;/strong&gt;ä¸‹ï¼ŒVirtual Nodesçš„æ•°é‡åº”è¯¥å’ŒåŸå§‹åœºæ™¯ä¸­GPUçš„æ•°é‡ä¿æŒä¸€è‡´&lt;/li&gt;
        &lt;li&gt;å¦‚æœæ˜¯åˆ©ç”¨VirtualFlowå®ç°åˆ©ç”¨ä¸åŒç±»å‹GPUèµ„æºçš„å¼‚æ„è®­ç»ƒåœºæ™¯æ—¶ï¼Œåˆ™éœ€è¦é€šè¿‡è®ºæ–‡ä¸­æåˆ°çš„&lt;strong&gt;å¼‚æ„èµ„æºåˆ†é…æ±‚è§£å™¨ + ç¦»çº¿ç‰¹å¾æå–&lt;/strong&gt;è¿›è¡Œæ±‚è§£ï¼Œå¾—åˆ°æœ€ä¼˜åœ°èµ„æºåˆ†é…æ–¹å¼&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;èƒŒæ™¯&quot;&gt;èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;æ¨¡å‹ä¸åº•å±‚ç¡¬ä»¶å¼ºè€¦åˆçš„ä¸¤ä¸ªå› ç´ ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Hyperparametersä¸åº•å±‚ç¡¬ä»¶å¼ºè€¦åˆ&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;è®­ç»ƒè¿‡ç¨‹ä¸­çš„&lt;strong&gt;Hyperparameters&lt;/strong&gt;ï¼ˆä¾‹å¦‚learning rata, batch size, dropout rateï¼‰å¯¹äº&lt;strong&gt;æ¨¡å‹æ”¶æ•›æ€§å½±å“éå¸¸å¤§&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;ä¸€äº›åˆ©ç”¨å¤§è§„æ¨¡åŠ é€Ÿå™¨ç¡¬ä»¶èµ„æºå’Œå¤§batch-sizeè®­ç»ƒå¾—åˆ°çš„æ¨¡å‹ï¼Œå¾ˆéš¾é€šè¿‡å°è§„æ¨¡çš„åŠ é€Ÿå™¨èµ„æºå¤ç°å‡ºç›¸åŒçš„æ¨¡å‹ç»“æœï¼Œä¸»è¦åŸå› æ˜¯å¤§è§„æ¨¡è®­ç»ƒé›†ç¾¤ä¸­batch-sizeè¾ƒå¤§ï¼Œè€Œç›¸åŒçš„batch-sizeæ— æ³•é€‚ç”¨åœ¨å°è§„æ¨¡çš„é›†ç¾¤ä¸­ï¼Œå¦‚æœé€šè¿‡ç¼©å°batch-sizeå¤§å°ï¼Œåˆ™æ¨¡å‹è®­ç»ƒçš„æ”¶æ•›æ€§åˆ™å­˜åœ¨è¾ƒå¤§çš„å·®å¼‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;æ¨¡å‹çš„è®¡ç®—å›¾ä¸åº•å±‚ç¡¬ä»¶å¼ºè€¦åˆ&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;è®¡ç®—å›¾ä¸­ä¼šå¼ºè€¦åˆåº•å±‚ç¡¬ä»¶åŠ é€Ÿå™¨èµ„æºçš„ä¿¡æ¯ï¼ˆä¾‹å¦‚åˆ†å¸ƒå¼è®­ç»ƒä¸­çš„æ¨¡å‹å‚æ•°åŒæ­¥ç­–ç•¥ï¼‰&lt;/li&gt;
      &lt;li&gt;æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­èµ„æºå¼¹æ€§æ‰©å±•æ€§å·®ï¼Œè°ƒæ•´ç¡¬ä»¶åŠ é€Ÿå™¨èµ„æºéœ€è¦æ¶‰åŠåˆ°ä¸€ç³»åˆ—çš„æ¨¡å‹å‚æ•°checkpointå’Œrestoreï¼Œè®¡ç®—å›¾é‡æ–°ç¼–è¯‘ä¼˜åŒ–ç­‰ä¸€ç³»åˆ—æ“ä½œ&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;virtual-nodeå¤„ç†æµç¨‹&quot;&gt;Virtual Nodeå¤„ç†æµç¨‹&lt;/h2&gt;

&lt;p&gt;Virtual Nodeæ¦‚å¿µæŠ½è±¡ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ä»æ¨¡å‹çš„è§’åº¦æ¥çœ‹ï¼Œè®¡ç®—å•å…ƒå°±æ˜¯è™šæ‹Ÿçš„Virtual Nodesï¼Œåªè¦Virtual Nodesçš„æ•°é‡ä¸å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆæ¨¡å‹çš„batch-sizeå’Œæ”¶æ•›ç²¾åº¦éƒ½å°†ä¿æŒä¸å˜&lt;/li&gt;
  &lt;li&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/20230129112137.png&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;VirtualFlowå†…å­˜å¼€é”€&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;VirtualFlowçš„å†…å­˜å¼€é”€ä¸»è¦æ¥è‡ªäºGradient Bufferï¼Œè¿™ä¸ªBufferæ˜¯åŒä¸€ä¸ªç‰©ç†ç¡¬ä»¶åŠ é€Ÿå™¨çš„æ‰€æœ‰Virtual Nodeæ‰€å…±äº«
    &lt;ul&gt;
      &lt;li&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/20230129114044.png&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Gradient Bufferçš„å¤§å°è·Ÿæ¨¡å‹å‚æ•°å¤§å°æˆæ­£ç›¸å…³ï¼Œä¸batch-sizeæ— å…³ï¼Œé€šå¸¸åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­åªå æ˜¾å­˜éå¸¸å°çš„ä¸€ä¸ªæ¯”ä¾‹&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;VirtualFlowä¸­å…³äºæ—¶é—´å’Œèµ„æºçš„æƒè¡¡ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ä¼ ç»Ÿçš„AIæ¡†æ¶ä¸­Virtual Nodeså’ŒPhysical Acceleratorsèµ„æºçš„æ˜ å°„å…³ç³»æ˜¯&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1:1&lt;/code&gt;ï¼Œä½†æ˜¯è¿™åªæ˜¯&lt;strong&gt;æ—¶é—´å’Œèµ„æºç©ºé—´ä¸­çš„ä¸€ç§åˆ’åˆ†æ–¹å¼&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;VirtualFlowåˆ™æ˜¯å°†æ—¶é—´å’Œèµ„æºä¸¤ä¸ªç»´åº¦ç»„æˆçš„ç©ºé—´è¿›è¡Œåˆ’åˆ†ï¼Œæ‹“å±•äº†ä¼ ç»ŸAIæ¡†æ¶ä¸­çš„Virtual Nodeså’ŒPhysical Acceleratorsèµ„æº&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1:1&lt;/code&gt;çš„æ˜ å°„å…³ç³»&lt;/li&gt;
  &lt;li&gt;VirtualFlowçš„ä¸€ä¸ªåˆ›æ–°ç‚¹å°±&lt;strong&gt;åœ¨äºç”¨æ—¶é—´æ¢ç©ºé—´ï¼Œå¹¶ä¿æŒæ¨¡å‹çš„æ”¶æ•›é€Ÿåº¦å’Œæ¨¡å‹ç²¾åº¦ä¸å˜&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/20230129115440.png&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;èµ„æºå¼¹æ€§æ‰©ç¼©å®¹&quot;&gt;èµ„æºå¼¹æ€§æ‰©ç¼©å®¹&lt;/h2&gt;

&lt;p&gt;VirtualFlowç›¸æ¯”äºå·²æœ‰çš„GPU Cluster Schedulersçš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;åœ¨é›†ç¾¤åº•å±‚ç‰©ç†åŠ é€Ÿå™¨èµ„æºæ‰©ç¼©æ—¶ï¼Œ&lt;strong&gt;æ— éœ€ä¸­æ–­å·²ç»åœ¨è¿è¡Œçš„Jobå’Œä»checkpointå¤„æ¢å¤æ‰§è¡Œ&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;å·²æœ‰çš„GPUé›†ç¾¤è°ƒåº¦å™¨&lt;strong&gt;æ— æ³•åœ¨ä¸æŸå®³æ¨¡å‹æ”¶æ•›æ€§å’Œç²¾åº¦çš„æ¡ä»¶ä¸‹&lt;/strong&gt;ï¼ŒåŠ¨æ€åœ°&lt;strong&gt;é‡æ–°è°ƒæ•´æ¨¡å‹è®­ç»ƒä»»åŠ¡æ‰€éœ€çš„èµ„æºå¤§å°&lt;/strong&gt;ï¼ˆä¸¾äº†ä¸€ä¸ªä¾‹å­ï¼ŒJob Aéœ€è¦2ä¸ªGPUï¼ŒJob Béœ€è¦8ä¸ªGPUï¼Œä½†æ˜¯ç°åœ¨ç¯å¢ƒä¸Šåªæœ‰8ä¸ªGPUï¼Œå¦‚æœæ— æ³•è°ƒæ•´Jobçš„èµ„æºéœ€æ±‚å¤§å°ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªJobæ ¹æœ¬æ— æ³•åŒæ—¶è¿è¡Œï¼Œè€Œå½“Job Aè¿è¡Œæ—¶ï¼Œåˆ™å‰©ä½™çš„6ä¸ªGPUå°±ä¼šæµªè´¹ï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;èƒ½å¤ŸåŠ¨æ€åœ°è°ƒæ•´Jobå¯¹äºèµ„æºçš„éœ€æ±‚ï¼Œå¯ä»¥å¤§å¤§åœ°å¢åŠ æ–°çš„è°ƒåº¦æœºä¼šç‚¹&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;å¤šç§å¼‚æ„èµ„æºååŒè®­ç»ƒ&quot;&gt;å¤šç§å¼‚æ„èµ„æºååŒè®­ç»ƒ&lt;/h2&gt;

&lt;p&gt;å½“å‰æœ€æ–°çš„AIæ¡†æ¶åœ¨åŠ é€Ÿå™¨èµ„æºåˆ†é…æ—¶æœ‰ä¸€ä¸ªå‰æå‡è®¾ï¼š&lt;strong&gt;åŒä¸€ä¸ªJobåªèƒ½åˆ†é…ä½¿ç”¨ç›¸åŒçš„åŠ é€Ÿå™¨èµ„æºï¼ˆåŒç§æ¶æ„å’ŒåŒç§ç¡¬ä»¶å‹å·ï¼‰&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å­˜åœ¨çš„ä¸¤ä¸ªæŒ‘æˆ˜ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;å¦‚ä½•æœ‰æ•ˆåœ°å°†virtual nodesæ˜ å°„åˆ°å®é™…çš„å¼‚æ„åŠ é€Ÿå™¨èµ„æºï¼Ÿ
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;ç¦»çº¿ç‰¹å¾æå–&lt;/strong&gt;ï¼šæ ¹æ®ä¸åŒtype resourceç±»å‹å’Œbatch-sizeè¿›è¡Œè¿›è¡Œoffline profilingï¼Œ&lt;strong&gt;è·å–åˆ°ä¸åŒtype resourceå„è‡ªbatch-sizeå’Œthroughputä¹‹é—´çš„å…³ç³»&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;å¼‚æ„èµ„æºåˆ†é…æ±‚è§£å™¨&lt;/strong&gt;ï¼šé€šè¿‡å…¬å¼å½’ä¸€åŒ–æŠ½è±¡å‡ºå¾—åˆ°å¼‚æ„èµ„æºçš„åˆ†é…æ–¹å¼ï¼Œç„¶åè¿›è¡Œæ±‚è§£
        &lt;ul&gt;
          &lt;li&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/20230129164843.png&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;å¦‚ä½•æä¾›ä¸åŒæ„èµ„æºç›¸åŒçš„è®­ç»ƒè¯­ä¹‰ï¼Ÿ
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;æ¢¯åº¦å€¼åŒæ­¥&lt;/strong&gt;ï¼šé€šè¿‡ä¸åŒçš„åŠ é€Ÿå™¨ä¸Šçš„æ¢¯åº¦åŠ æƒå¹³å‡æ–¹æ³•ï¼Œä¿è¯æ¢¯åº¦åŒæ­¥æ—¶çš„ä¸åŒåŠ é€Ÿå™¨è®¾å¤‡ä¸Šçš„æ¢¯åº¦å€¼æ±‡èšå‡åˆ†æ—¶çš„&lt;strong&gt;æ­£ç¡®æ€§&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;æ•°æ®åˆ†ç‰‡&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å®éªŒåˆ†æ&quot;&gt;å®éªŒåˆ†æ&lt;/h2&gt;

&lt;p&gt;ç›´æ¥çœ‹è®ºæ–‡é‡Œé¢çš„Evaluationç« èŠ‚å§ï¼Œå®éªŒéƒ¨åˆ†ä¸»è¦åˆ†ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;éªŒè¯å¤§è§„æ¨¡é›†ç¾¤æ¨¡å‹è®­ç»ƒåœ¨å°è§„æ¨¡é›†ç¾¤ä¸Šçš„å¤ç°ï¼Œå¹¶ä¿æŒæ¨¡å‹ç²¾åº¦ä¸ä¸‹é™&lt;/li&gt;
  &lt;li&gt;éªŒè¯VirtualFlowæ¡†æ¶çš„èµ„æºå¼¹æ€§ä¼¸ç¼©èƒ½åŠ›&lt;/li&gt;
  &lt;li&gt;éªŒè¯VirtualFlowæ¡†æ¶çš„å¤šç±»å‹å¼‚æ„èµ„æºååŒè®­ç»ƒèƒ½åŠ›&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;VirtualFlowçš„æ ¸å¿ƒæ€æƒ³ç±»ä¼¼äº&lt;strong&gt;GPUè™šæ‹ŸåŒ–ä¸­çš„ä¸€è™šå¤š&lt;/strong&gt;ï¼ŒåŒä¸€ä¸ªç‰©ç†GPUåˆ†æ—¶æ¨¡æ‹Ÿå¤šä¸ªGPUï¼Œå®ƒçš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ä¸éœ€è¦ç­‰åˆ°æ‰€æœ‰çš„ç‰©ç†èµ„æºéœ€æ±‚éƒ½æ»¡è¶³æ—¶æ‰èƒ½å¼€å§‹å·¥ä½œï¼Œå¯ä»¥æ›´çµæ´»åœ°ç»„åˆå¤šä¸ªä»»åŠ¡å…±åŒæ‰§è¡Œï¼Œæé«˜æ•´ä¸ªèµ„æºçš„èµ„æºåˆ©ç”¨ç‡&lt;/li&gt;
  &lt;li&gt;VirtualFlowçš„ä¸»è¦å·¥ä½œ
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;æ¨¡å‹æ”¶æ•›æ€§ä¿éšœ&lt;/strong&gt;ï¼šå°è§„æ¨¡GPUé›†ç¾¤æ¨¡æ‹Ÿå¤§è§„æ¨¡é›†ç¾¤è®­ç»ƒæ¨¡å‹çš„åœºæ™¯ï¼Œå¯ä»¥ä¿è¯æ¨¡å‹çš„æ”¶æ•›æ€§å’Œæ¨¡å‹ç²¾åº¦&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;èµ„æºå¼¹æ€§ä¼¸ç¼©&lt;/strong&gt;ï¼šVirtualFlowç»´æŠ¤äº†Virtual Nodeåˆ°Physical GPUä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œå¯ä»¥åŠ¨æ€åœ°è°ƒæ•´ç‰©ç†èµ„æºåœ¨å„ä¸ªJobä¹‹é—´åˆ†é…ï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡ï¼Œå¹¶å±è”½åº•å±‚ç‰©ç†èµ„æºåŠ¨æ€ä¼¸ç¼©å¸¦æ¥çš„å½±å“&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;å¼‚æ„èµ„æºååŒè®­ç»ƒ&lt;/strong&gt;ï¼šå……åˆ†åˆ©ç”¨ç³»ç»Ÿä¸­å¤šç§å¼‚æ„è®¡ç®—èµ„æºï¼Œé€šè¿‡Virtual Nodeså±è”½åº•å±‚èµ„æºçš„å·®å¼‚ï¼Œåˆ©ç”¨ç¦»çº¿è®­ç»ƒæå–å…³é”®ç‰¹å¾ï¼Œç„¶åé€šè¿‡æ±‚è§£å™¨å¾—å‡ºæœ€ä¼˜åœ°Virtual Nodeåˆ°Physical Nodeçš„æ˜ å°„å…³ç³»&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;è®ºæ–‡ä¸­&lt;strong&gt;æ²¡æœ‰è¯¦ç»†åœ°é˜è¿°å…³äºVirtual Nodeæ˜¯å¦‚ä½•å»ºæ¨¡&lt;/strong&gt;çš„ï¼Œä¾‹å¦‚å®ƒæ¨¡æ‹Ÿçš„GPUçš„æ˜¾å­˜å¤šå¤§ï¼ŒCUDA Coreçš„æ•°é‡æ˜¯å¤šå°‘ã€‚å¦‚æœVirtual Nodeæ¨¡æ‹Ÿçš„æ˜¾å­˜å¤§äºåº•å±‚å®é™…GPUç¡¬ä»¶è®¾å¤‡çš„æ˜¾å­˜å¤§å°ï¼ŒVirtual Nodeå°±æ— æ³•å®Œæˆåˆ°å®é™…GPUè®¾å¤‡ä¹‹é—´çš„æ˜ å°„&lt;/li&gt;
  &lt;li&gt;VirtualFlowåœ¨å¤§æ¨¡å‹åœºæ™¯ï¼ˆå•ä¸ªæ¨¡å‹å‚æ•°å¤§å°æ— æ³•å­˜æ”¾åœ¨å•ä¸ªGPUèŠ‚ç‚¹ä¸Šï¼‰æ—¶ï¼Œå¦‚ä½•å°†æ¨¡å‹å¹¶è¡Œå’Œæ•°æ®å¹¶è¡Œç›¸ç»“åˆï¼›è¿˜æœ‰å¤æ‚çš„å¤šèŠ‚ç‚¹åˆ†å¸ƒå¼è®­ç»ƒåœºæ™¯ä¸‹ï¼Œå¦‚ä½•åšå¥½Virtual Nodeåˆ°Distributed Physical GPUèµ„æºä¹‹é—´çš„æ˜ å°„ï¼ˆ&lt;strong&gt;å¥½åƒè¿™ç§æƒ…å†µå°±é€€åŒ–æˆäº†GPUèµ„æºæ± åŒ–æ‹‰è¿œçš„åœºæ™¯&lt;/strong&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å‚è€ƒèµ„æ–™&quot;&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://slideslive.ch/38987813/virtualflow-decoupling-deep-learning-models-from-the-underlying-hardware?ref=recommended&quot;&gt;slides-MLSys 2022-VirtualFlow: Decoupling Deep Learning Models from the Underlying Hardware&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/cindycindy/p/13470925.html&quot;&gt;æ·±åº¦å­¦ä¹ ä»€ä¹ˆæ˜¯æ”¶æ•›ï¼Ÿ&lt;/a&gt;Â &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Sun, 29 Jan 2023 16:00:00 +0800</pubDate>
        <link>http://localhost:4000/%E8%AE%BA%E6%96%87/2023/01/29/%E8%AE%BA%E6%96%87%E5%88%86%E4%BA%AB-VirtualFlow-MLSys-2022.html</link>
        <guid isPermaLink="true">http://localhost:4000/%E8%AE%BA%E6%96%87/2023/01/29/%E8%AE%BA%E6%96%87%E5%88%86%E4%BA%AB-VirtualFlow-MLSys-2022.html</guid>
        
        <category>MLSys</category>
        
        <category>è®ºæ–‡</category>
        
        <category>AI</category>
        
        
        <category>è®ºæ–‡</category>
        
      </item>
    
      <item>
        <title>VSCodeé…ç½®Linuxå†…æ ¸æºç é˜…è¯»ç¯å¢ƒ</title>
        <description>&lt;h2 id=&quot;æ¦‚è¿°&quot;&gt;æ¦‚è¿°&lt;/h2&gt;

&lt;p&gt;ç®€å•è®°å½•ä¸€ä¸‹åœ¨VSCode IDEä¸Šé…ç½®Linuxå†…æ ¸æºç é˜…è¯»ç¯å¢ƒçš„æ–¹æ³•ï¼Œæ¬¢è¿è‡ªå–è‡ªç”¨ğŸ˜&lt;/p&gt;

&lt;h2 id=&quot;å¼€å‘ç¯å¢ƒè¯´æ˜&quot;&gt;å¼€å‘ç¯å¢ƒè¯´æ˜&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;ä¸»åŠ›å¼€å‘æœº: MacBook Pro M1 14â€™ + VSCode IDE&lt;/li&gt;
  &lt;li&gt;Linux Server:  Ubuntu 20.04.03&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¹³æ—¶çš„å¼€å‘æ–¹å¼å°±æ˜¯åœ¨æˆ‘çš„Macbook Proä¸Šæ‰“å¼€VSCode IDEï¼Œç„¶åé€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Remote SSH&lt;/code&gt;æ’ä»¶è¿œç¨‹è¿æ¥åˆ°æˆ‘å®¶é‡Œçš„Linux Serverä¸Šè¿›è¡ŒLinuxå†…æ ¸æºç é˜…è¯»å’Œå¼€å‘å·¥ä½œ&lt;/p&gt;

&lt;h2 id=&quot;é…ç½®æµç¨‹&quot;&gt;é…ç½®æµç¨‹&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;é€šè¿‡Remote SSHæ’ä»¶ï¼Œä»Macbook Proä¸Šè¿æ¥åˆ°è¿œç«¯çš„Linuxå¼€å‘æœºä¸­&lt;/li&gt;
  &lt;li&gt;å®‰è£…C/C++å®˜æ–¹æ’ä»¶&lt;/li&gt;
  &lt;li&gt;åœ¨Ubuntuå¼€å‘æœºä¸Šé€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo apt install global&lt;/code&gt;å®‰è£…globalå·¥å…·&lt;/li&gt;
  &lt;li&gt;å®‰è£…C/C++ GNU Globalæ’ä»¶&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;åœ¨VSCodeçš„å‘½ä»¤è¡Œç•Œé¢ä¸­é€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Global:Rebuild Gtags Database&lt;/code&gt;
&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/20220423225830.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;è¿‡å‡ åˆ†é’Ÿç”Ÿæˆå®Œæ¯•ï¼Œå°±ä¼šåœ¨linuxæºç ç›®å½•ä¸‹ç”ŸæˆGTAGSã€GRTAGSã€GPATHä¸‰ä¸ªtagæ•°æ®åº“æ–‡ä»¶
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &amp;lt;linux-kernel-source-dir&amp;gt;

 &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;G&quot;&lt;/span&gt;
 4:COPYING
 10:GPATH
 11:GRTAGS
 12:GTAGS
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;æœ€å¥½é‡æ–°åŠ è½½ä¸€ä¸‹å·¥ä½œåŒºï¼Œç„¶åå°±å¯ä»¥é€šè¿‡ä»£ç å®šä¹‰è·³è½¬çš„å¿«æ·é”®è¿›è¡Œè·³è½¬äº†&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/20220423225955.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Sat, 23 Apr 2022 16:00:00 +0800</pubDate>
        <link>http://localhost:4000/%E5%88%A9%E5%99%A8/2022/04/23/vscode%E5%86%85%E6%A0%B8%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE.html</link>
        <guid isPermaLink="true">http://localhost:4000/%E5%88%A9%E5%99%A8/2022/04/23/vscode%E5%86%85%E6%A0%B8%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE.html</guid>
        
        <category>vscode</category>
        
        <category>kernel</category>
        
        
        <category>åˆ©å™¨</category>
        
      </item>
    
      <item>
        <title>kata-containers 2.x ç‰ˆæœ¬å®‰è£…è¿è¡Œ</title>
        <description>&lt;h2 id=&quot;æ¦‚è¿°&quot;&gt;æ¦‚è¿°&lt;/h2&gt;

&lt;p&gt;å®¶é‡Œçš„ç”µè„‘é‡è£…äº†ç³»ç»Ÿï¼ŒåŸæ¥ç¯å¢ƒä¸Šçš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kata-containers 1.x&lt;/code&gt;ç‰ˆæœ¬ä¹Ÿæ²¡æœ‰äº†ï¼Œæ‰€ä»¥è¶ç€è¿™ä¸ªæœºä¼šå°±é¼“æ£ä¸€ä¸‹åœ¨æ–°çš„Ubuntu 20.04ç³»ç»Ÿä¸Šå®‰è£…ä¸€ä¸ªæœ€æ–°çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kata-containers 2.4.0&lt;/code&gt;ç‰ˆæœ¬ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;kataç¤¾åŒºæ¨èä»Linuxå‘è¡Œç‰ˆçš„è½¯ä»¶æºä¸­å®‰è£…kataå®‰å…¨å®¹å™¨ç»„ä»¶ï¼Œä½†æ˜¯ç¤¾åŒºåªæä¾›äº†CentOS 8 å’Œ Fedora 34 ä»¥ä¸Šç‰ˆæœ¬é…å¥—çš„å®˜æ–¹è½¯ä»¶å®‰è£…åŒ…ï¼š&lt;a href=&quot;https://github.com/kata-containers/kata-containers/tree/main/docs/install#official-packages&quot;&gt;Official packages&lt;/a&gt;
Ubuntuç³»ç»Ÿå¯ä»¥é‡‡ç”¨SnapåŒ…ç®¡ç†å™¨è¿›è¡Œå®‰è£…ï¼š&lt;a href=&quot;https://github.com/kata-containers/kata-containers/tree/main/docs/install#snap-installation&quot;&gt;Snap Installation&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä¸Šè¿°å®˜æ–¹æ¨èçš„æ–¹æ³•éƒ½æ˜¯ç®€å•çš„ä¸€é”®å®‰è£…æ–¹å¼ï¼Œå¦‚æœæƒ³å¼„æ¸…æ¥škataè½¯ä»¶å®‰è£…åŒ…ä¸­æœ‰ä»€ä¹ˆæ–‡ä»¶å†…å®¹ï¼Œå»ºè®®ç›´æ¥ä¸‹è½½ç¤¾åŒºå‘å¸ƒå·²ç»é¢„ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶å®‰è£…åŒ…è¿›è¡Œæ‰‹åŠ¨å®‰è£…ã€‚æ‰€ä»¥ï¼Œæœ¬æ–‡ä¸­ä¸»è¦ä»‹ç»çš„æ˜¯å¦‚ä½•åœ¨ä¸€å°Ubuntuç³»ç»Ÿä¸­å®‰è£…kata-containers 2.xç‰ˆæœ¬äºŒè¿›åˆ¶è½¯ä»¶åŒ…ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ³¨æ„ï¼škataå®˜æ–¹ç¤¾åŒºæä¾›çš„åªæœ‰x86æ¶æ„é¢„ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶å‹ç¼©åŒ…ï¼Œå¦‚æœä½ çš„æœºå™¨arm64æ¶æ„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆä½ åªèƒ½å‚è€ƒç¤¾åŒºçš„ç¼–è¯‘æ–¹æ³•æ‰‹åŠ¨ç¼–è¯‘å®‰è£…äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;å®‰è£…å‡†å¤‡&quot;&gt;å®‰è£…å‡†å¤‡&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;1. å‡†å¤‡ä¸€å°Linuxç³»ç»Ÿçš„ç‰©ç†æœºï¼ŒUbuntuã€openEulerã€CentOSç­‰å¸¸è§çš„Linuxå‘è¡Œç‰ˆç³»ç»Ÿéƒ½å¯ä»¥&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2. ç¡®ä¿çš„ä½ çš„æœºå™¨ç¯å¢ƒä¸Šå·²ç»å¼€å¯äº†BIOSä¸­çš„ç¡¬ä»¶è™šæ‹ŸåŒ–åŠ é€Ÿæ”¯æŒ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥æ£€æŸ¥ä½ ç‰©ç†æœºä¸Šçš„CPUæ˜¯å¦æ˜¯æ”¯æŒç¡¬ä»¶è™šæ‹ŸåŒ–åŠ é€ŸåŠŸèƒ½ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-E&lt;/span&gt;  &lt;span class=&quot;s1&quot;&gt;&apos;(vmx|svm)&apos;&lt;/span&gt; /proc/cpuinfo

flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc art arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 sdbg fma cx16 xtpr pdcm pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand lahf_lm abm 3dnowprefetch cpuid_fault epb invpcid_single pti ssbd ibrs ibpb stibp tpr_shadow vnmi flexpriority ept vpid ept_ad fsgsbase tsc_adjust bmi1 avx2 smep bmi2 erms invpcid mpx rdseed adx smap clflushopt intel_pt xsaveopt xsavec xgetbv1 xsaves dtherm arat pln pts hwp hwp_notify hwp_act_window hwp_epp md_clear flush_l1d
vmx flags	: vnmi preemption_timer invvpid ept_x_only ept_ad ept_1gb flexpriority tsc_offset vtpr mtf vapic ept vpid unrestricted_guest ple pml ept_mode_based_exec
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœè¾“å‡ºçš„ç»“æœä¸­åŒ…å«&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vmxæˆ–svm&lt;/code&gt;ï¼Œæ­å–œä½ çš„CPUæ”¯æŒç¡¬ä»¶è™šæ‹ŸåŒ–èƒ½åŠ›ã€‚&lt;/p&gt;

&lt;p&gt;æ£€æŸ¥å®ŒCPUæ˜¯å¦æ”¯æŒç¡¬ä»¶è™šæ‹ŸåŒ–èƒ½åŠ›ä¹‹åï¼Œä½ è¿˜éœ€è¦ç¡®è®¤ä½ ç‰©ç†æœºä¸Šçš„BIOSæ˜¯å¦å¼€å¯äº†ç¡¬ä»¶è™šæ‹ŸåŒ–èƒ½åŠ›ã€‚&lt;/p&gt;

&lt;p&gt;å¼€å¯çš„æ–¹æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;æ ¹æ®æœºå™¨æ‰€å®‰è£…ä¸»æ¿çš„å‚å•†ï¼Œæœç´¢ä¸€ä¸‹è¿›å…¥BIOSçš„æŒ‰é”®ä¸Šä»€ä¹ˆï¼Œä¸€èˆ¬éƒ½æ˜¯&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;F12&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ESC&lt;/code&gt;é”®ç­‰&lt;/li&gt;
  &lt;li&gt;é‡å¯ç”µè„‘ï¼Œç„¶åä¸€ç›´æŒ‰ä½è¿›å…¥BIOSçš„æŒ‰é”®ï¼Œç­‰å¾…è¿›å…¥BIOSç¯å¢ƒ&lt;/li&gt;
  &lt;li&gt;è¿›å…¥BIOSé…ç½®ç•Œé¢åï¼Œæ‰¾åˆ°CPUå¤„ç†å™¨çš„è®¾ç½®ç•Œé¢ï¼Œç„¶åå¼€å¯è™šæ‹ŸåŒ–æŠ€æœ¯æ”¯æŒã€‚&lt;/li&gt;
  &lt;li&gt;ä¿å­˜åé€€å‡ºï¼Œç„¶åæ­£å¸¸è¿›å…¥ç³»ç»Ÿå¯åŠ¨æµç¨‹ï¼Œå¯åŠ¨ç³»ç»Ÿ&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;3. åŠ è½½KVMè™šæ‹ŸåŒ–æ¨¡å—&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;åœ¨ä¸€èˆ¬å‘è¡Œç‰ˆç³»ç»Ÿä¸­éƒ½ä¿å­˜æœ‰KVMå†…æ ¸æ¨¡å—æ–‡ä»¶ï¼Œåªéœ€è¦æ‰‹åŠ¨åŠ è½½ä¸€ä¸‹å³å¯ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;modprobe kvm kvm_intel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æŸ¥çœ‹KVMæ¨¡å—æ˜¯å¦åŠ è½½åˆ°å†…æ ¸ä¸­äº†ï¼š&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo lsmod | grep kvm
kvm_intel             303104  0
kvm                   864256  1 kvm_intel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;æ‰‹åŠ¨å®‰è£…&quot;&gt;æ‰‹åŠ¨å®‰è£…&lt;/h2&gt;

&lt;h3 id=&quot;å®‰è£…kata-containersäºŒè¿›åˆ¶ç»„ä»¶&quot;&gt;å®‰è£…kata-containersäºŒè¿›åˆ¶ç»„ä»¶&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;1. ä»&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kata-containers&lt;/code&gt;å®˜æ–¹ç¤¾åŒºä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶å‹ç¼©åŒ…&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä»ä¸‹è½½é“¾æ¥é¡µé¢ä¸­æ‰¾åˆ°æœ€æ–°releaseçš„äºŒè¿›åˆ¶å‹ç¼©åŒ…å³å¯
ä¸‹è½½é“¾æ¥ï¼šhttps://github.com/kata-containers/kata-containers/releases&lt;/p&gt;

&lt;p&gt;ä¸‹è½½å›¾ä¸­çº¢è‰²æ¡†èµ·æ¥çš„å‹ç¼©åŒ…ï¼š
&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/20220422230322.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2. è§£å‹äºŒè¿›åˆ¶è½¯ä»¶åŒ…ï¼Œå¹¶æ‹·è´åˆ°&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/opt/&lt;/code&gt;ç›®å½•ä¸‹&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä¸‹è½½ä¸‹æ¥çš„äºŒè¿›åˆ¶è½¯ä»¶åŒ…é‡‡ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xz&lt;/code&gt;å‘½ä»¤è¿›è¡Œè§£å‹ï¼Œå¾—åˆ°å¦‚ä¸‹çš„ç›®å½•å’Œæ–‡ä»¶ï¼Œå…¶ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-xf&lt;/span&gt; kata-static-2.4.0-x86_64.tar.xz

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls
&lt;/span&gt;kata-static-2.4.0-x86_64.tar.xz  opt

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;tree &lt;span class=&quot;nt&quot;&gt;-L&lt;/span&gt; 4 ./opt/
./opt/
â””â”€â”€ kata
    â”œâ”€â”€ bin
    â”‚Â Â  â”œâ”€â”€ cloud-hypervisor
    â”‚Â Â  â”œâ”€â”€ containerd-shim-kata-v2
    â”‚Â Â  â”œâ”€â”€ firecracker
    â”‚Â Â  â”œâ”€â”€ jailer
    â”‚Â Â  â”œâ”€â”€ kata-collect-data.sh
    â”‚Â Â  â”œâ”€â”€ kata-monitor
    â”‚Â Â  â”œâ”€â”€ kata-runtime
    â”‚Â Â  â””â”€â”€ qemu-system-x86_64
    â”œâ”€â”€ libexec
    â”‚Â Â  â””â”€â”€ kata-qemu
    â”‚Â Â      â””â”€â”€ virtiofsd
    â””â”€â”€ share
        â”œâ”€â”€ bash-completion
        â”‚Â Â  â””â”€â”€ completions
        â”œâ”€â”€ defaults
        â”‚Â Â  â””â”€â”€ kata-containers
        â”œâ”€â”€ kata-containers
        â”‚Â Â  â”œâ”€â”€ config-5.15.26
        â”‚Â Â  â”œâ”€â”€ kata-alpine-3.15.initrd
        â”‚Â Â  â”œâ”€â”€ kata-clearlinux-latest.image
        â”‚Â Â  â”œâ”€â”€ kata-containers-initrd.img -&amp;gt; kata-alpine-3.15.initrd
        â”‚Â Â  â”œâ”€â”€ kata-containers.img -&amp;gt; kata-clearlinux-latest.image
        â”‚Â Â  â”œâ”€â”€ vmlinux-5.15.26-90
        â”‚Â Â  â”œâ”€â”€ vmlinux.container -&amp;gt; vmlinux-5.15.26-90
        â”‚Â Â  â”œâ”€â”€ vmlinuz-5.15.26-90
        â”‚Â Â  â””â”€â”€ vmlinuz.container -&amp;gt; vmlinuz-5.15.26-90
        â””â”€â”€ kata-qemu
            â””â”€â”€ qemu

12 directories, 18 files
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç®€è¦ä»‹ç»ä¸€ä¸‹ä¸Šè¿°å„ä¸ªç›®å½•ä¸­å­˜æ”¾æ–‡ä»¶çš„ä½œç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;./opt/kata/bin&lt;/code&gt;ï¼šè¯¥ç›®å½•ä¸‹ä¸»è¦å­˜æ”¾äº†kataè¿è¡Œæ—¶ç›¸å…³çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆä¾‹å¦‚æœ€ä¸»è¦çš„äºŒè¿›åˆ¶æ–‡ä»¶&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;containerd-shim-kata-v2&lt;/code&gt;ï¼‰ã€è™šæ‹ŸåŒ–ç»„ä»¶çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¾‹å¦‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu-system-x86_64&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;./opt/kata/libexec/kata-qemu&lt;/code&gt;ï¼šè¯¥ç›®å½•å­˜æ”¾çš„æ˜¯&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virtiofsd&lt;/code&gt;äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®ƒçš„ä½œç”¨äº‹åœ¨å®¿ä¸»æœºä¸Šä½œä¸ºvirtiofsçš„åç«¯ï¼Œå®ç°å®¿ä¸»æœºå’Œå®‰å…¨å®¹å™¨è™šæ‹Ÿæœºä¸­ä¹‹é—´ç›®å½•æ–‡ä»¶çš„å…±äº«&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;./opt/kata/share/bash-completion&lt;/code&gt;ï¼šè¯¥ç›®å½•ä¸‹å­˜æ”¾çš„å°±æ˜¯bashç¯å¢ƒä¸­çš„è‡ªåŠ¨è¡¥å…¨è„šæœ¬&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;./opt/kata/share/defaults/kata-containers/&lt;/code&gt;ï¼šè¯¥ç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯kata-containerså®‰å…¨å®¹å™¨çš„é…ç½®æ–‡ä»¶&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;configuration.toml&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;./opt/kata/share/kata-containers/&lt;/code&gt;ï¼šè¯¥ç›®å½•ä¸‹å­˜æ”¾çš„åˆ™æ˜¯å®‰å…¨å®¹å™¨ä¸­Guest Kernelçš„è£å‰ªçš„é…ç½®é€‰é¡¹æ–‡ä»¶ã€Guest OSçš„initrdæ ¼å¼å’Œimageæ ¼å¼é•œåƒï¼Œä»¥åŠGuest Kernelçš„äºŒè¿›åˆ¶æ–‡ä»¶&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;./opt/kata/share/kata-qemu/qemu&lt;/code&gt;ï¼šè¯¥ç›®å½•ä¸‹ä¸»è¦å­˜æ”¾äº†qemuè™šæ‹ŸåŒ–ç›¸å…³çš„biosäºŒè¿›åˆ¶æ–‡ä»¶ã€firmwareå›ºä»¶ä¿¡æ¯&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç„¶åï¼ŒæŠŠè§£å‹åˆ°å½“å‰ç›®å½•ä¸‹&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;./opt/kata&lt;/code&gt;æ–‡ä»¶å¤¹ç»™ç§»åŠ¨åˆ°æ ¹ç›®å½•ä¸‹çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/opt/&lt;/code&gt;ä¸‹é¢ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mv&lt;/span&gt; ./opt/kata /opt/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;3. å°†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;containerd-shim-kata-v2&lt;/code&gt;äºŒè¿›åˆ¶è½¯é“¾æ¥åˆ°&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/bin/&lt;/code&gt;ç›®å½•ä¸‹ï¼Œä»¥ä¾¿containerdå®¹å™¨å¼•æ“å¯ä»¥æ‰¾åˆ°kataè¿è¡Œæ—¶å¯¹åº”çš„äºŒè¿›åˆ¶æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo ln&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; /opt/kata/bin/containerd-shim-kata-v2 /usr/local/bin/containerd-shim-kata-v2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å®‰è£…å’Œé…ç½®containerdå®¹å™¨å¼•æ“&quot;&gt;å®‰è£…å’Œé…ç½®containerdå®¹å™¨å¼•æ“&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;1. å®‰è£…containerd&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ç”±äº&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kata-containers 2.x&lt;/code&gt;ç‰ˆæœ¬å·²ç»ä¸æ”¯æŒOCI Runtime Specçš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;shimv1&lt;/code&gt;æ ‡å‡†ï¼Œå› æ­¤éœ€è¦é€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;containerd&lt;/code&gt;å®¹å™¨å¼•æ“æˆ–è€…æˆ‘ä»¬åœ¨openEulerä¸Šå¼€æºçš„&lt;a href=&quot;https://gitee.com/openeuler/iSulad&quot;&gt;iSulad&lt;/a&gt;å®¹å™¨å¼•æ“æ¥æ”¯æŒ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Containerd-Shimv2&lt;/code&gt;æ¥å£æ ‡å‡†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æˆ‘æœ¬åœ°çš„ç¯å¢ƒä¸ŠUbuntuç³»ç»Ÿï¼Œå¹¶ä¸”æˆ‘ä¹‹å‰ç¯å¢ƒä¸­å·²ç»è£…è¿‡äº†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Docker CE 20.10.14&lt;/code&gt;ç‰ˆæœ¬ã€‚ç”±äºåœ¨å®‰è£…Dockerè½¯ä»¶åŒ…çš„åŒæ—¶ï¼Œå®ƒä¹Ÿä¼šå®‰è£…å¥½&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;containerd&lt;/code&gt;ç»„ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œè¿™é‡Œå»ºè®®ä½ ç›´æ¥å‚è€ƒDockerå®˜æ–¹çš„æ•™ç¨‹æ¥å®‰è£…Dockerï¼Œé¡ºä¾¿å®Œæˆcontainerdç»„ä»¶çš„å®‰è£…ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/#install-docker-ce&quot;&gt;Get Docker CE for Ubuntu&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2. ä¿®æ”¹containerdé…ç½®æ–‡ä»¶ï¼Œæ”¯æŒkataè¿è¡Œæ—¶&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;containerdé»˜è®¤çš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/containerd/config.toml&lt;/code&gt;ï¼Œå°†è¯¥æ–‡ä»¶ä¸­çš„å†…å®¹ä¿®æ”¹ä¸ºå¦‚ä¸‹çš„å†…å®¹ï¼Œæ·»åŠ å¯¹äºkataå®¹å™¨è¿è¡Œæ—¶çš„æ”¯æŒï¼š&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /etc/containerd/config.toml
#   Copyright 2018-2022 Docker Inc.

#   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
#   you may not use this file except in compliance with the License.
#   You may obtain a copy of the License at

#       http://www.apache.org/licenses/LICENSE-2.0

#   Unless required by applicable law or agreed to in writing, software
#   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#   See the License for the specific language governing permissions and
#   limitations under the License.

disabled_plugins = [&quot;cri&quot;]

root = &quot;/var/lib/containerd&quot;
state = &quot;/run/containerd&quot;
subreaper = true
oom_score = 0

[grpc]
  address = &quot;/run/containerd/containerd.sock&quot;
  uid = 0
  gid = 0

#[debug]
#  address = &quot;/run/containerd/debug.sock&quot;
#  uid = 0
#  gid = 0
#  level = &quot;info&quot;

[plugins]
  [plugins.&quot;io.containerd.grpc.v1.cri&quot;]
    [plugins.&quot;io.containerd.grpc.v1.cri&quot;.containerd]
      default_runtime_name = &quot;kata&quot;
      [plugins.&quot;io.containerd.grpc.v1.cri&quot;.containerd.runtimes]
        [plugins.&quot;io.containerd.grpc.v1.cri&quot;.containerd.runtimes.kata]
          runtime_type = &quot;io.containerd.kata.v2&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ³¨æ„ï¼šä¸Šé¢çš„containerdé…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘å·²ç»æŠŠDockerå®‰è£…åŒ…é»˜è®¤å®‰è£…æ—¶é…ç½®çš„containerd.tomlæ–‡ä»¶åšäº†ä¸€äº›ä¿®æ”¹ï¼ŒæŠŠå¾ˆå¤šæ³¨é‡Šæ‰çš„é…ç½®é€‰é¡¹éƒ½æ‰“å¼€äº†ã€‚
å…¶ä¸­ï¼Œå…³äºkataå®¹å™¨è¿è¡Œæ—¶çš„é…ç½®ä¸»è¦é›†ä¸­åœ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[plugins]&lt;/code&gt;é…ç½®é¡¹ä¸­ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;3. é‡å¯containerdç³»ç»ŸæœåŠ¡&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å®Œæˆä¸Šè¿°çš„é…ç½®ä¹‹åï¼Œé‡å¯ä¸€ä¸‹&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;containerd.service&lt;/code&gt;ç³»ç»ŸæœåŠ¡ï¼Œä½¿é…ç½®ç”Ÿæ•ˆã€‚&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl restart containerd

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl status containerd.service
â— containerd.service - containerd container runtime
     Loaded: loaded &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;/lib/systemd/system/containerd.service&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; enabled&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; vendor preset: enabled&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
     Active: active &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;running&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; since Fri 2022-04-22 21:52:39 CST&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 1h 47min ago
       Docs: https://containerd.io
    Process: 388705 &lt;span class=&quot;nv&quot;&gt;ExecStartPre&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/sbin/modprobe overlay &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;exited, &lt;span class=&quot;nv&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0/SUCCESS&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
   Main PID: 388706 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;containerd&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
      Tasks: 11
     Memory: 19.0M
     CGroup: /system.slice/containerd.service
             â””â”€388706 /usr/bin/containerd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;æµ‹è¯•kataå®‰å…¨å®¹å™¨æ˜¯å¦å®‰è£…æˆåŠŸ&quot;&gt;æµ‹è¯•kataå®‰å…¨å®¹å™¨æ˜¯å¦å®‰è£…æˆåŠŸ&lt;/h2&gt;

&lt;p&gt;å¥½äº†ï¼Œé€šè¿‡ä¸Šé¢çš„æ­¥éª¤æˆ‘ä»¬å·²ç»åœ¨æœ¬åœ°çš„æœºå™¨ä¸Šå®‰è£…å¥½kataå®‰å…¨å®¹å™¨çš„äºŒè¿›åˆ¶è½¯ä»¶åŒ…å’Œcontainerdå®¹å™¨å¼•æ“ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥éªŒè¯ä¸€ä¸‹å®‰è£…çš„kataå®‰å…¨å®¹å™¨æ˜¯å¦å·²ç»å®‰è£…æˆåŠŸã€‚&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;docker.io/library/busybox:latest&quot;&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;ctr image pull &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$image&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# æŸ¥çœ‹å®‰å…¨å®¹å™¨ä¸­Guest Kernelçš„ç‰ˆæœ¬å·&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;ctr run &lt;span class=&quot;nt&quot;&gt;--runtime&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;io.containerd.kata.v2&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$image&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; test-kata &lt;span class=&quot;nb&quot;&gt;uname&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt;

5.15.26

&lt;span class=&quot;c&quot;&gt;# æŸ¥çœ‹ç‰©ç†æœºä¸Šå®‰è£…çš„Linuxå†…æ ¸ç‰ˆæœ¬å·ï¼Œä¸¤è€…ä¸åŒåˆ™è¯´æ˜å®‰å…¨å®¹å™¨å·²ç»æˆåŠŸè¿è¡Œäº†&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;uname&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt;
5.13.0-30-generic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯åŠ¨ä¸€ä¸ªkataå®‰å…¨å®¹å™¨ï¼Œåœ¨å®¿ä¸»æœºä¸Šè§‚å¯Ÿæ˜¯å¦å­˜åœ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu&lt;/code&gt;è¿›ç¨‹ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;ctr run &lt;span class=&quot;nt&quot;&gt;--runtime&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;io.containerd.kata.v2&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$image&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; test-kata &lt;span class=&quot;nb&quot;&gt;sleep &lt;/span&gt;999999

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ps &lt;span class=&quot;nt&quot;&gt;-ef&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;qemu
root      395216  395206  0 23:47 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd &lt;span class=&quot;nt&quot;&gt;--syslog&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;auto &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; no_posix_lock &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/run/kata-containers/shared/sandboxes/test-kata/shared &lt;span class=&quot;nt&quot;&gt;--fd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;3 &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--thread-pool-size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; announce_submounts
root      395223       1  1 23:47 ?        00:00:00 /opt/kata/bin/qemu-system-x86_64 &lt;span class=&quot;nt&quot;&gt;-name&lt;/span&gt; sandbox-test-kata &lt;span class=&quot;nt&quot;&gt;-uuid&lt;/span&gt; 9ecd8760-80dc-41c1-8e4e-58adc4f68079 &lt;span class=&quot;nt&quot;&gt;-machine&lt;/span&gt; q35,accel&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;kvm,kernel_irqchip&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;on,nvdimm&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;on &lt;span class=&quot;nt&quot;&gt;-cpu&lt;/span&gt; host,pmu&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;off &lt;span class=&quot;nt&quot;&gt;-qmp&lt;/span&gt; unix:/run/vc/vm/test-kata/qmp.sock,server&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;on,wait&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;off &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; 2048M,slots&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;10,maxmem&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;16688M &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; pci-bridge,bus&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;pcie.0,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;pci-bridge-0,chassis_nr&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1,shpc&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;off,addr&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;2,io-reserve&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4k,mem-reserve&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1m,pref64-reserve&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1m &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; virtio-serial-pci,disable-modern&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;serial0 &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; virtconsole,chardev&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;charconsole0,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;console0 &lt;span class=&quot;nt&quot;&gt;-chardev&lt;/span&gt; socket,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;charconsole0,path&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/run/vc/vm/test-kata/console.sock,server&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;on,wait&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;off &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; nvdimm,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;nv0,memdev&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mem0,unarmed&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;on &lt;span class=&quot;nt&quot;&gt;-object&lt;/span&gt; memory-backend-file,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mem0,mem-path&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/opt/kata/share/kata-containers/kata-clearlinux-latest.image,size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;134217728,readonly&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;on &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; virtio-scsi-pci,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;scsi0,disable-modern&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-object&lt;/span&gt; rng-random,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;rng0,filename&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/dev/urandom &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; virtio-rng-pci,rng&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;rng0 &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; vhost-vsock-pci,disable-modern&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;,vhostfd&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;3,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;vsock-3535502973,guest-cid&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;3535502973 &lt;span class=&quot;nt&quot;&gt;-chardev&lt;/span&gt; socket,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;char-59c971d21afa49b1,path&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/run/vc/vm/test-kata/vhost-fs.sock &lt;span class=&quot;nt&quot;&gt;-device&lt;/span&gt; vhost-user-fs-pci,chardev&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;char-59c971d21afa49b1,tag&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;kataShared &lt;span class=&quot;nt&quot;&gt;-rtc&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;utc,driftfix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;slew,clock&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;host &lt;span class=&quot;nt&quot;&gt;-global&lt;/span&gt; kvm-pit.lost_tick_policy&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;discard &lt;span class=&quot;nt&quot;&gt;-vga&lt;/span&gt; none &lt;span class=&quot;nt&quot;&gt;-no-user-config&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-nodefaults&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-nographic&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--no-reboot&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-daemonize&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-object&lt;/span&gt; memory-backend-file,id&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;dimm1,size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;2048M,mem-path&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/dev/shm,share&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;on &lt;span class=&quot;nt&quot;&gt;-numa&lt;/span&gt; node,memdev&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;dimm1 &lt;span class=&quot;nt&quot;&gt;-kernel&lt;/span&gt; /opt/kata/share/kata-containers/vmlinux-5.15.26-90 &lt;span class=&quot;nt&quot;&gt;-append&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;tsc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;reliable no_timer_check rcupdate.rcu_expedited&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 i8042.direct&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 i8042.dumbkbd&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 i8042.nopnp&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 i8042.noaux&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 noreplace-smp &lt;span class=&quot;nv&quot;&gt;reboot&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;k &lt;span class=&quot;nv&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;hvc0 &lt;span class=&quot;nv&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;hvc1 cryptomgr.notests net.ifnames&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0 &lt;span class=&quot;nv&quot;&gt;pci&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lastbus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0 &lt;span class=&quot;nv&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/dev/pmem0p1 &lt;span class=&quot;nv&quot;&gt;rootflags&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;dax,data&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;ordered,errors&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;remount-ro ro &lt;span class=&quot;nv&quot;&gt;rootfstype&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;ext4 quiet systemd.show_status&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;panic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 &lt;span class=&quot;nv&quot;&gt;nr_cpus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4 systemd.unit&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;kata-containers.target systemd.mask&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;systemd-networkd.service systemd.mask&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;systemd-networkd.socket scsi_mod.scan&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;none &lt;span class=&quot;nt&quot;&gt;-pidfile&lt;/span&gt; /run/vc/vm/test-kata/pid &lt;span class=&quot;nt&quot;&gt;-smp&lt;/span&gt; 1,cores&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1,threads&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1,sockets&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4,maxcpus&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4
root      395226  395216  0 23:47 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd &lt;span class=&quot;nt&quot;&gt;--syslog&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;auto &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; no_posix_lock &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/run/kata-containers/shared/sandboxes/test-kata/shared &lt;span class=&quot;nt&quot;&gt;--fd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;3 &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--thread-pool-size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; announce_submounts
flyflyp+  395289  380349  0 23:47 pts/3    00:00:00 &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;auto &lt;span class=&quot;nt&quot;&gt;--exclude-dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;.bzr &lt;span class=&quot;nt&quot;&gt;--exclude-dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;CVS &lt;span class=&quot;nt&quot;&gt;--exclude-dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;.git &lt;span class=&quot;nt&quot;&gt;--exclude-dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;.hg &lt;span class=&quot;nt&quot;&gt;--exclude-dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;.svn &lt;span class=&quot;nt&quot;&gt;--exclude-dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;.idea &lt;span class=&quot;nt&quot;&gt;--exclude-dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;.tox qemu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;çœ‹æ¥çœŸçš„æ˜¯é€šè¿‡qemu hypervisoræŠŠå®‰å…¨å®¹å™¨è™šæ‹Ÿæœºç»™æ‹‰èµ·æ¥äº†ï¼Œå¦‚æœå¤§å®¶æœ‰å…´è¶£ï¼Œå¯ä»¥åˆ†æä¸€ä¸‹è¿™ä¸ªqemuè¿›ç¨‹ä¸­å„ä¸ªå‘½ä»¤è¡Œå‚æ•°çš„å«ä¹‰ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å‚è€ƒ&quot;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kata-containers/kata-containers/blob/main/docs/install/container-manager/containerd/containerd-install.md&quot;&gt;Install Kata Containers with containerd&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://gitee.com/openeuler/iSulad/blob/master/docs/integration.md&quot;&gt;iSuladé…ç½®æ”¯æŒkataå®‰å…¨å®¹å™¨æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Fri, 22 Apr 2022 16:00:00 +0800</pubDate>
        <link>http://localhost:4000/%E4%BA%91%E5%8E%9F%E7%94%9F/2022/04/22/kata-containers-2-x-%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%85%E8%BF%90%E8%A1%8C.html</link>
        <guid isPermaLink="true">http://localhost:4000/%E4%BA%91%E5%8E%9F%E7%94%9F/2022/04/22/kata-containers-2-x-%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%85%E8%BF%90%E8%A1%8C.html</guid>
        
        <category>äº‘åŸç”Ÿ</category>
        
        <category>kata-containers</category>
        
        <category>sandbox</category>
        
        
        <category>äº‘åŸç”Ÿ</category>
        
      </item>
    
      <item>
        <title>ptrace ç³»ç»Ÿè°ƒç”¨æ‹¦æˆªå’Œæ¨¡æ‹Ÿ</title>
        <description>&lt;h2 id=&quot;èƒŒæ™¯&quot;&gt;èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;åœ¨gVisoræ²™ç®±é¡¹ç›®ä¸­ï¼ŒGoogleé‡‡ç”¨äº†ä¸¤ç§ä¸åŒçš„ç³»ç»Ÿè°ƒç”¨æ‹¦æˆªæ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;KVMæ¨¡å¼&lt;/li&gt;
  &lt;li&gt;ptraceæ¨¡å¼&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¦å¤–ï¼Œåœ¨&lt;a href=&quot;https://arxiv.org/pdf/2108.03705.pdf&quot;&gt;Safe and Secure Subprocess Virtualization in Userspace&lt;/a&gt;ä¸­ä¹Ÿæåˆ°äº†é‡‡ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ptrace&lt;/code&gt;å®ç°ç³»ç»Ÿè°ƒç”¨æ‹¦æˆªã€‚&lt;/p&gt;

&lt;p&gt;ä»¥å‰å¯¹äº&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ptrace&lt;/code&gt;çš„æ¦‚å¿µè¿˜åœç•™åœ¨å®ƒæ˜¯å®ç°&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;strace&lt;/code&gt;å‘½ä»¤çš„åŸºç¡€ï¼Œå…·ä½“åº•å±‚çš„å®ç°åŸç†å°±ä¸€æ— æ‰€çŸ¥äº†ï¼Œå› æ­¤è¿™ç¯‡ç¬”è®°ä¸»è¦äº‹é¡¹è®°å½•ä¸€ä¸‹&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ptrace&lt;/code&gt;æ˜¯å¦‚ä½•å®ç°ç³»ç»Ÿè°ƒç”¨æ‹¦æˆªã€‚&lt;/p&gt;

&lt;h2 id=&quot;ptrace-å®šä¹‰&quot;&gt;ptrace å®šä¹‰&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ptrace(2)&lt;/code&gt; (â€œprocess traceâ€)æ˜¯Linuxç³»ç»Ÿä¸­çš„ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼ˆsyscallï¼‰ï¼Œå®ƒé€šå¸¸ç”¨äºå®ç°è¿›ç¨‹debuggingåŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;é€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ptrace&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨ï¼Œtracerï¼ˆè·Ÿè¸ªè€…ï¼‰å¯ä»¥æš‚åœtraceeï¼ˆè¢«è·Ÿè¸ªè€…ï¼‰çš„æ‰§è¡Œæµç¨‹ï¼ŒæŸ¥çœ‹å’Œè®¾ç½®traceeçš„å†…å­˜å’Œå¯„å­˜å™¨ä¸­çš„å†…å®¹ã€ç›‘æ§ç³»ç»Ÿè°ƒç”¨çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œç”šè‡³å¯ä»¥ç”¨æ¥æ‹¦æˆªæ¨¡æ‹Ÿç³»ç»Ÿè°ƒç”¨ã€‚&lt;/p&gt;

&lt;p&gt;ptraceç³»ç»Ÿè°ƒç”¨å‡½æ•°çš„å®šä¹‰ï¼š&lt;/p&gt;
&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ptrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pid_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;requestï¼šè¡¨ç¤ºéœ€è¦æ‰§è¡Œä»€ä¹ˆæ ·çš„ptraceæ“ä½œï¼Œé€šå¸¸æœ‰ä¸‹é¢å‡ ç§å¸¸ç”¨çš„å–å€¼
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_TRACEME&lt;/code&gt;ï¼šè¡¨ç¤ºå½“å‰è¿›ç¨‹å°†è¢«å®ƒçš„parentè¿›ç¨‹è¿›è¡Œè·Ÿè¸ª&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_SYSCALL&lt;/code&gt;ï¼šè¡¨ç¤ºé‡åˆ°ä¸‹ä¸€ä¸ªå¾…æ‰§è¡Œçš„ç³»ç»Ÿè°ƒç”¨å…¥å£æ—¶åœæ­¢traceeè¿›ç¨‹æˆ–ç³»ç»Ÿè°ƒç”¨åœ¨å†…æ ¸æ€æ‰§è¡Œå®Œæ¯•è¿”å›ååœæ­¢ï¼Œä»¥ä¾¿tracerè·å–ç³»ç»Ÿè°ƒç”¨çš„è¿”å›å€¼&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_GETREGS&lt;/code&gt;ï¼šè·å–traceeè¿›ç¨‹ä¸­å½“å‰çš„å¯„å­˜å™¨ä¸­çš„å€¼&lt;/li&gt;
      &lt;li&gt;å…¶ä»–çš„requestçš„å–å€¼ï¼Œè¯¦è§&lt;a href=&quot;https://man7.org/linux/man-pages/man2/ptrace.2.html&quot;&gt;ptrace(2) â€” Linux manual page&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;pidï¼šè¡¨ç¤ºè¢«è·Ÿè¸ªè€…çš„PIDè¿›ç¨‹ID&lt;/li&gt;
  &lt;li&gt;addrå’Œdataï¼šè¿™ä¸¤ä¸ªæ˜¯ptraceå‡½æ•°ä¸­é€šç”¨å‚æ•°ï¼Œä¾‹å¦‚åœ¨è¯»å–traceeçš„å¯„å­˜å™¨å€¼æ—¶ï¼Œdataå‚æ•°å°±ä¼šä¼ å…¥ä¿å­˜å¯„å­˜å™¨å†…å®¹å˜é‡çš„åœ°å€ï¼›è€Œåœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œè¿™ä¸¤ä¸ªå‚æ•°æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œé€šå¸¸é»˜è®¤ä¼ å…¥0å€¼&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;åŸºäºptraceå®ç°straceå‘½ä»¤æµç¨‹åˆ†æ&quot;&gt;åŸºäºptraceå®ç°straceå‘½ä»¤æµç¨‹åˆ†æ&lt;/h2&gt;

&lt;p&gt;åŸºäºptraceç³»ç»Ÿè°ƒç”¨å®ç°çš„ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;strace&lt;/code&gt;å‘½ä»¤çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;FATAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;too few arguments: %d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;pid_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fork&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* error */&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;FATAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strerror&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errno&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;cm&quot;&gt;/* child */&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;ptrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PTRACE_TRACEME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;cm&quot;&gt;/* Because we&apos;re now a tracee, execvp will block until the parent
             * attaches and allows us to continue. */&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;execvp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;FATAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strerror&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errno&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/* parent */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;waitpid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// sync with execvp&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ptrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PTRACE_SETOPTIONS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PTRACE_O_EXITKILL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(;;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;cm&quot;&gt;/* Enter next system call */&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PTRACE_SYSCALL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;FATAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strerror&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errno&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;waitpid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;FATAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strerror&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errno&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

        &lt;span class=&quot;cm&quot;&gt;/* Gather system call arguments */&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user_regs_struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PTRACE_GETREGS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;FATAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strerror&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errno&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;syscall&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orig_rax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;cm&quot;&gt;/* Print a representation of the system call */&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;fprintf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stderr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;%ld(%ld, %ld, %ld, %ld, %ld, %ld)&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;syscall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rdi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rsi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rdx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;cm&quot;&gt;/* Run system call and stop on exit */&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PTRACE_SYSCALL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;FATAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strerror&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errno&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;waitpid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;FATAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strerror&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errno&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

        &lt;span class=&quot;cm&quot;&gt;/* Get system call result */&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PTRACE_GETREGS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;fputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; = ?&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stderr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errno&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ESRCH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rdi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// system call was _exit(2) or similar&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;FATAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strerror&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errno&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;cm&quot;&gt;/* Print system call result */&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;fprintf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stderr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot; = %ld&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šè¿°ä»£ç æµç¨‹ç®€å•æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;é€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fork()&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨åˆ›å»ºå‡ºå¾…è·Ÿè¸ªçš„traceeè¿›ç¨‹ï¼Œè¿™é‡Œä½¿ç”¨åˆ°äº†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; ptrace(PTRACE_TRACEME, 0, 0, 0)&lt;/code&gt;å‡½æ•°&lt;/li&gt;
  &lt;li&gt;è®¾ç½®çˆ¶è¿›ç¨‹straceè¿›ç¨‹é€€å‡ºåï¼Œæ€æ­»traceeè¿›ç¨‹ï¼Œè¿™é‡Œä½¿ç”¨åˆ°äº†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ptrace(PTRACE_SETOPTIONS, pid, 0, PTRACE_O_EXITKILL)&lt;/code&gt;å‡½æ•°&lt;/li&gt;
  &lt;li&gt;æ¥ä¸‹æ¥å°±æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ï¼Œä¸æ–­åœ°é‡å¤æ‰§è¡Œä»¥ä¸‹çš„æµç¨‹ï¼šæ‰§è¡Œåˆ°traceeè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨å…¥å£å¤„åœæ­¢-&amp;gt;è·å–ç³»ç»Ÿè°ƒç”¨å‚æ•°ä¿¡æ¯-&amp;gt;æ‰§è¡Œç³»ç»Ÿè°ƒç”¨å¹¶ç­‰å¾…è¿”å›ååœæ­¢-&amp;gt;è·å–ç³»ç»Ÿè°ƒç”¨æ‰§è¡Œè¿”å›ç»“æœ
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;æ‰§è¡Œåˆ°traceeè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨å…¥å£å¤„åœæ­¢&lt;/strong&gt;ï¼šè¿™é‡Œä½¿ç”¨åˆ°äº†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ptrace(PTRACE_SYSCALL, pid, 0, 0)&lt;/code&gt;å‡½æ•°ï¼Œåœ¨è°ƒç”¨ç³»ç»Ÿè°ƒç”¨çš„å…¥å£å¤„åœæ­¢&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;è·å–ç³»ç»Ÿè°ƒç”¨å‚æ•°ä¿¡æ¯&lt;/strong&gt;ï¼šè¿™é‡Œä½¿ç”¨åˆ°äº†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ptrace(PTRACE_GETREGS, pid, 0, &amp;amp;regs)&lt;/code&gt;å‡½æ•°ï¼Œè·å–å½“å‰traceeè¿›ç¨‹ä¸­å¯„å­˜å™¨çš„å€¼&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;æ‰§è¡Œç³»ç»Ÿè°ƒç”¨å¹¶ç­‰å¾…è¿”å›ååœæ­¢&lt;/strong&gt;ï¼šè¿™é‡Œå†æ¬¡ä½¿ç”¨åˆ°äº†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ptrace(PTRACE_SYSCALL, pid, 0, 0)&lt;/code&gt;å‡½æ•°ï¼Œè¡¨ç¤ºæ¢å¤traceeè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨æ‰§è¡Œï¼Œå¹¶ç­‰ç³»ç»Ÿè°ƒç”¨æ‰§è¡Œå®Œæ¯•è¿”å›ååœæ­¢æ‰§è¡Œtraceeè¿›ç¨‹&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;è·å–ç³»ç»Ÿè°ƒç”¨æ‰§è¡Œè¿”å›ç»“æœ&lt;/strong&gt;ï¼šè¿™é‡Œå†æ¬¡ä½¿ç”¨åˆ°äº†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ptrace(PTRACE_GETREGS, pid, 0, &amp;amp;regs)&lt;/code&gt;å‡½æ•°ï¼Œè·å–ç³»ç»Ÿè°ƒç”¨çš„è¿”å›ç»“æœ&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;æ‹¦æˆªå¹¶æ¨¡æ‹Ÿç³»ç»Ÿè°ƒç”¨&quot;&gt;æ‹¦æˆªå¹¶æ¨¡æ‹Ÿç³»ç»Ÿè°ƒç”¨&lt;/h2&gt;

&lt;p&gt;ä»ä¸Šé¢çš„ä¾‹å­å¯çŸ¥ï¼Œé€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_SYSCALL&lt;/code&gt;å¯ä»¥å®ç°ç³»ç»Ÿè°ƒç”¨çš„æ‹¦æˆªå’Œæ¢å¤ç³»ç»Ÿè°ƒç”¨ç»§ç»­æ‰§è¡Œï¼Œå¦‚æœè¦æƒ³å®ç°ç³»ç»Ÿè°ƒç”¨çš„æ¨¡æ‹Ÿï¼Œå°±éœ€è¦åœ¨tracerè·Ÿè¸ªå™¨ä»£ç ä¸­å¢åŠ ä¸€äº›å…³äºç³»ç»Ÿè°ƒç”¨çš„æ¨¡æ‹Ÿæ“ä½œï¼Œé¿å…è¿›å…¥åˆ°å†…æ ¸ä¸­æ‰§è¡ŒçœŸå®çš„ç³»ç»Ÿè°ƒç”¨ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€ä¸ªç®€å•åœ°æ‹¦æˆªè¿‡æ»¤ç³»ç»Ÿè°ƒç”¨çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(;;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;cm&quot;&gt;/* Enter next system call */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ptrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PTRACE_SYSCALL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;waitpid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user_regs_struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ptrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PTRACE_GETREGS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/* Is this system call permitted? */&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blocked&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;is_syscall_blocked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orig_rax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;blocked&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orig_rax&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// set to invalid syscall&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;ptrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PTRACE_SETREGS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/* Run system call and stop on exit */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ptrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PTRACE_SYSCALL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;waitpid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blocked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;cm&quot;&gt;/* errno = EPERM */&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rax&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EPERM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Operation not permitted&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;ptrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PTRACE_SETREGS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç³»ç»Ÿè°ƒç”¨æ‹¦æˆªå¹¶æ¨¡æ‹Ÿçš„æ“ä½œå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•å®ç°ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;é€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_SYSCALL&lt;/code&gt;æ‹¦æˆªç³»ç»Ÿè°ƒç”¨&lt;/li&gt;
  &lt;li&gt;é€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_GETREGS&lt;/code&gt;è·å–å®é™…è°ƒç”¨çš„ç³»ç»Ÿè°ƒç”¨ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç³»ç»Ÿè°ƒç”¨å·å’Œå‚æ•°ï¼‰&lt;/li&gt;
  &lt;li&gt;é€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_SETREGS&lt;/code&gt;é€‰é¡¹ï¼Œä¿®æ”¹ç³»ç»Ÿè°ƒç”¨çš„è°ƒç”¨å·ä¿¡æ¯ï¼Œå°†å…¶è®¾ç½®ä¸ºä¸€ä¸ªéæ³•çš„ç³»ç»Ÿè°ƒç”¨å·ï¼Œ&lt;/li&gt;
  &lt;li&gt;æœ€åï¼Œé€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_SYSCALL&lt;/code&gt;é‡æ–°æ¢å¤ç³»ç»Ÿç³»ç»Ÿè°ƒç”¨æ‰§è¡Œï¼Œè§¦å‘å¼‚å¸¸ï¼›åœ¨tracerä»£ç ä¸­å¤„ç†ä¸Šè¿°çš„å¼‚å¸¸ï¼Œåœ¨ç”¨æˆ·ç©ºé—´ä»£ç ä¸­æ¨¡æ‹Ÿç³»ç»Ÿè°ƒç”¨çš„æ‰§è¡Œï¼Œè¿”å›æ¨¡æ‹Ÿæ‰§è¡Œçš„ç»“æœ&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä½†æ˜¯ï¼Œä¸Šè¿°è¿™ç§æ‹¦æˆªå¹¶æ¨¡æ‹Ÿç³»ç»Ÿè°ƒç”¨çš„æ–¹å¼éå¸¸ä½æ•ˆï¼Œæ€»å…±éœ€è¦4æ¬¡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ptrace&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨ï¼ˆä¹Ÿå°±è§¦å‘äº†4æ¬¡ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;ä»2005å¹´ä¹‹åï¼ŒLinuxå†…æ ¸ä¸­å¼•å…¥äº†ä¸€ä¸ªæ–°çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ptrace&lt;/code&gt;çš„requestç±»å‹ï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_SYSEMU&lt;/code&gt;æ¥æ¨¡æ‹Ÿç³»ç»Ÿè°ƒç”¨ï¼Œå‡å°‘æ¨¡æ‹Ÿç³»ç»Ÿè°ƒç”¨å¸¦æ¥çš„é¢å¤–å†…æ ¸ä¸Šä¸‹æ–‡å¼€é”€ã€‚åŸºäº&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_SYSEMU&lt;/code&gt;å®ç°ç³»ç»Ÿè°ƒç”¨æ‹¦æˆªå’Œæ¨¡æ‹Ÿçš„æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;é€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_SYSEMU&lt;/code&gt;åœ¨ç³»ç»Ÿè°ƒç”¨å…¥å£å¤„æ‹¦æˆªç³»ç»Ÿè°ƒç”¨&lt;/li&gt;
  &lt;li&gt;é€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_GETREGS&lt;/code&gt;è·å–å®é™…è°ƒç”¨çš„ç³»ç»Ÿè°ƒç”¨ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç³»ç»Ÿè°ƒç”¨å·å’Œå‚æ•°ï¼‰&lt;/li&gt;
  &lt;li&gt;ç„¶åç”±traceræ¥æ¨¡æ‹Ÿç³»ç»Ÿè°ƒç”¨çš„å®ç°ï¼Œè¿”å›æ¨¡æ‹Ÿçš„ç³»ç»Ÿè°ƒç”¨æ‰§è¡Œç»“æœ&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä¸€ä¸ªç®€å•åŸºäº&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_SYSEMU&lt;/code&gt;å®ç°ç³»ç»Ÿè°ƒç”¨å’Œæ‹¦æˆªçš„å…³é”®ä»£ç é€»è¾‘ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    ptrace&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;PTRACE_SYSEMU, pid, 0, 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    waitpid&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;pid, 0, 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    struct user_regs_struct regs&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    ptrace&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;PTRACE_GETREGS, pid, 0, &amp;amp;regs&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    switch &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;regs.orig_rax&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; OS_read:
            /&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; ... &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;/

        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; OS_write:
            /&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; ... &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;/

        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; OS_open:
            /&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; ... &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;/

        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; OS_exit:
            /&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; ... &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;/

        /&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; ... and so on ... &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;/
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œç›¸æ¯”äº&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_SYSCALL&lt;/code&gt;ï¼ŒåŸºäº&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PTRACE_SYSEMU&lt;/code&gt;å®ç°ç³»ç»Ÿè°ƒç”¨æ‹¦æˆªå’Œæ¨¡æ‹Ÿçš„æ–¹æ³•ï¼Œ&lt;strong&gt;å‡å°‘äº†2ä¸ªptraceç³»ç»Ÿè°ƒç”¨&lt;/strong&gt;ï¼Œæ•´ä½“ç³»ç»Ÿè°ƒç”¨æ¨¡æ‹Ÿçš„æ€§èƒ½ä¹Ÿæœ‰æ‰€æé«˜ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å‚è€ƒ&quot;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://nullprogram.com/blog/2018/06/23/&quot;&gt;Intercepting and Emulating Linux System Calls with Ptrace&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://man7.org/linux/man-pages/man2/ptrace.2.html&quot;&gt;ptrace(2) â€” Linux manual page&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Mon, 28 Mar 2022 18:40:00 +0800</pubDate>
        <link>http://localhost:4000/linux/2022/03/28/ptrace-%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E6%8B%A6%E6%88%AA%E5%92%8C%E6%A8%A1%E6%8B%9F.html</link>
        <guid isPermaLink="true">http://localhost:4000/linux/2022/03/28/ptrace-%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E6%8B%A6%E6%88%AA%E5%92%8C%E6%A8%A1%E6%8B%9F.html</guid>
        
        <category>ç¬”è®°</category>
        
        <category>å†…æ ¸</category>
        
        <category>äº‘åŸç”Ÿ</category>
        
        <category>ptrace</category>
        
        <category>sandbox</category>
        
        
        <category>linux</category>
        
      </item>
    
      <item>
        <title>May the force be with you</title>
        <description>&lt;h1 id=&quot;may-the-force-be-with-you&quot;&gt;May the force be with you&lt;/h1&gt;

&lt;iframe src=&quot;https://www.xmind.net/embed/ckdwBg/&quot; width=&quot;750&quot; height=&quot;630&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; allowfullscreen=&quot;true&quot;&gt;&lt;/iframe&gt;

&lt;h2 id=&quot;linux-ç³»ç»Ÿç¼–ç¨‹&quot;&gt;Linux ç³»ç»Ÿç¼–ç¨‹&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.csdn.net/LEON1741/article/details/78142269&quot;&gt;linuxä¸‹çš„åƒµå°¸è¿›ç¨‹äº§ç”ŸåŸå› å’Œè§£å†³æ–¹æ³•ï¼ˆå«å…·ä½“ä»£ç ï¼‰&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.cnblogs.com/alantu2018/p/8526916.html&quot;&gt;æ™®é€šçº¿ç¨‹å’Œå†…æ ¸çº¿ç¨‹&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.csdn.net/yasi_xi/article/details/9899599&quot;&gt;libcã€glibcå’Œglibçš„å…³ç³»&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cloud.tencent.com/developer/ask/26856&quot;&gt;æˆ‘ä»æ¥æ²¡æœ‰çœŸæ­£æ˜ç™½ï¼šä»€ä¹ˆæ˜¯POSIXï¼Ÿ&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://insujang.github.io/2018-11-27/udev-device-manager-for-the-linux-kernel-in-userspace/&quot;&gt;udev: Device Manager for the Linux Kernel in Userspace&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;ç¼–è¯‘--é“¾æ¥&quot;&gt;ç¼–è¯‘ &amp;amp; é“¾æ¥&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://chemiandy.lofter.com/post/1d254b22_69a16af&quot;&gt;Linuxåº“æ–‡ä»¶æœç´¢è·¯å¾„&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://tech.meituan.com/2015/01/22/linker.html&quot;&gt;é«˜çº§è¯­è¨€çš„ç¼–è¯‘ï¼šé“¾æ¥åŠè£…è½½è¿‡ç¨‹ä»‹ç»&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://itbilu.com/linux/management/V1vdnt9ll.html&quot;&gt;Linuxå‡çº§å®‰è£…GCC&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://itbilu.com/linux/management/NymXRUieg.html&quot;&gt;è§£å†³ç±»ä¼¼ /usr/lib64/libstdc++.so.6: version `GLIBCXX_3.4.21â€™ not found çš„é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;ç½‘ç»œ&quot;&gt;ç½‘ç»œ&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/zqjflash/tcp-ip-protocol&quot;&gt;TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://e-mailky.github.io/2017-02-14-netlink-user-kernel1&quot;&gt;ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´é€šè®¯â€“netlink&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stephanietang.github.io/2020/04/19/how-https-works/&quot;&gt;HTTPSçš„å·¥ä½œåŸç†&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;æ“ä½œç³»ç»Ÿ&quot;&gt;æ“ä½œç³»ç»Ÿ&lt;/h2&gt;

&lt;h3 id=&quot;æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆ&quot;&gt;æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆ&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://tlanyan.me/yum-repos-summary/&quot;&gt;å¸¸ç”¨yumæºæ•´ç†&lt;/a&gt;ï¼šä»‹ç»äº†å®˜æ–¹yumæºå’Œç¬¬ä¸‰æ–¹yumæºçš„åŒºåˆ«å’Œå¸¸ç”¨çš„yumæºé•œåƒåœ°å€&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://juejin.im/post/5d0ef5376fb9a07ef63fe74e&quot;&gt;CentOS 7ä¸Šå‡çº§/å®‰è£…gcc&lt;/a&gt;ï¼šè¿™ç¯‡æ–‡ç« ä»‹ç»äº†å¦‚ä½•é€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scl&lt;/code&gt;å·¥å…·æ›´æ–°gccç‰ˆæœ¬&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.cnblogs.com/wswind/p/10729610.html&quot;&gt;CentOS ä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶æº å®‰è£…æœ€æ–°ç‰ˆæœ¬è½¯ä»¶ çœå»ç¼–è¯‘çƒ¦æ¼ IUS SCL&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://linux.cn/article-8509-1.html&quot;&gt;CentOS ä¸Šæœ€ä½³çš„ç¬¬ä¸‰æ–¹ä»“åº“&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;è®¡ç®—æœºä½“ç³»ç»“æ„&quot;&gt;è®¡ç®—æœºä½“ç³»ç»“æ„&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.zhihu.com/question/23474438&quot;&gt;å¤„ç†å™¨æ¶æ„ã€æŒ‡ä»¤é›†å’Œæ±‡ç¼–è¯­è¨€ï¼Œä¸‰è€…æœ‰ä½•å…³ç³»ï¼Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;è™šæ‹ŸåŒ–&quot;&gt;è™šæ‹ŸåŒ–&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://smilejay.com/2012/11/how-to-mount-a-qcow2-image/&quot;&gt;å¦‚ä½•æŒ‚è½½QCOW2æ ¼å¼çš„é•œåƒæ–‡ä»¶&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.cnblogs.com/hugetong/p/5903105.html&quot;&gt;æŒ‚è½½qcow2æ–‡ä»¶ï¼Œqcow2é‡Œè¾¹è¿˜æœ‰ä¸ªlvm&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.infoq.cn/article/wcSmEKasstv*AdEPZE61&quot;&gt;åŸºäº Kata Containers ä¸ iSulad çš„äº‘å®¹å™¨å®è·µè§£æ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;äº‘åŸç”Ÿ&quot;&gt;äº‘åŸç”Ÿ&lt;/h2&gt;

&lt;h3 id=&quot;serverless&quot;&gt;Serverless&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://liubin.org/blog/2018/05/04/the-world-is-full-managed/&quot;&gt;ä¸–ç•Œæ˜¯ container çš„ï¼Œä¹Ÿæ˜¯ microservice çš„ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯ serverless çš„&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;k8s&quot;&gt;k8s&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://note.sycki.com/articles/kubernetes/k8s-code-kubelet&quot;&gt;k8sæºç åˆ†æ-kubelet&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.jianshu.com/p/1919fb8a48ea&quot;&gt;Kubelet å¯¹CNIçš„å®ç°&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000019956620&quot;&gt;å½»åº•ç†è§£kubernetes CNI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;å®¹å™¨&quot;&gt;å®¹å™¨&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://tech.meituan.com/2020/03/12/cloud-native-security.html&quot;&gt;äº‘åŸç”Ÿä¹‹å®¹å™¨å®‰å…¨å®è·µ&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000016137548&quot;&gt;Dockerfileå¤šé˜¶æ®µæ„å»ºåŸç†å’Œä½¿ç”¨åœºæ™¯&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;å®‰å…¨å®¹å™¨&quot;&gt;å®‰å…¨å®¹å™¨&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.infoq.cn/article/wcSmEKasstv*AdEPZE61&quot;&gt;åŸºäº Kata Containers ä¸ iSulad çš„äº‘å®¹å™¨å®è·µè§£æ&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cloud.tencent.com/developer/news/604184&quot;&gt;Kata Containers åˆ›å§‹äººå¸¦ä½ å…¥é—¨å®‰å…¨å®¹å™¨æŠ€æœ¯&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;åˆ©å™¨&quot;&gt;åˆ©å™¨&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.cnblogs.com/hongdada/p/9776547.html&quot;&gt;Typoraå¿«æ·é”®&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;vscode&quot;&gt;vscode&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://code.visualstudio.com/shortcuts/keyboard-shortcuts-windows.pdf&quot;&gt;vscodeå¿«æ·é”®é€Ÿè®°è¡¨&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.zhihu.com/question/37623310/answer/150017561&quot;&gt;VS Codeæœ‰å“ªäº›å¸¸ç”¨çš„å¿«æ·é”®ï¼Ÿ - å”ä¼Ÿçš„å›ç­” - çŸ¥ä¹&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000017949680&quot;&gt;å®‡å®™æœ€å¼ºvscodeæ•™ç¨‹ï¼ˆåŸºç¡€ç¯‡ï¼‰&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;vscodeå¸¸ç”¨å¿«æ·é”®&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;F12&lt;/code&gt;ï¼šè·³è½¬åˆ°å®šä¹‰å¤„&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Shift + F12&lt;/code&gt;ï¼šè·³è½¬åˆ°å¼•ç”¨è¯¥å‡½æ•°çš„åœ°æ–¹&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Alt + &amp;lt;å·¦/å³æ–¹å‘é”®&amp;gt;&lt;/code&gt;ï¼šè·³è½¬åˆ°ä¸Šä¸€æ¬¡å…‰æ ‡å¤„/ä¸‹ä¸€æ¬¡å…‰æ ‡å¤„&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl + P&lt;/code&gt;çª—å£å¯ä»¥æ‰§è¡Œçš„æ“ä½œï¼š
        &lt;ul&gt;
          &lt;li&gt;ç›´æ¥è¾“å…¥æ–‡ä»¶åï¼Œå¿«é€Ÿæ‰“å¼€æ–‡ä»¶&lt;/li&gt;
          &lt;li&gt;? åˆ—å‡ºå½“å‰å¯æ‰§è¡Œçš„åŠ¨ä½œ&lt;/li&gt;
          &lt;li&gt;! æ˜¾ç¤ºErrorsæˆ–Warningsï¼Œä¹Ÿå¯ä»¥Ctrl+Shift+M&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:&lt;/code&gt;è·³è½¬åˆ°è¡Œæ•°ï¼Œä¹Ÿå¯ä»¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl+G&lt;/code&gt;ç›´æ¥è¿›å…¥&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@&lt;/code&gt;è·³è½¬åˆ°symbolï¼ˆæœç´¢å˜é‡æˆ–è€…å‡½æ•°ï¼‰ï¼Œä¹Ÿå¯ä»¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl+Shift+O&lt;/code&gt;ç›´æ¥è¿›å…¥&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@:&lt;/code&gt;æ ¹æ®åˆ†ç±»è·³è½¬symbolï¼ŒæŸ¥æ‰¾å±æ€§æˆ–å‡½æ•°ï¼Œä¹Ÿå¯ä»¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl+Shift+O&lt;/code&gt;åè¾“å…¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:&lt;/code&gt;è¿›å…¥&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#&lt;/code&gt; æ ¹æ®åå­—æŸ¥æ‰¾symbolï¼Œä¹Ÿå¯ä»¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl+T&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl + K , Ctrl + S&lt;/code&gt;ï¼šæ‰“å¼€VScodeç»‘å®šçš„å¿«æ·é”®åˆ—è¡¨ï¼Œå¯ä»¥æœç´¢å¿«æ·é”®&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;å¼€å‘å·¥å…·&quot;&gt;å¼€å‘å·¥å…·&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.csdn.net/zhangpower1993/article/details/52184581&quot;&gt;vimæ’ä»¶ç®¡ç†å™¨ï¼šVundleçš„ä»‹ç»åŠå®‰è£…ï¼ˆå¾ˆå…¨ï¼‰&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stedolan.github.io/jq/&quot;&gt;jsonç”Ÿæˆå’Œè§£æå‘½ä»¤è¡Œå·¥å…·-jq&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.b1uew01f.net/learnnotes/linux/304.html&quot;&gt;jq: shell è„šæœ¬ä¸­JSONåˆ›å»ºã€è§£æå·¥å…·&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.lujun9972.win/blog/2018/03/01/ä½¿ç”¨jqç»„è£…json/index.html&quot;&gt;ä½¿ç”¨jqç»„è£…JSON&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ç¼–è¯‘åŸç†&quot;&gt;ç¼–è¯‘åŸç†&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.infoq.cn/article/t184YFyd_VMEv0dIhpRd&quot;&gt;ä¸æƒ³å½“â€œèºä¸é’‰â€ï¼Ÿå…ˆæå®šç¼–è¯‘åŸç†&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.infoq.cn/article/laTWH0UM4ZWWiTSAmrlR&quot;&gt;2019 å¹´æœ€æ–°ç¼–è¯‘åŸç†å­¦ä¹ å…¨æ”»ç•¥&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;linux-å†…æ ¸&quot;&gt;Linux å†…æ ¸&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.wowotech.net/device_model/uevent.html&quot;&gt;Linuxè®¾å¤‡æ¨¡å‹(3)_Uevent&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.jianshu.com/p/10653d83909d&quot;&gt;Linux è®¾å¤‡æ¨¡å‹ä¹‹ Uevent&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;è®¾å¤‡ç®¡ç†&quot;&gt;è®¾å¤‡ç®¡ç†&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/l-cn-udev/index.html&quot;&gt;ä½¿ç”¨ udev é«˜æ•ˆã€åŠ¨æ€åœ°ç®¡ç† Linux è®¾å¤‡æ–‡ä»¶&lt;/a&gt;ï¼šè®¾å¤‡æ–‡ä»¶åˆ›å»º/udev&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cloud.tencent.com/developer/article/1169495&quot;&gt;udevå’Œdevfsçš„åŒºåˆ«&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.csdn.net/longwang155069/article/details/52757592&quot;&gt;devtmpfsæ–‡ä»¶ç³»ç»Ÿåˆ›å»ºè®¾å¤‡èŠ‚ç‚¹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ç¼–ç¨‹è¯­è¨€&quot;&gt;ç¼–ç¨‹è¯­è¨€&lt;/h2&gt;

&lt;h3 id=&quot;rust&quot;&gt;Rust&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.zhihu.com/question/31038569/answer/915365379&quot;&gt;å¦‚ä½•å¼€å§‹å­¦ä¹  Rust è¯­è¨€? - è’‹å¤ç”³çš„å›ç­” - çŸ¥ä¹&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/rcore-os/zCore&quot;&gt;zCore-ä¸€ä¸ªç”¨Rustå†™çš„RISVçš„å°å‹æ“ä½œç³»ç»Ÿ&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/emosenkis/esp-rs/issues/10&quot;&gt;è§£å†³rust nightlyç¼–è¯‘å·¥å…·é“¾é—®é¢˜-error: toolchain â€˜nightly-x86_64-unknown-linux-gnuâ€™ is not installed&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Rustè¯­è¨€çš„å¼€å‘è¿­ä»£å‘å¸ƒæµç¨‹-&lt;a href=&quot;https://kaisery.github.io/trpl-zh-cn/appendix-07-nightly-rust.html#%E9%99%84%E5%BD%95-grust-%E6%98%AF%E5%A6%82%E4%BD%95%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%8E-nightly-rust&quot;&gt;é™„å½•-grust-æ˜¯å¦‚ä½•å¼€å‘çš„ä¸-nightly-rust&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;golang&quot;&gt;Golang&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/42848636/difference-between-golang-org-packages-and-the-standard-library&quot;&gt;Difference between golang.org packages and the standard library&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.bookstack.cn/books/qcrao-Go-Questions&quot;&gt;Go è¯­è¨€é—®é¢˜é›†(Go Questions)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;webassembly&quot;&gt;WebAssembly&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://rustwasm.github.io/docs/book/introduction.html#rust--and-webassembly-&quot;&gt;Rust And WebAssembly&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/WebAssembly/Understanding_the_text_format&quot;&gt;ç†è§£WebAssemblyæ–‡æœ¬æ ¼å¼&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://rustcc.cn/article?id=b8a26e3a-16f2-4657-acdb-dd64b3a6773c&quot;&gt;ã€Rustæ¯å‘¨ä¸€çŸ¥ã€‘Rust, wasm, wasi è¯•ç©å„¿&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/rustcc/RustPrimer/blob/master/install/rustup.md&quot;&gt;Rust ç‰ˆæœ¬ç®¡ç†å·¥å…·: rustup&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;è°ƒè¯•&quot;&gt;è°ƒè¯•&lt;/h2&gt;

&lt;h3 id=&quot;gdbè°ƒè¯•æ–¹æ³•&quot;&gt;gdbè°ƒè¯•æ–¹æ³•&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://izualzhy.cn/why-the-code-stack-is-overflow&quot;&gt;è¿½coreç¬”è®°ä¹‹äº”ï¼šå¦‚ä½•æŸ¥çœ‹ä¸€ä¸ªcorrupt stackçš„core&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.cnblogs.com/chengliangsheng/p/3597010.html&quot;&gt;Linuxä¸­ç”¨gdb æŸ¥çœ‹ä»£ç å †æ ˆçš„ä¿¡æ¯&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/selfboot/CS_Offer/blob/master/C%2B%2B/GDB_Debug.md&quot;&gt;ä½¿ç”¨ GDB è°ƒè¯•ç¨‹åº&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://draveness.me/golang/&quot;&gt;Go è¯­è¨€è®¾è®¡ä¸å®ç°&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;debuginfoåŒ…&quot;&gt;debuginfoåŒ…&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;[https://github.com/kulong0105/kulong0105.github.io/blob/master/documents/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3debuginfo.pdf](https://github.com/kulong0105/kulong0105.github.io/blob/master/documents/æ·±å…¥ç†è§£debuginfo.pdf)&quot;&gt;æ·±å…¥ç†è§£debuginfo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;è½¯ä»¶å¼€å‘æµç¨‹&quot;&gt;è½¯ä»¶å¼€å‘æµç¨‹&lt;/h2&gt;

&lt;h3 id=&quot;ç‰ˆæœ¬ç®¡ç†&quot;&gt;ç‰ˆæœ¬ç®¡ç†&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://semver.org/lang/zh-CN/&quot;&gt;è¯­ä¹‰åŒ–ç‰ˆæœ¬ 2.0.0&lt;/a&gt;ï¼šè¯­ä¹‰åŒ–ç‰ˆæœ¬ç®¡ç†çš„æ–¹å¼ï¼Œç‰ˆæœ¬æ ¼å¼ä¸ºï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ä¸»ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹ï¼Œ&lt;/li&gt;
  &lt;li&gt;æ¬¡ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ï¼Œ&lt;/li&gt;
  &lt;li&gt;ä¿®è®¢å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;é—®é¢˜å®šä½&quot;&gt;é—®é¢˜å®šä½&lt;/h2&gt;

&lt;h3 id=&quot;å†…æ ¸&quot;&gt;å†…æ ¸&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/xry111/xry111.github.io/blob/master/FixWrongIRQRouting.md&quot;&gt;é”™è¯¯çš„ IRQ ä¸­æ–­è·¯ç”±åŠä¿®å¤&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ä¼˜è´¨åšå®¢ç½‘ç«™&quot;&gt;ä¼˜è´¨åšå®¢ç½‘ç«™&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://chenweixiang.github.io/&quot;&gt;Chenweixiang&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://insujang.github.io/&quot;&gt;insujang&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Fri, 10 Jul 2020 07:00:00 +0800</pubDate>
        <link>http://localhost:4000/%E5%AD%A6%E4%B9%A0&%E6%95%88%E7%8E%87/2020/07/10/May-the-force-be-with-you.html</link>
        <guid isPermaLink="true">http://localhost:4000/%E5%AD%A6%E4%B9%A0&%E6%95%88%E7%8E%87/2020/07/10/May-the-force-be-with-you.html</guid>
        
        <category>Linux</category>
        
        <category>ç¬”è®°</category>
        
        <category>å†…æ ¸</category>
        
        <category>äº‘åŸç”Ÿ</category>
        
        
        <category>å­¦ä¹ &amp;æ•ˆç‡</category>
        
      </item>
    
      <item>
        <title>æ­å·å‘¨è¾¹éœ²è¥æŒ‡å—</title>
        <description>&lt;h2 id=&quot;æ¡åºåå­—å³¡&quot;&gt;æ¡åºåå­—å³¡&lt;/h2&gt;

&lt;h3 id=&quot;åœ°ç‚¹&quot;&gt;åœ°ç‚¹&lt;/h3&gt;

&lt;p&gt;æ¡åºå¿åå­—å³¡å‡¤å·é•‡åå­—å³¡è°·&lt;/p&gt;

&lt;h3 id=&quot;ç®€ä»‹&quot;&gt;ç®€ä»‹&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;è½¦è¾†æ— æ³•ç›´è¾¾ï¼Œéœ²è¥åœ°ç¦»åœè½¦çš„åœ°æ–¹è¾ƒè¿œ&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;åˆ†äº«&quot;&gt;åˆ†äº«&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.19lou.com/forum-32-thread-6441557736456447-1-1.html&quot;&gt;æ¡åºåå­—å³¡éœ²è¥&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å®‰å‰èµ‹çŸ³æ°´åº“&quot;&gt;å®‰å‰èµ‹çŸ³æ°´åº“&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/XHS_1587230479364c06c5dee-73ef-306a-aac6-ecec68103b75.jpg&quot; alt=&quot;XHS_1587230479364c06c5dee-73ef-306a-aac6-ecec68103b75&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;åœ°ç‚¹-1&quot;&gt;åœ°ç‚¹&lt;/h3&gt;

&lt;p&gt;å®‰å‰å¿èµ‹çŸ³æ°´åº“å°æ­å‘&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/Screenshot_20200419_004228_com.autonavi.minimap.jpg&quot; alt=&quot;Screenshot_20200419_004228_com.autonavi.minimap&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;ç®€ä»‹-1&quot;&gt;ç®€ä»‹&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;ä½äºæ°´åº“è¾¹ç¼˜ï¼Œæœ‰ä¸ªå¤§è‰åªï¼Œè¿˜æœ‰ä¸€ç‰‡æ‰æ ‘ï¼Œå¯ä»¥æŒ‚ä¸ªåŠåºŠï¼Œç¾æ»‹æ»‹&lt;/li&gt;
  &lt;li&gt;ä¸Šæ¬¡å»çš„æ—¶å€™çœ‹åˆ°æœ‰äººåœ¨é’“é±¼ï¼Œä½†æ˜¯é—®äº†ä¹‹åè¯´æ˜¯å¯ä»¥é’“é’“å°é±¼ï¼Œå¦‚æœé’“å¤§é±¼çš„è¯ï¼Œä¼šè¢«ç½šæ¬¾&lt;/li&gt;
  &lt;li&gt;å¯¹é¢çš„å±±ä¸Šå°±æ˜¯ä¸€å¤§ç‰‡ç«¹æ—ï¼Œå¤å¤©çš„æ—¶å€™è¿œè¿œæœ›å»ï¼Œä¸€ç‰‡ç¿ ç»¿ï¼Œå¿ƒæƒ…éå¸¸èˆ’ç•…&lt;/li&gt;
  &lt;li&gt;ä¸Šé¢çš„å†œå®¶ä¹æœ‰æ°´å’Œå•æ‰€ï¼Œå¥½åƒæ˜¯æ¯äººæ”¶è´¹20å…ƒå§&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å®‰å‰äº•ç©ºé‡Œ&quot;&gt;å®‰å‰äº•ç©ºé‡Œ&lt;/h2&gt;

&lt;h3 id=&quot;åœ°ç‚¹-2&quot;&gt;åœ°ç‚¹&lt;/h3&gt;

&lt;p&gt;å®‰å‰äº•ç©ºé‡ŒåŒæ°´çº¿/ä¹äº©æ‘&lt;/p&gt;

&lt;h3 id=&quot;ç®€ä»‹-2&quot;&gt;ç®€ä»‹&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;å‘¨è¾¹æœ‰å†œå®¶ä¹ï¼Œä¸Šå•æ‰€ï¼Œæƒ³å°å°å†œå®¶èœè¿˜æ˜¯å¾ˆæ–¹ä¾¿&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¯ä»¥æº¯æºªï¼Œæœ€å¥½ç©¿æº¯æºªé‹&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å®‰å‰å¤©å­å²—æ°´åº“&quot;&gt;å®‰å‰å¤©å­å²—æ°´åº“&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/XHS_15872304860182d043491-9eb6-375e-ab42-ccbdd1a05f8a.jpg&quot; alt=&quot;XHS_15872304860182d043491-9eb6-375e-ab42-ccbdd1a05f8a&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;åœ°ç‚¹-3&quot;&gt;åœ°ç‚¹&lt;/h3&gt;

&lt;p&gt;å®‰å‰å¤©å­å²—æ°´åº“æ¾æ ‘æ—&lt;/p&gt;

&lt;p&gt;æ”¶è´¹ï¼šæ¯äºº50å…ƒ&lt;/p&gt;

&lt;h3 id=&quot;ç®€ä»‹-3&quot;&gt;ç®€ä»‹&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;æœ‰ç®€æ˜“å•æ‰€å’Œè‡ªæ¥æ°´ï¼Œå¸¦å­©å­å’Œå®¶äººæ¥æ¯”è¾ƒæ–¹ä¾¿&lt;/li&gt;
  &lt;li&gt;æœ‰æ¾æ ‘ï¼Œæœ‰æ°´åº“ï¼Œå¾ˆæœ‰æ£®æ—çš„æ°”æ¯&lt;/li&gt;
  &lt;li&gt;æ”¶è´¹æ¯äºº50å…ƒ&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;åˆ†äº«-1&quot;&gt;åˆ†äº«&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://club.autohome.com.cn/bbs/thread/f35e04ad1d0bebc3/85684821-1.html&quot;&gt;å®‰å‰å¤©å­å²—æ°´åº“æ¾æ ‘æ—&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.xiaohongshu.com/discovery/item/5e8c69ec0000000001006658&quot;&gt;å®‰å‰å¤©å­å²—éœ²è¥è®°&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;è«å¹²å±±å¤§æ´‹é‡Œçˆ±è·¯å®¢æ˜Ÿç©ºè¥åœ°&quot;&gt;è«å¹²å±±å¤§æ´‹é‡Œçˆ±è·¯å®¢æ˜Ÿç©ºè¥åœ°&lt;/h2&gt;

&lt;h3 id=&quot;åœ°ç‚¹-4&quot;&gt;åœ°ç‚¹&lt;/h3&gt;

&lt;p&gt;å¯¼èˆªè‡³&lt;strong&gt;è«å¹²å±±å¤§æ´‹é‡Œéœ²è¥åŸºåœ°&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;ç®€ä»‹-4&quot;&gt;ç®€ä»‹&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;å¯ä»¥çœ‹æ—¥å‡ºï¼Œæ™šä¸Šå¯ä»¥çœ‹æ˜Ÿæ˜Ÿ&lt;/li&gt;
  &lt;li&gt;æœ‰æ°´æœ‰ç”µï¼Œä¹Ÿæœ‰å•æ‰€ï¼Œé…å¥—æ¯”è¾ƒå®Œå–„&lt;/li&gt;
  &lt;li&gt;å¯èƒ½éœ²è¥åœ°æ¯”è¾ƒæˆç†Ÿäº†ï¼Œä¹Ÿéœ€è¦æ”¶è´¹ï¼Œæ‰€ä»¥å–œæ¬¢é‚£ç§å®Œå…¨åŸç”Ÿæ€ï¼Œä¸é‚£ä¹ˆå˜ˆæ‚ç¯å¢ƒçš„äººå¯èƒ½ä¸æ˜¯å¾ˆé€‚åˆ&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;åˆ†äº«-2&quot;&gt;åˆ†äº«&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.bilibili.com/video/av36485783/&quot;&gt;æ·±ç§‹è«å¹²å±±éœ²è¥æŒ‡å—&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.mafengwo.cn/wenda/detail-12447088.html&quot;&gt; è«å¹²å±±å¯ä»¥éœ²è¥å—ï¼Ÿå“ªé‡Œéœ²è¥å‘¢ï¼Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å®‰å‰æ—¥å›å±±èµ‹çŸ³æ°´åº“&quot;&gt;å®‰å‰æ—¥å›å±±ï¼ˆèµ‹çŸ³æ°´åº“ï¼‰&lt;/h2&gt;

&lt;h3 id=&quot;åœ°ç‚¹-5&quot;&gt;åœ°ç‚¹&lt;/h3&gt;

&lt;p&gt;å®‰å‰æ—¥å›å±±ï¼ˆæ–°æ¡¥å¤´é™„è¿‘ï¼‰&lt;/p&gt;

&lt;p&gt;å’Œå°æ­å‘ç¦»å¾—å¾ˆè¿‘ï¼Œéƒ½æ˜¯åœ¨èµ‹çŸ³æ°´åº“çš„è¾¹ä¸Š&lt;/p&gt;

&lt;h2 id=&quot;æ¡åºæ–°å®‰å&quot;&gt;æ¡åºæ–°å®‰å&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/XHS_1587231676517569abe16-4eab-3a22-9559-40b6ba5cfcb9.jpg&quot; alt=&quot;XHS_1587231676517569abe16-4eab-3a22-9559-40b6ba5cfcb9&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;åœ°ç‚¹-6&quot;&gt;åœ°ç‚¹&lt;/h3&gt;

&lt;p&gt;æ¡åºæ–°å®‰åï¼ˆé—®ä¸‹å½“åœ°äººï¼Œåœ¨æœ€å±±é¡¶ä¸Šï¼‰&lt;/p&gt;

&lt;h2 id=&quot;æ¡åºæ¡æ´²å²›éœ²è¥åŸºåœ°&quot;&gt;æ¡åºæ¡æ´²å²›éœ²è¥åŸºåœ°&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/1812071056-wsw.jpg&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;åœ°ç‚¹-7&quot;&gt;åœ°ç‚¹&lt;/h3&gt;

&lt;p&gt;æ¡åºæ¡æ´²å²›äºšè”é£è¡ŒåŸºåœ°&lt;/p&gt;

&lt;h3 id=&quot;ç®€ä»‹-5&quot;&gt;ç®€ä»‹&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;æ¡æ´²å²›æ˜¯å¯Œæ˜¥æ±Ÿä¸Šçš„ä¸€ä¸ªæ±Ÿå¿ƒå°å²›ï¼Œè·ç¦»æ­å·çš„è½¦ç¨‹å·®ä¸å¤š40åˆ†é’Ÿå·¦å³å°±åˆ°äº†ï¼Œéå¸¸æ–¹ä¾¿&lt;/li&gt;
  &lt;li&gt;å²›çš„åŒ—è¾¹æ˜¯æ‘åº„ï¼Œå—è¾¹æœ‰ç‰‡æ ‘æ—ï¼Œå¤å¤©çš„æ—¶å€™å»è¿‡ä¸€æ¬¡ï¼Œé›¨åçš„æ ·å­è¶…çº§ç¾&lt;/li&gt;
  &lt;li&gt;é è¿‘æ±Ÿè¾¹æœ‰æ—¶è¿˜å¯ä»¥çœ‹åˆ°æ±Ÿä¸Šæœ‰æ¸”äººåœ¨æ‰“æ¸”ï¼Œæ±Ÿè¾¹è¿˜æœ‰å¾ˆå¤šå°æœ‹å‹æŒ½ç€è„šåœ¨æ‰¾èƒèŸ¹&lt;/li&gt;
  &lt;li&gt;äºšè”é£è¡ŒåŸºåœ°é‚£è¾¹æœ‰å—å¤§è‰åªï¼Œä½†æ˜¯å¥½åƒåªåœ¨ä¸‹åˆç»“æŸé£è¡Œä¹‹åæ‰å¯ä»¥åœ¨è‰åªä¸Šéœ²è¥ï¼Œå¹¶ä¸”éœ²è¥éœ€è¦æ”¶è´¹&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;åˆ†äº«-3&quot;&gt;åˆ†äº«&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.thetigerhood.com/north-and-south-camping-party/&quot;&gt;æ­å·é‡é¤ä¼š&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ä¸´å®‰è¥¿å¤©ç›®å±±éœ²è¥&quot;&gt;ä¸´å®‰è¥¿å¤©ç›®å±±éœ²è¥&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/XHS_158723258870258c6c0ba-b220-38e2-ad89-a180c31653e9.jpg&quot; alt=&quot;XHS_158723258870258c6c0ba-b220-38e2-ad89-a180c31653e9&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;åœ°ç‚¹-8&quot;&gt;åœ°ç‚¹&lt;/h3&gt;

&lt;p&gt;æ­å·å¾€è—»æºªæ–¹å‘ä¸‹é«˜é€Ÿå³è½¬ï¼Œå¾€äº¤å£å­˜æ–¹å‘ä¸€è‡´åˆ°è¥¿å¤©ç›®é£æ™¯åŒºå†…ï¼ˆæ™¯åŒºå¤§é—¨å£å¼€ä¸Šå±±ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/Screenshot_20200419_015605_com.autonavi.minimap.jpg&quot; alt=&quot;Screenshot_20200419_015605_com.autonavi.minimap&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ä»™å±…æ·¡ç«¹&quot;&gt;ä»™å±…æ·¡ç«¹&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/XHS_1587232999844174ec613-9e96-3ff2-880f-8f2e68731cec.jpg&quot; alt=&quot;XHS_1587232999844174ec613-9e96-3ff2-880f-8f2e68731cec&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;åœ°ç‚¹-9&quot;&gt;åœ°ç‚¹&lt;/h3&gt;

&lt;p&gt;ä»™å±…æ·¡ç«¹&lt;/p&gt;

&lt;h2 id=&quot;åƒå²›æ¹–&quot;&gt;åƒå²›æ¹–&lt;/h2&gt;

&lt;p&gt;å¾…å‘æ˜ä¸­ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è£…å¤‡&quot;&gt;è£…å¤‡&lt;/h2&gt;

&lt;ul class=&quot;task-list&quot;&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;å¸ç¯·&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;é˜²æ½®å«&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; /&gt;è„šè¸©æ°”å«æ‰“æ°”å™¨&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;æŸ¯å¯†ç‰¹æ¤…&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;æˆ·å¤–æŠ˜å æ¤…&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;è›‹å·æ¡Œ&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;ç‚‰å­&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;ä¸‰è„šæ¶&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;åŠé”…&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;èŒ¶å£¶&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;ç…é”…&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;çƒ§çƒ¤æ¶&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;æŠ˜å å‚¨ç‰©ç®±&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;æˆ·å¤–å°æ¨è½¦&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;æ±½ç¯&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;G2æ°”ç½&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;é©¬ç¯&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;LEDæ˜Ÿæ˜Ÿç¯&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; /&gt;å¸ç¯·ç¯&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; /&gt;æˆ·å¤–ç¯æ¶&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;å·¥å…·ç®±ï¼šé”¤å­ç­‰&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;å‚¨æ°´è¢‹&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;ç„šç«ç‚‰&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;ä¾¿æºè°ƒå‘³ç“¶å¥—è£…&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;æ‰‹å†²å’–å•¡æ¼æ–—&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;æ‰‹å†²å£¶&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; /&gt;ä¿æ¸©ç®±&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;é‡é¤å«&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;åŠåºŠ&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; checked=&quot;checked&quot; /&gt;é”¯å­&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; /&gt;é¤å…·&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; /&gt;ç¡è¢‹&lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; /&gt;æ’èŠ±ç“¶&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è£…å¤‡æ›´æ–°ä¸­ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&lt;/p&gt;
</description>
        <pubDate>Fri, 24 Apr 2020 07:00:32 +0800</pubDate>
        <link>http://localhost:4000/%E6%88%B7%E5%A4%96/2020/04/24/%E9%9C%B2%E8%90%A5%E6%8C%87%E5%8D%97.html</link>
        <guid isPermaLink="true">http://localhost:4000/%E6%88%B7%E5%A4%96/2020/04/24/%E9%9C%B2%E8%90%A5%E6%8C%87%E5%8D%97.html</guid>
        
        <category>æˆ·å¤–</category>
        
        <category>éœ²è¥</category>
        
        <category>camp</category>
        
        
        <category>æˆ·å¤–</category>
        
      </item>
    
      <item>
        <title>Kubernetes é›†ç¾¤æ­å»º</title>
        <description>&lt;h2 id=&quot;ç›®æ ‡&quot;&gt;ç›®æ ‡&lt;/h2&gt;
&lt;p&gt;é‡‡ç”¨ kubernetes.io å®˜æ–¹æ¨èçš„ kubeadm å·¥å…·å®‰è£… kubernetes é›†ç¾¤ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Dockerç‰ˆæœ¬ï¼š18.06.0-ce&lt;/li&gt;
  &lt;li&gt;Kubernetesç‰ˆæœ¬ï¼šv1.18.0&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;é›†ç¾¤è§„åˆ’&quot;&gt;é›†ç¾¤è§„åˆ’&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;è§’è‰²&lt;/th&gt;
      &lt;th&gt;ä¸»æœºå&lt;/th&gt;
      &lt;th&gt;IPåœ°å€&lt;/th&gt;
      &lt;th&gt;ç³»ç»Ÿ&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Master&lt;/td&gt;
      &lt;td&gt;flyflypeng-VirtualBox-k8s-master&lt;/td&gt;
      &lt;td&gt;192.168.5.154&lt;/td&gt;
      &lt;td&gt;Ubuntu 16.04.5 LTS (Xenial Xerus)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Woker&lt;/td&gt;
      &lt;td&gt;flyflypeng-desktop-k8s-worker&lt;/td&gt;
      &lt;td&gt;192.168.5.8&lt;/td&gt;
      &lt;td&gt;Ubuntu 18.04.1 LTS (Bionic Beaver)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;ç¯å¢ƒé…ç½®è‡ªæ£€&quot;&gt;ç¯å¢ƒé…ç½®è‡ªæ£€&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;ç¡¬ä»¶ç¯å¢ƒè¦æ±‚&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;One or more machines running Ubuntu 16.04+, CentOS 7 or HypriotOS v1.0.1+&lt;/li&gt;
      &lt;li&gt;1GB or more of RAM per machine (any less will leave little room for your apps)&lt;/li&gt;
      &lt;li&gt;Full network connectivity between all machines in the cluster (public or private network is fine)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;å…³é—­ç³»ç»Ÿä¸­çš„å†…å­˜ swap åŠŸèƒ½&lt;/strong&gt;&lt;/p&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  # æŸ¥çœ‹ç³»ç»Ÿæ˜¯å¦å¯ç”¨äº† swap
  cat /proc/swaps
  Filename				Type		Size	Used	Priority
  /dev/sda5                               partition	2095100	0	-1
    
  # ç¦ç”¨ swap åŠŸèƒ½
  swapoff -a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;å…³é—­é˜²ç«å¢™&lt;/strong&gt;&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  systemctl stop firewalld
  systemctl disable firewalld
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;å…³é—­selinux&lt;/strong&gt;&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  setenforce 0
  &lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;s/SELINUX=enforcing/SELINUX=disabled/g&quot;&lt;/span&gt; /etc/selinux/config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ä¿®æ”¹ /etc/sysctl.conf&lt;/strong&gt;&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;c&quot;&gt;# å¦‚æœæœ‰é…ç½®ï¼Œåˆ™ä¿®æ”¹&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;s#^net.ipv4.ip_forward.*#net.ipv4.ip_forward=1#g&quot;&lt;/span&gt;  /etc/sysctl.conf
  &lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;s#^net.bridge.bridge-nf-call-ip6tables.*#net.bridge.bridge-nf-call-ip6tables=1#g&quot;&lt;/span&gt;  /etc/sysctl.conf
  &lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;s#^net.bridge.bridge-nf-call-iptables.*#net.bridge.bridge-nf-call-iptables=1#g&quot;&lt;/span&gt;  /etc/sysctl.conf
  &lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;s#^net.ipv6.conf.all.disable_ipv6.*#net.ipv6.conf.all.disable_ipv6=1#g&quot;&lt;/span&gt;  /etc/sysctl.conf
  &lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;s#^net.ipv6.conf.default.disable_ipv6.*#net.ipv6.conf.default.disable_ipv6=1#g&quot;&lt;/span&gt;  /etc/sysctl.conf
  &lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;s#^net.ipv6.conf.lo.disable_ipv6.*#net.ipv6.conf.lo.disable_ipv6=1#g&quot;&lt;/span&gt;  /etc/sysctl.conf
  &lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;s#^net.ipv6.conf.all.forwarding.*#net.ipv6.conf.all.forwarding=1#g&quot;&lt;/span&gt;  /etc/sysctl.conf
  &lt;span class=&quot;c&quot;&gt;# å¯èƒ½æ²¡æœ‰ï¼Œè¿½åŠ &lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;net.ipv4.ip_forward = 1&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; /etc/sysctl.conf
  &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;net.bridge.bridge-nf-call-ip6tables = 1&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; /etc/sysctl.conf
  &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;net.bridge.bridge-nf-call-iptables = 1&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; /etc/sysctl.conf
  &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;net.ipv6.conf.all.disable_ipv6 = 1&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; /etc/sysctl.conf
  &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;net.ipv6.conf.default.disable_ipv6 = 1&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; /etc/sysctl.conf
  &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;net.ipv6.conf.lo.disable_ipv6 = 1&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; /etc/sysctl.conf
  &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;net.ipv6.conf.all.forwarding = 1&quot;&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; /etc/sysctl.conf
  &lt;span class=&quot;c&quot;&gt;# æ‰§è¡Œå‘½ä»¤ä»¥åº”ç”¨&lt;/span&gt;
  sysctl &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å®‰è£…dockerä»¥åŠkubeletkubeadmkubectl&quot;&gt;å®‰è£…dockerä»¥åŠkubelet,kubeadm,kubectl&lt;/h2&gt;

&lt;h3 id=&quot;dockerå®‰è£…&quot;&gt;dockerå®‰è£…&lt;/h3&gt;

&lt;p&gt;Dockerçš„å®‰è£…æ–¹æ³•è¯¦è§ç¬”è®°ï¼šã€ŠDocker å®‰è£…é…ç½®ã€‹&lt;/p&gt;

&lt;p&gt;docker ç‰ˆæœ¬ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@flyflypeng-desktop-k8s-worker:/home/flyflypeng/Code/scripts# docker version
Client:
 Version:           18.06.0-ce
 API version:       1.38
 Go version:        go1.10.3
 Git commit:        0ffa825
 Built:             Wed Jul 18 19:09:54 2018
 OS/Arch:           linux/amd64
 Experimental:      &lt;span class=&quot;nb&quot;&gt;false

&lt;/span&gt;Server:
 Engine:
  Version:          18.06.0-ce
  API version:      1.38 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;minimum version 1.12&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  Go version:       go1.10.3
  Git commit:       0ffa825
  Built:            Wed Jul 18 19:07:56 2018
  OS/Arch:          linux/amd64
  Experimental:     &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;kubeadm-kubelet-and-kubectlå®‰è£…&quot;&gt;kubeadm, kubelet and kubectlå®‰è£…&lt;/h3&gt;

&lt;p&gt;å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š&lt;a href=&quot;https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/&quot;&gt;å®‰è£… kubeadm&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# å®‰è£…kubeadm, kubelet and kubectl&lt;/span&gt;
apt-get update &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; apt-transport-https curl
curl &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; https://packages.cloud.google.com/apt/doc/apt-key.gpg | &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-key add -
&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt; | sudo tee /etc/apt/sources.list.d/kubernetes.list
deb https://apt.kubernetes.io/ kubernetes-xenial main
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF
&lt;/span&gt;apt-get update
apt-get &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; kubelet kubeadm kubectl
apt-mark hold kubelet kubeadm kubectl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;kubectlå‘½ä»¤è‡ªåŠ¨è¡¥å…¨è®¾ç½®&quot;&gt;kubectlå‘½ä»¤è‡ªåŠ¨è¡¥å…¨è®¾ç½®&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; /usr/share/bash-completion/bash_completion
&lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; &amp;lt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;kubectl completion bash&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;source &amp;lt;(kubectl completion bash)&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; ~/.bashrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;k8sé›†ç¾¤é…ç½®&quot;&gt;k8sé›†ç¾¤é…ç½®&lt;/h2&gt;

&lt;h3 id=&quot;è§£å†³k8sé•œåƒè¢«å¢™é—®é¢˜&quot;&gt;è§£å†³k8sé•œåƒè¢«å¢™é—®é¢˜&lt;/h3&gt;

&lt;p&gt;ç”±äºå®˜æ–¹é•œåƒåœ°å€è¢«å¢™ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é¦–å…ˆè·å–æ‰€éœ€é•œåƒä»¥åŠå®ƒä»¬çš„ç‰ˆæœ¬ã€‚ç„¶åä»å›½å†…é•œåƒç«™è·å–ã€‚&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kubeadm config images list
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è·å–é•œåƒåˆ—è¡¨åå¯ä»¥é€šè¿‡ä¸‹é¢çš„è„šæœ¬ä»dockerhubä¸Šè·å–é•œåƒå¹¶é‡å‘½åï¼š&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#!/bin/bash

images=(kube-apiserver:v1.18.0 \
	kube-controller-manager:v1.18.0 \
	kube-scheduler:v1.18.0 \
	kube-proxy:v1.18.0 \
	pause:3.2 \
	etcd:3.4.3-0 \
	coredns:1.6.7)

for imageName in ${images[@]} ; do
    docker pull aiotceo/$imageName
    docker tag aiotceo/$imageName k8s.gcr.io/$imageName
    docker rmi aiotceo/$imageName
done
)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸‹è½½ k8s æ‰€éœ€çš„å„ä¸ªç»„ä»¶çš„é•œåƒå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@flyflypeng-VirtualBox-k8s-master:/home/flyflypeng/Code/scripts# docker images
REPOSITORY                           TAG                 IMAGE ID            CREATED             SIZE
k8s.gcr.io/kube-proxy                v1.18.0             43940c34f24f        3 days ago          117MB
k8s.gcr.io/kube-controller-manager   v1.18.0             d3e55153f52f        3 days ago          162MB
k8s.gcr.io/kube-apiserver            v1.18.0             74060cea7f70        3 days ago          173MB
k8s.gcr.io/kube-scheduler            v1.18.0             a31f78c7c8ce        3 days ago          95.3MB
k8s.gcr.io/pause                     3.2                 80d28bedfe5d        6 weeks ago         683kB
k8s.gcr.io/coredns                   1.6.7               67da37a9a360        8 weeks ago         43.8MB
k8s.gcr.io/etcd                      3.4.3-0             303ce5db0e90        5 months ago        288MB
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;master-nodeé…ç½®&quot;&gt;Master Nodeé…ç½®&lt;/h3&gt;

&lt;h4 id=&quot;kubeadm-initåˆå§‹åŒ–ç¯å¢ƒ&quot;&gt;kubeadm initåˆå§‹åŒ–ç¯å¢ƒ&lt;/h4&gt;

&lt;p&gt;é€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kubeadm init&lt;/code&gt;å‘½ä»¤æ¥åˆå§‹åŒ–MasterèŠ‚ç‚¹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kubeadm init &lt;span class=&quot;nt&quot;&gt;--pod-network-cidr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;192.168.0.0/16 &lt;span class=&quot;nt&quot;&gt;--apiserver-advertise-address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;192.168.5.154
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨å®é™…çš„éƒ¨ç½²å½“ä¸­éœ€è¦å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--apiserver-advertise-address&lt;/code&gt; å‚æ•°åé¢çš„å€¼è®¾ç½®ä¸ºå½“å‰ä¸»æœºçš„ipåœ°å€ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--apiserver-advertise-address&lt;/code&gt;ï¼šAPI æœåŠ¡å™¨æ‰€å…¬å¸ƒçš„å…¶æ­£åœ¨ç›‘å¬çš„ IP åœ°å€ã€‚å¦‚æœæœªè®¾ç½®ï¼Œåˆ™ä½¿ç”¨é»˜è®¤ç½‘ç»œæ¥å£ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--pod-network-cidr&lt;/code&gt;ï¼šæŒ‡æ˜ pod ç½‘ç»œå¯ä»¥ä½¿ç”¨çš„ IP åœ°å€æ®µã€‚å¦‚æœè®¾ç½®äº†è¿™ä¸ªå‚æ•°ï¼Œæ§åˆ¶å¹³é¢å°†ä¼šä¸ºæ¯ä¸€ä¸ªèŠ‚ç‚¹è‡ªåŠ¨åˆ†é… CIDRsã€‚å¦‚æœè¦é…ç½®calicoç½‘ç»œæ’ä»¶ï¼Œè¿™ä¸ªå€¼ä¸€å®šè¦è®¾ç½®ä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.0.0/16&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åˆå§‹åŒ–æˆåŠŸä¹‹åçš„è¾“å‡ºä¿¡æ¯å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@flyflypeng-VirtualBox-k8s-master:/home/flyflypeng/Code/scripts# kubeadm init --pod-network-cidr=10.244.0.0/16 --apiserver-advertise-address=192.168.5.154
W0329 02:35:23.887370   13950 configset.go:202] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]
[init] Using Kubernetes version: v1.18.0
[preflight] Running pre-flight checks
	[WARNING IsDockerSystemdCheck]: detected &quot;cgroupfs&quot; as the Docker cgroup driver. The recommended driver is &quot;systemd&quot;. Please follow the guide at https://kubernetes.io/docs/setup/cri/
[preflight] Pulling images required for setting up a Kubernetes cluster
[preflight] This might take a minute or two, depending on the speed of your internet connection
[preflight] You can also perform this action in beforehand using &apos;kubeadm config images pull&apos;
[kubelet-start] Writing kubelet environment file with flags to file &quot;/var/lib/kubelet/kubeadm-flags.env&quot;
[kubelet-start] Writing kubelet configuration to file &quot;/var/lib/kubelet/config.yaml&quot;
[kubelet-start] Starting the kubelet
[certs] Using certificateDir folder &quot;/etc/kubernetes/pki&quot;
[certs] Generating &quot;ca&quot; certificate and key
[certs] Generating &quot;apiserver&quot; certificate and key
[certs] apiserver serving cert is signed for DNS names [flyflypeng-virtualbox-k8s-master kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.5.154]
[certs] Generating &quot;apiserver-kubelet-client&quot; certificate and key
[certs] Generating &quot;front-proxy-ca&quot; certificate and key
[certs] Generating &quot;front-proxy-client&quot; certificate and key
[certs] Generating &quot;etcd/ca&quot; certificate and key
[certs] Generating &quot;etcd/server&quot; certificate and key
[certs] etcd/server serving cert is signed for DNS names [flyflypeng-virtualbox-k8s-master localhost] and IPs [192.168.5.154 127.0.0.1 ::1]
[certs] Generating &quot;etcd/peer&quot; certificate and key
[certs] etcd/peer serving cert is signed for DNS names [flyflypeng-virtualbox-k8s-master localhost] and IPs [192.168.5.154 127.0.0.1 ::1]
[certs] Generating &quot;etcd/healthcheck-client&quot; certificate and key
[certs] Generating &quot;apiserver-etcd-client&quot; certificate and key
[certs] Generating &quot;sa&quot; key and public key
[kubeconfig] Using kubeconfig folder &quot;/etc/kubernetes&quot;
[kubeconfig] Writing &quot;admin.conf&quot; kubeconfig file
[kubeconfig] Writing &quot;kubelet.conf&quot; kubeconfig file
[kubeconfig] Writing &quot;controller-manager.conf&quot; kubeconfig file
[kubeconfig] Writing &quot;scheduler.conf&quot; kubeconfig file
[control-plane] Using manifest folder &quot;/etc/kubernetes/manifests&quot;
[control-plane] Creating static Pod manifest for &quot;kube-apiserver&quot;
[control-plane] Creating static Pod manifest for &quot;kube-controller-manager&quot;
W0329 02:35:28.725001   13950 manifests.go:225] the default kube-apiserver authorization-mode is &quot;Node,RBAC&quot;; using &quot;Node,RBAC&quot;
[control-plane] Creating static Pod manifest for &quot;kube-scheduler&quot;
W0329 02:35:28.726217   13950 manifests.go:225] the default kube-apiserver authorization-mode is &quot;Node,RBAC&quot;; using &quot;Node,RBAC&quot;
[etcd] Creating static Pod manifest for local etcd in &quot;/etc/kubernetes/manifests&quot;
[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory &quot;/etc/kubernetes/manifests&quot;. This can take up to 4m0s
[apiclient] All control plane components are healthy after 28.508549 seconds
[upload-config] Storing the configuration used in ConfigMap &quot;kubeadm-config&quot; in the &quot;kube-system&quot; Namespace
[kubelet] Creating a ConfigMap &quot;kubelet-config-1.18&quot; in namespace kube-system with the configuration for the kubelets in the cluster
[upload-certs] Skipping phase. Please see --upload-certs
[mark-control-plane] Marking the node flyflypeng-virtualbox-k8s-master as control-plane by adding the label &quot;node-role.kubernetes.io/master=&apos;&apos;&quot;
[mark-control-plane] Marking the node flyflypeng-virtualbox-k8s-master as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule]
[bootstrap-token] Using token: l09phn.zkiuy0ipc2yp6syq
[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles
[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to get nodes
[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials
[bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
[bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster
[bootstrap-token] Creating the &quot;cluster-info&quot; ConfigMap in the &quot;kube-public&quot; namespace
[kubelet-finalize] Updating &quot;/etc/kubernetes/kubelet.conf&quot; to point to a rotatable kubelet client certificate and key
[addons] Applied essential addon: CoreDNS
[addons] Applied essential addon: kube-proxy

Your Kubernetes control-plane has initialized successfully!

To start using your cluster, you need to run the following as a regular user:

  mkdir -p $HOME/.kube
  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  sudo chown $(id -u):$(id -g) $HOME/.kube/config

You should now deploy a pod network to the cluster.
Run &quot;kubectl apply -f [podnetwork].yaml&quot; with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

Then you can join any number of worker nodes by running the following on each as root:

kubeadm join 192.168.5.154:6443 --token l09phn.zkiuy0ipc2yp6syq \
    --discovery-token-ca-cert-hash sha256:46aba676954319993945204e35e63ad7659475921820f2ca5b430c1f75e2cd7d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;é…ç½®æˆæƒä¿¡æ¯&quot;&gt;é…ç½®æˆæƒä¿¡æ¯&lt;/h4&gt;

&lt;p&gt;æ‰€éœ€çš„å‘½ä»¤åœ¨initæˆåŠŸåä¹Ÿä¼šæœ‰æç¤ºï¼Œä¸»è¦æ˜¯ä¸ºäº†ä¿å­˜ç›¸å…³çš„é…ç½®ä¿¡æ¯åœ¨ç”¨æˆ·ç›®å½•ä¸‹ï¼Œè¿™æ ·ä¸ç”¨æ¯æ¬¡éƒ½è¾“å…¥ç›¸å…³çš„è®¤è¯ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; mkdir -p $HOME/.kube
cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
chown $(id -u):$(id -g) $HOME/.kube/config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;é…ç½®ç½‘ç»œæ’ä»¶&quot;&gt;é…ç½®ç½‘ç»œæ’ä»¶&lt;/h3&gt;

&lt;p&gt;åœ¨éƒ¨ç½²å…·ä½“çš„åº”ç”¨ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦æŒ‰ç…§å¥½é›†ç¾¤ä¸­çš„ Pod ç½‘ç»œæ’ä»¶ï¼Œè€Œ Pod ç½‘ç»œæ’ä»¶çš„ä¸»è¦ä½œç”¨å°±æ˜¯æä¾›ä¸€ä¸ª Pod ä¹‹é—´å¯ä»¥é€šä¿¡çš„è™šæ‹Ÿç½‘ç»œå±‚ã€‚å…¶ä¸­ Pod ç½‘ç»œæ’ä»¶æœ‰å¤šç§é€‰æ‹©ï¼Œè¿™é‡Œé€‰ç”¨ Calico ä½œä¸ºä¾‹å­ã€‚&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kubectl apply &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; https://docs.projectcalico.org/v3.11/manifests/calico.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç¡®è®¤calicoç½‘ç»œæ’ä»¶æ˜¯å¦é…ç½®å¥½ï¼Œåªè¦å»æ£€æŸ¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CoreDNS Pod&lt;/code&gt;æ˜¯å¦å¤„äºRunningçŠ¶æ€ï¼Œæ£€æŸ¥çš„æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@flyflypeng-VirtualBox-k8s-master:/home/flyflypeng/k8s# kubectl get pods &lt;span class=&quot;nt&quot;&gt;--all-namespaces&lt;/span&gt;
NAMESPACE     NAME                                                       READY   STATUS    RESTARTS   AGE
kube-system   calico-kube-controllers-5b8b769fcd-xxftq                   1/1     Running   1          11m
kube-system   calico-node-tkswj                                          1/1     Running   0          11m
kube-system   coredns-66bff467f8-cpxnv                                   1/1     Running   0          4m5s
kube-system   coredns-66bff467f8-p759z                                   1/1     Running   0          4m6s
kube-system   etcd-flyflypeng-virtualbox-k8s-master                      1/1     Running   1          9h
kube-system   kube-apiserver-flyflypeng-virtualbox-k8s-master            1/1     Running   1          9h
kube-system   kube-controller-manager-flyflypeng-virtualbox-k8s-master   1/1     Running   4          9h
kube-system   kube-proxy-tb9z4                                           1/1     Running   1          9h
kube-system   kube-scheduler-flyflypeng-virtualbox-k8s-master            1/1     Running   5          9h
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è§£å†³coreDNSå®¹å™¨æ— æ³•å¯åŠ¨é—®é¢˜çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/53075796/coredns-pods-have-crashloopbackoff-or-error-state&quot;&gt;coredns pods have CrashLoopBackOff or Error state
&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.csdn.net/u011663005/article/details/87937800&quot;&gt;æ­å»ºKubernetesé›†ç¾¤è¸©å‘æ—¥å¿—ä¹‹coreDNS ç»„ä»¶å‡ºç°CrashLoopBackOffé—®é¢˜çš„è§£å†³&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;è°ƒæ•´-master-node-æ‰§è¡Œ-pod-çš„ç­–ç•¥å¯é€‰&quot;&gt;è°ƒæ•´ Master Node æ‰§è¡Œ Pod çš„ç­–ç•¥ï¼ˆå¯é€‰ï¼‰&lt;/h3&gt;

&lt;p&gt;æˆ‘åœ¨å‰é¢æåˆ°è¿‡ï¼Œé»˜è®¤æƒ…å†µä¸‹ Master èŠ‚ç‚¹æ˜¯ä¸å…è®¸è¿è¡Œç”¨æˆ· Pod çš„ã€‚è€Œ Kubernetes åšåˆ°è¿™ä¸€ç‚¹ï¼Œä¾é çš„æ˜¯ Kubernetes çš„ Taint/Toleration æœºåˆ¶ã€‚&lt;/p&gt;

&lt;p&gt;å®ƒçš„åŸç†éå¸¸ç®€å•ï¼šä¸€æ—¦æŸä¸ªèŠ‚ç‚¹è¢«åŠ ä¸Šäº†ä¸€ä¸ª Taintï¼Œå³è¢«â€œæ‰“ä¸Šäº†æ±¡ç‚¹â€ï¼Œé‚£ä¹ˆæ‰€æœ‰ Pod å°±éƒ½ä¸èƒ½åœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œå› ä¸º Kubernetes çš„ Pod éƒ½æœ‰â€œæ´ç™–â€ã€‚
é™¤éï¼Œæœ‰ä¸ªåˆ«çš„ Pod å£°æ˜è‡ªå·±èƒ½â€œå®¹å¿â€è¿™ä¸ªâ€œæ±¡ç‚¹â€ï¼Œå³å£°æ˜äº† Tolerationï¼Œå®ƒæ‰å¯ä»¥åœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œã€‚&lt;/p&gt;

&lt;p&gt;å…¶ä¸­ï¼Œä¸ºèŠ‚ç‚¹æ‰“ä¸Šâ€œæ±¡ç‚¹â€ï¼ˆTaintï¼‰çš„å‘½ä»¤æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;kubectl taint nodes &lt;span class=&quot;nt&quot;&gt;--all&lt;/span&gt; node-role.kubernetes.io/master-
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æˆ‘è¿™é‡Œå°±ä¸åœ¨MasterèŠ‚ç‚¹ä¸Šéƒ¨ç½²ç”¨æˆ·çš„ä¸šåŠ¡å®¹å™¨äº†ï¼Œæ‰€æœ‰çš„å®¹å™¨éƒ½éƒ¨ç½²åœ¨WorkerèŠ‚ç‚¹ä¸Šã€‚&lt;/p&gt;

&lt;h3 id=&quot;workerèŠ‚ç‚¹é…ç½®&quot;&gt;WorkerèŠ‚ç‚¹é…ç½®&lt;/h3&gt;

&lt;h4 id=&quot;è·å¾—-joinå‘½ä»¤å‚æ•°&quot;&gt;è·å¾— joinå‘½ä»¤å‚æ•°&lt;/h4&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# åœ¨ master èŠ‚ç‚¹ä¸Šæ‰§è¡Œ&lt;/span&gt;
root@flyflypeng-VirtualBox-k8s-master:/home/flyflypeng/k8s# kubeadm token create &lt;span class=&quot;nt&quot;&gt;--print-join-command&lt;/span&gt;
W0329 12:09:29.488896   20698 configset.go:202] WARNING: kubeadm cannot validate component configs &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;API &lt;span class=&quot;nb&quot;&gt;groups&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;kubelet.config.k8s.io kubeproxy.config.k8s.io]
kubeadm &lt;span class=&quot;nb&quot;&gt;join &lt;/span&gt;192.168.5.154:6443 &lt;span class=&quot;nt&quot;&gt;--token&lt;/span&gt; 1xkojk.uuxo8th0njy75d2g     &lt;span class=&quot;nt&quot;&gt;--discovery-token-ca-cert-hash&lt;/span&gt; sha256:cf93dfbf1a653dd82e61220c567a70c1ed725396e740277c29fb49eb966a9677
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;å‡†å¤‡workerä¸Šçš„é•œåƒ&quot;&gt;å‡†å¤‡workerä¸Šçš„é•œåƒ&lt;/h4&gt;

&lt;p&gt;é¦–å…ˆworkerèŠ‚ç‚¹ä¸Šä¹Ÿè¦ä¸‹è½½k8sç›¸å…³çš„é•œåƒï¼Œworkerä¸Šå¿…å¤‡é•œåƒåˆ—è¡¨ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@flyflypeng-desktop-k8s-worker:/home/flyflypeng/k8s# docker images
REPOSITORY                  TAG                 IMAGE ID            CREATED             SIZE
k8s.gcr.io/kube-proxy       v1.18.0             43940c34f24f        3 days ago          117MB
k8s.gcr.io/pause            3.2                 80d28bedfe5d        6 weeks ago         683kB
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;åˆå§‹åŒ–workerèŠ‚ç‚¹&quot;&gt;åˆå§‹åŒ–WorkerèŠ‚ç‚¹&lt;/h4&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@flyflypeng-desktop-k8s-worker:/home/flyflypeng# kubeadm &lt;span class=&quot;nb&quot;&gt;join &lt;/span&gt;192.168.5.154:6443 &lt;span class=&quot;nt&quot;&gt;--token&lt;/span&gt; 1xkojk.uuxo8th0njy75d2g     &lt;span class=&quot;nt&quot;&gt;--discovery-token-ca-cert-hash&lt;/span&gt; sha256:cf93dfbf1a653dd82e61220c567a70c1ed725396e740277c29fb49eb966a9677

root@flyflypeng-desktop-k8s-worker:/home/flyflypeng# kubeadm &lt;span class=&quot;nb&quot;&gt;join &lt;/span&gt;192.168.5.154:6443 &lt;span class=&quot;nt&quot;&gt;--token&lt;/span&gt; 1xkojk.uuxo8th0njy75d2g     &lt;span class=&quot;nt&quot;&gt;--discovery-token-ca-cert-hash&lt;/span&gt; sha256:cf93dfbf1a653dd82e61220c567a70c1ed725396e740277c29fb49eb966a9677
W0329 12:10:42.264742     655 join.go:346] &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;preflight] WARNING: JoinControlPane.controlPlane settings will be ignored when control-plane flag is not set.
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;preflight] Running pre-flight checks
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;preflight] Reading configuration from the cluster...
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;preflight] FYI: You can look at this config file with &lt;span class=&quot;s1&quot;&gt;&apos;kubectl -n kube-system get cm kubeadm-config -oyaml&apos;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;kubelet-start] Downloading configuration &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;the kubelet from the &lt;span class=&quot;s2&quot;&gt;&quot;kubelet-config-1.18&quot;&lt;/span&gt; ConfigMap &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;the kube-system namespace
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;kubelet-start] Writing kubelet configuration to file &lt;span class=&quot;s2&quot;&gt;&quot;/var/lib/kubelet/config.yaml&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;kubelet-start] Writing kubelet environment file with flags to file &lt;span class=&quot;s2&quot;&gt;&quot;/var/lib/kubelet/kubeadm-flags.env&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;kubelet-start] Starting the kubelet
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;kubelet-start] Waiting &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;the kubelet to perform the TLS Bootstrap...

This node has joined the cluster:
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; Certificate signing request was sent to apiserver and a response was received.
&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; The Kubelet was informed of the new secure connection details.

Run &lt;span class=&quot;s1&quot;&gt;&apos;kubectl get nodes&apos;&lt;/span&gt; on the control-plane to see this node &lt;span class=&quot;nb&quot;&gt;join &lt;/span&gt;the cluster.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æœ€åæˆ‘ä»¬åœ¨MasterèŠ‚ç‚¹ä¸Šè¿è¡Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kubectl get nodes&lt;/code&gt;æŸ¥çœ‹WorkerèŠ‚ç‚¹æ˜¯å¦å·²ç»åŠ å…¥äº†ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@flyflypeng-VirtualBox-k8s-master:/home/flyflypeng/k8s# kubectl get nodes &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; wide
NAME                               STATUS   ROLES    AGE   VERSION   INTERNAL-IP     EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION      CONTAINER-RUNTIME
flyflypeng-desktop-k8s-worker      Ready    &amp;lt;none&amp;gt;   11m   v1.18.0   192.168.5.8     &amp;lt;none&amp;gt;        Ubuntu 18.04.1 LTS   4.15.0-88-generic   docker://18.6.0
flyflypeng-virtualbox-k8s-master   Ready    master   9h    v1.18.0   192.168.5.154   &amp;lt;none&amp;gt;        Ubuntu 16.04.5 LTS   4.15.0-36-generic   docker://18.6.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šå¦‚æœåŸæ¥å·²ç»åŠ å…¥ Cluster çš„ Node é‡å¯ä¹‹åï¼Œéœ€è¦é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kubeadm reset&lt;/code&gt; é‡ç½®å½“å‰ Node çš„ç¯å¢ƒï¼Œç„¶åé‡æ–°ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kubeadm join&lt;/code&gt; æ¥å°†å½“å‰ Node åŠ å…¥åˆ° Master Node ç®¡ç†ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;éƒ¨ç½²å…¶ä»–æ’ä»¶&quot;&gt;éƒ¨ç½²å…¶ä»–æ’ä»¶&lt;/h3&gt;

&lt;p&gt;ç”±äºå¾ˆå¤šå®˜æ–¹çš„æ’ä»¶æ‰€éœ€é•œåƒä¹Ÿåœ¨ http://gcr.io ä¸Šï¼Œæ‰€ä»¥é‡åˆ°è¿™ç§æƒ…å†µï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼è·å–ï¼š&lt;a href=&quot;https://zhuanlan.zhihu.com/p/46341911&quot;&gt;kuberneteså®‰è£…ï¼ˆå›½å†…ç¯å¢ƒï¼‰&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å°†yamlæ–‡ä»¶ä¸­é•œåƒåœ°å€çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;k8s.gcr.io&lt;/code&gt;æ›¿æ¢æˆ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;registry.cn-hangzhou.aliyuncs.com/google_containers&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;åœ¨å…¶ä»–æœºå™¨ä¸Šè®¿é—®é›†ç¾¤&quot;&gt;åœ¨å…¶ä»–æœºå™¨ä¸Šè®¿é—®é›†ç¾¤&lt;/h3&gt;

&lt;p&gt;å¦‚æœä½ æƒ³é€šè¿‡ä½ çš„Macæ¥è®¿é—®ä½ æ­å»ºçš„é›†ç¾¤ï¼Œä½ å¯ä»¥å°†é›†ç¾¤çš„administratorçš„é…ç½®æ–‡ä»¶æ‹·è´åˆ°çš„ä½ çš„Macä¸Šï¼Œç”¨æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;scp root@&amp;lt;control-plane-host&amp;gt;:/etc/kubernetes/admin.conf &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
kubectl &lt;span class=&quot;nt&quot;&gt;--kubeconfig&lt;/span&gt; ./admin.conf get nodes
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸ºäº†é¿å…æ¯æ¬¡éƒ½æ•²kubectlå‘½ä»¤æ—¶éƒ½åŠ ä¸Šé…ç½®é€‰é¡¹&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--kubeconfig&lt;/code&gt;ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°åœ¨shellé…ç½®ç¯å¢ƒä¸­çš„åŠ ä¸ª&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;alias&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# kubectl --kubeconfig alias&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;alias &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;kubectl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;kubectl --kubeconfig /Users/woshijpf/k8s/admin.conf&apos;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;æ¸…ç†é›†ç¾¤&quot;&gt;æ¸…ç†é›†ç¾¤&lt;/h3&gt;

&lt;p&gt;æˆ‘ç°åœ¨è¿˜æ²¡è¿™ä¹ˆå¹²è¿‡ï¼Œä½†æ˜¯è®°å½•ä¸€ä¸‹æ¸…ç†çš„æ–¹æ³•ï¼Œä¸‡ä¸€å“ªå¤©å°±ç”¨åˆ°äº†å‘¢ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/#tear-down&quot;&gt;k8s Clean up&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;ä½¿ç”¨k8séƒ¨ç½²webåº”ç”¨&quot;&gt;ä½¿ç”¨k8séƒ¨ç½²Webåº”ç”¨&lt;/h2&gt;

&lt;p&gt;åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æŠŠk8sé›†ç¾¤æ­å»ºå®Œäº†ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥éƒ¨ç½²ä¸€ä¸ªNodeåº”ç”¨æ¥éªŒè¯æˆ‘ä»¬æ­å»ºçš„k8sé›†ç¾¤æ˜¯å¦å¯ä»¥æ­£å¸¸å·¥ä½œã€‚&lt;/p&gt;

&lt;p&gt;è¿™éƒ¨åˆ†æˆ‘ä»ç½‘ç«™ä¸Šæ‰¾äº†ä¸€ä¸ªä¾‹å­ï¼Œéƒ¨ç½²ä¸€ä¸ªå¾…åŠäº‹é¡¹çš„Web Appï¼Œå¤§å®¶ç›´æ¥å‚è€ƒè¿™ç¯‡æ–‡ç« å§ï¼š&lt;a href=&quot;https://zhuanlan.zhihu.com/p/39680577&quot;&gt;å…¥é—¨ç³»åˆ—ä¹‹Kuberneteséƒ¨ç½²&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;éƒ¨ç½²å®Œæˆä¹‹åï¼ŒæŸ¥çœ‹Web AppæœåŠ¡åœ¨WorkerèŠ‚ç‚¹æš´éœ²å‡ºæ¥çš„ç«¯å£å·ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;kubectl get services                                                                                                                                  
NAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;S&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;          AGE
db           ClusterIP   10.106.46.173   &amp;lt;none&amp;gt;        27017/TCP        50m
kubernetes   ClusterIP   10.96.0.1       &amp;lt;none&amp;gt;        443/TCP          20h
web          NodePort    10.101.158.14   &amp;lt;none&amp;gt;        3000:32678/TCP   36m
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é€šè¿‡æµè§ˆå™¨è®¿é—®WorkerèŠ‚ç‚¹ä¸Š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://192.168.5.8:32678&lt;/code&gt;åœ°å€ï¼š
&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/container-web-app.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æ˜¯æˆ‘kubenetes v1.18.0ç‰ˆæœ¬ä¸ŠéªŒè¯è¿‡çš„yamlæ–‡ä»¶ï¼š&lt;/p&gt;

&lt;p&gt;db-pod.yaml&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;v1&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Pod&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;db&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mongo&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;containers&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mongo&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mongo&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mongo&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;containerPort&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;27017&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;volumeMounts&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mongo-storage&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;mountPath&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/data/db&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;volumes&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mongo-storage&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;hostPath&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
              &lt;span class=&quot;na&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/data/db&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;db-service.yaml&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;v1&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Service&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;db&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mongo&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;todoapp&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mongo&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ClusterIP&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;db&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;27017&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;targetPort&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;27017&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;web-pod.yaml&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;v1&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Pod&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;web&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;web&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;todoapp&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;containers&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;sammy/todo&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;imagePullPolicy&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;IfNotPresent&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;myweb&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;containerPort&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3000&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;web-service.yaml&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;v1&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Service&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;web&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;web&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;todoapp&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;web&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;NodePort&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
   &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;http&lt;/span&gt;
     &lt;span class=&quot;na&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3000&lt;/span&gt;
     &lt;span class=&quot;na&quot;&gt;targetPort&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3000&lt;/span&gt;
     &lt;span class=&quot;na&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;TCP&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;web-rs.yaml&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;apps/v1&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ReplicaSet&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;web&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;web&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;todoapp&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;replicas&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;matchLabels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;todoapp&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;web&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;todoapp&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;containers&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;web&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;imagePullPolicy&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;IfNotPresent&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;sammy/todo&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;containerPort&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3000&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;å¦‚æœä¸æƒ³å°†é•œåƒä¸Šä¼ åˆ°dockerhubä¸Šï¼Œç›´æ¥åœ¨workerèŠ‚ç‚¹ä¸Šä½¿ç”¨ç¼–è¯‘å‡ºæ¥çš„é•œåƒï¼Œåˆ™éœ€è¦åœ¨éƒ¨ç½²web appçš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;web-pod.yaml&lt;/code&gt;æ–‡ä»¶ä¸­æ·»åŠ ä¸Šé•œåƒæ‹‰å»çš„ç­–ç•¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;imagePullPolicy: IfNotPresent&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;å‰¯æœ¬é›†(ReplicaSet)çš„æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œè¦å°†yamlæ–‡ä»¶ä¸­çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apiVersion&lt;/code&gt;çš„å€¼ä»&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;extensions/v1beta1&lt;/code&gt;æ›¿æ¢æˆ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apps/v1&lt;/code&gt;ï¼Œå› ä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;extensions/v1beta1&lt;/code&gt;å·²ç»è¢«å¼ƒç”¨äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;faq&quot;&gt;FAQ&lt;/h2&gt;

&lt;h3 id=&quot;k8sé•œåƒæ‹‰å–ç­–ç•¥é…ç½®&quot;&gt;k8sé•œåƒæ‹‰å–ç­–ç•¥é…ç½®&lt;/h3&gt;

&lt;p&gt;k8sçš„éƒ¨ç½²é…ç½®æ–‡ä»¶ä¸­ç»å¸¸çœ‹åˆ°æœ‰imagePullPolicyå±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯æè¿°é•œåƒçš„æ‹‰å–ç­–ç•¥ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Always æ€»æ˜¯æ‹‰å–é•œåƒ&lt;/li&gt;
  &lt;li&gt;IfNotPresent æœ¬åœ°æœ‰åˆ™ä½¿ç”¨æœ¬åœ°é•œåƒ,ä¸æ‹‰å–&lt;/li&gt;
  &lt;li&gt;Never åªä½¿ç”¨æœ¬åœ°é•œåƒï¼Œä»ä¸æ‹‰å–ï¼Œå³ä½¿æœ¬åœ°æ²¡æœ‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¦‚æœçœç•¥imagePullPolicyï¼Œé•œåƒtagä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:latest&lt;/code&gt;ï¼Œç­–ç•¥ä¸ºalwaysã€‚&lt;/p&gt;

&lt;h2 id=&quot;å‚è€ƒæ–‡ç« &quot;&gt;å‚è€ƒæ–‡ç« &lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://kuboard.cn/install/install-k8s.html#%E6%96%87%E6%A1%A3%E7%89%B9%E7%82%B9&quot;&gt;ä½¿ç”¨kubeadmå®‰è£…kubernetes_v1.17.x&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/zh/docs/reference/setup-tools/kubeadm/kubeadm-init/&quot;&gt;kubeadm init&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Sun, 29 Mar 2020 04:00:31 +0800</pubDate>
        <link>http://localhost:4000/%E4%BA%91%E5%8E%9F%E7%94%9F/2020/03/29/Kubernetes%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html</link>
        <guid isPermaLink="true">http://localhost:4000/%E4%BA%91%E5%8E%9F%E7%94%9F/2020/03/29/Kubernetes%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html</guid>
        
        <category>kubernetes</category>
        
        <category>k8s</category>
        
        <category>cloudnative</category>
        
        
        <category>äº‘åŸç”Ÿ</category>
        
      </item>
    
      <item>
        <title>Mac å¼€å‘ç¯å¢ƒé…ç½®</title>
        <description>&lt;h2 id=&quot;typora&quot;&gt;Typora&lt;/h2&gt;

&lt;p&gt;æˆ‘å…ˆæ”¾å¼ æˆ‘åœ¨Macä¸­æˆ‘ç”¨Typoraå†™è¿™ç¯‡æ–‡ç« æ—¶çš„ç•Œé¢å§ï¼Œä½ ä»¬è¯´é¦™ä¸é¦™å§ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/image-20200411000439442.png&quot; alt=&quot;image-20200411000439442&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Typoraç»å¯¹æ˜¯æˆ‘è¿™å‡ å¹´ä¸­é‡åˆ°çš„æœ€å¥½ç”¨ï¼Œæœ€å¥½çœ‹ï¼Œæœ€å–œæ¬¢çš„ä¸€æ¬¾è½¯ä»¶ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚&lt;/p&gt;

&lt;p&gt;è™½ç„¶Typoraè¿˜æ²¡æœ‰å‘å¸ƒæ­£å¼çš„releaseç‰ˆæœ¬ï¼Œä½†æ˜¯ç°åœ¨å®ƒä¸€ç›´åœ¨ä¸æ–­è¿­ä»£æ›´æ–°ï¼Œä¿®å¤ä¸€äº›é—®é¢˜å’Œè¡¥é½åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;è‡ªä»6å¹´å‰å…¥äº†Markdownçš„å‘ï¼Œæˆ‘çš„ç¬”è®°æ–‡æ¡£ï¼Œåšå®¢æ–‡ç« åŸºæœ¬éƒ½æ˜¯ç”¨Markdownå†™çš„ï¼ŒæœŸé—´ä¹Ÿæ˜¯å°è¯•è¿‡å„ç§Markdownè½¯ä»¶ï¼Œç©è¿‡åœ¨çº¿ç½‘é¡µç‰ˆçš„Cmd Markdownï¼Œä¹Ÿä½¿ç”¨è¿‡å¥—äº†ä¸€å±‚Electronçš„èš‚èšç¬”è®°ï¼Œå°è±¡ç¬”è®°ä¸­æœ€æ–°å†…ç½®çš„Markdownç¼–è¾‘å™¨æˆ‘ä¹Ÿä½“éªŒè¿‡ï¼Œä½†å°±æ˜¯è§‰å¾—ä»–ä»¬è¦ä¹ˆåœ¨çº¿å†™ç¬”è®°ä¸æ–¹ä¾¿ï¼Œè¦ä¹ˆå°±æ˜¯æ¸²æŸ“å‡ºæ¥çš„æ ·å¼å¾ˆä¸‘ï¼Œè¦ä¹ˆå°±æ˜¯ç¬”è®°åŒæ­¥åŠŸèƒ½è¦æ”¶è´¹ã€‚ç›´åˆ°é‡åˆ°äº†Typoraï¼Œæˆ‘ç»ˆäºæ‰¾åˆ°äº†æœ€é’Ÿæ„çš„Markdownè½¯ä»¶ï¼Œæ»¡è¶³äº†æˆ‘æŒ‘å‰”çš„è¦æ±‚ï¼Œæˆ‘ä¹Ÿæ˜¯å„ç§å®‰åˆ©æ¨èç»™æˆ‘èº«è¾¹çš„æœ‹å‹å’ŒåŒäº‹ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ç®€æ´ç¾è§‚&lt;/li&gt;
  &lt;li&gt;æ‰€è§å³æ‰€å¾—æ¨¡å¼&lt;/li&gt;
  &lt;li&gt;æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜ï¼Œä¹Ÿå¯ä»ä¸»é¢˜å•†åº—ä¸‹è½½å–œæ¬¢çš„ä¸»é¢˜&lt;/li&gt;
  &lt;li&gt;å¯Œæ–‡æœ¬è‡ªåŠ¨è½¬æ¢æˆMarkdownæ ¼å¼åŠŸèƒ½&lt;/li&gt;
  &lt;li&gt;æœç´¢é«˜äº®åŠŸèƒ½&lt;/li&gt;
  &lt;li&gt;ç›®å½•å±‚çº§ç®¡ç†åŠŸèƒ½&lt;/li&gt;
  &lt;li&gt;å¤§çº²æ˜¾ç¤ºåŠŸèƒ½&lt;/li&gt;
  &lt;li&gt;å›¾åºŠåŠŸèƒ½ï¼Œæ”¯æŒå¸¸ç”¨å›¾åºŠå’Œè‡ªå®šä¹‰å›¾åºŠé…ç½®&lt;/li&gt;
&lt;/ul&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;mac-ä¿®æ”¹è®¾ç½®ç¯å¢ƒå˜é‡&quot;&gt;Mac ä¿®æ”¹è®¾ç½®ç¯å¢ƒå˜é‡&lt;/h2&gt;
&lt;p&gt;Mac ä¸­ä¿®æ”¹ç¯å¢ƒå˜é‡çš„æ–¹æ³•å’Œ Linux ä¸­ä¿®æ”¹ç¯å¢ƒå˜é‡çš„æ–¹æ³•ç±»ä¼¼ï¼Œå¯ä»¥ä¿®æ”¹çš„æ–‡ä»¶ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.bash_profile&lt;/code&gt;ï¼šä¸€èˆ¬åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­è®¾ç½®ç”¨æˆ·çº§çš„ç¯å¢ƒå˜é‡&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/bashrc&lt;/code&gt;ï¼šä¸€èˆ¬åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æ·»åŠ ç³»ç»Ÿçº§ç¯å¢ƒå˜é‡&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.zshrc&lt;/code&gt;ï¼šå¦‚æœä½ çš„shellç¯å¢ƒä½¿ç”¨çš„æ˜¯zshçš„è¯ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ·»åŠ ç¯å¢ƒå˜é‡çš„æ–¹å¼å°±æ˜¯é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;export&lt;/code&gt; å…³é”®å­—æ¥è¿›è¡Œæ·»åŠ ã€‚&lt;/p&gt;

&lt;h2 id=&quot;iterm2-é…ç½®&quot;&gt;iTerm2 é…ç½®&lt;/h2&gt;

&lt;h3 id=&quot;ä¸»é¢˜é…è‰²&quot;&gt;ä¸»é¢˜é…è‰²&lt;/h3&gt;
&lt;p&gt;ä½ å¯ä»¥æ ¹æ®ä½ çš„å–œå¥½æ¥é€‰æ‹©ç»ˆç«¯ä¸»é¢˜é¢œè‰²çš„é…è‰²æ–¹æ¡ˆã€‚&lt;/p&gt;

&lt;p&gt;å¯ä»¥ä»&lt;a href=&quot;https://github.com/mbadolato/iTerm2-Color-Schemes&quot;&gt;mbadolato/iTerm2-Color-Schemes&lt;/a&gt;ä»“åº“ä¸‹è½½iTerm2çš„ä¸»é¢˜é…è‰²ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘é€‰æ‹©çš„æ˜¯==Cobalt Neon==ä¸»é¢˜ï¼Œä¸ªäººè§‰å¾—éå¸¸ä¸é”™ã€‚&lt;/p&gt;

&lt;p&gt;é…ç½®æ–¹æ³•ï¼š
&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/import_color_schemes.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;æ·»åŠ èƒŒæ™¯å›¾ç‰‡&quot;&gt;æ·»åŠ èƒŒæ™¯å›¾ç‰‡&lt;/h3&gt;

&lt;p&gt;æ›´æ¢èƒŒæ™¯å›¾ç‰‡æ–¹å¼ï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;iTerm2 -&amp;gt; Preferences -&amp;gt; Profiles -&amp;gt; Window -&amp;gt; BackGround Image&lt;/code&gt;å‹¾é€‰å›¾ç‰‡å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;éå¸¸å¥½çœ‹çš„ä¸€å¼ èƒŒæ™¯å›¾ï¼ŒèƒŒæ™¯å›¾ç‰‡å–è‡ªå¾®è½¯Surface Studioçš„4Kå£çº¸(å°†è¿‘12MBå¤§å°)ï¼Œéå¸¸æ¼‚äº®ï¼Œéœ€è¦çš„å¯ä»¥è‡ªå–&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;ï¼š&lt;/p&gt;

&lt;p&gt;é“¾æ¥: https://pan.baidu.com/s/17zGmâ€¦
æå–ç : hg67&lt;/p&gt;

&lt;h3 id=&quot;å¿«æ·é”®&quot;&gt;å¿«æ·é”®&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Preferences -&amp;gt; Keys -&amp;gt; Hotkey -&amp;gt; Show/hide iTerm2 with a system wide hotkey&lt;/code&gt;è®¾ç½®å¿«æ·é”® &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;command + option + i&lt;/code&gt; å¿«é€Ÿæ˜¾ç¤ºå’Œéšè— iTermã€‚&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¸¸ç”¨å¿«æ·é”®åˆ—è¡¨&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;shortcut key&lt;/th&gt;
          &lt;th&gt;description&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;âŒ˜ + t&lt;/td&gt;
          &lt;td&gt;æ–°å»ºæ ‡ç­¾é¡µ&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;âŒ˜ + n&lt;/td&gt;
          &lt;td&gt;æ–°å»ºçª—å£&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;âŒ˜ + æ•°å­—&lt;/td&gt;
          &lt;td&gt;åˆ‡æ¢æ ‡ç­¾é¡µ&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;âŒ˜ + enter&lt;/td&gt;
          &lt;td&gt;åˆ‡æ¢å…¨å±&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;âŒ˜ + d&lt;/td&gt;
          &lt;td&gt;å·¦å³åˆ†å±&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;â‡§âŒ˜ + d&lt;/td&gt;
          &lt;td&gt;ä¸Šä¸‹åˆ†å±&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;âŒ˜ + ;&lt;/td&gt;
          &lt;td&gt;è‡ªåŠ¨è¡¥å…¨å†å²è®°å½•&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;è®°å½•å‘½ä»¤è¡Œæ“ä½œæ—¥å¿—&quot;&gt;è®°å½•å‘½ä»¤è¡Œæ“ä½œæ—¥å¿—&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Session &amp;gt; Log &amp;gt; Log to File&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;zsh&quot;&gt;zsh&lt;/h2&gt;
&lt;p&gt;å®˜ç½‘ï¼š&lt;a href=&quot;http://ohmyz.sh/ÃŸ&quot;&gt;zsh&lt;/a&gt;
ä½¿ç”¨æ•™ç¨‹é“¾æ¥ï¼š&lt;a href=&quot;http://yijiebuyi.com/blog/b9b5e1ebb719f22475c38c4819ab8151.html&quot;&gt;oh-my-zshé…ç½®ä½ çš„zshæé«˜shellé€¼æ ¼ç»ˆæé€‰æ‹©&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;zshçš„ä¸»é¢˜æ–‡ä»¶å­˜å‚¨åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.oh-my-zsh/thees&lt;/code&gt; ç›®å½•ä¸‹ï¼Œä½ å¯ä»¥è‡ªå·±ä»githubä¸Šæ·˜åˆ°ä¸€äº›éå¸¸é…·ç‚«çš„çš„ä¸»é¢˜é…ç½®ï¼Œç„¶åä¸‹è½½å­˜æ”¾åˆ°è¯¥ç›®å½•ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;æ¨èä¸€ä¸ªå¸¦PowerBarçš„éå¸¸éªšçš„ä¸€ä¸ªä¸»é¢˜é…ç½®ï¼š&lt;a href=&quot;https://github.com/Powerlevel9k/powerlevel9k&quot;&gt;powerlevel9k&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å­—ä½“ä¸‹è½½&amp;amp;é…ç½®ï¼š&lt;a href=&quot;https://github.com/bhilburn/powerlevel9k/wiki/Install-Instructions#step-2-install-a-powerline-font&quot;&gt;Install Powerline Fonts&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;zshæ’ä»¶æ¨è&quot;&gt;zshæ’ä»¶æ¨è&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/zsh-users/zsh-autosuggestions&quot;&gt;zsh-users/zsh-autosuggestions&lt;/a&gt;ï¼šåŸºäºè¾“å…¥çš„å†å²å‘½ä»¤ï¼Œåœ¨è¾“å…¥å‘½ä»¤æ—¶è¿›è¡Œè¡¥å…¨æç¤º
&lt;a href=&quot;https://github.com/zsh-users/zsh-syntax-highlighting&quot;&gt;zsh-users/zsh-syntax-highlighting&lt;/a&gt;ï¼šé«˜äº®ä½ çš„ zsh å¯ç”¨å‘½ä»¤&lt;/p&gt;

&lt;h2 id=&quot;xcode-command-line-tools&quot;&gt;Xcode command line tools&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Xcode command line tools&lt;/code&gt; æ˜¯ Mac ä¸‹é¢ä¸€ç³»åˆ—é‡è¦ç¨‹åºå¼€å‘å·¥å…·å‘½ä»¤çš„é›†åˆï¼Œä¾‹å¦‚ï¼šake, gcc, g++, clang, perl, svn, gitç­‰ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å®‰è£…æ–¹æ³•&lt;/strong&gt;
ç›´æ¥æ‰“å¼€å‘½ä»¤è¡Œç»ˆç«¯ï¼Œé€šè¿‡ä¸‹é¢çš„å‘½ä»¤å®‰è£…å³å¯ï¼š&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xcode-select --install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;å¸è½½æ–¹æ³•&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo rm -rf /Library/Developer/CommandLineTools
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹ Xcode command line tools ä¸­å®‰è£…çš„å‘½ä»¤é›†åˆçš„æ–¹æ³•&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls /Library/Developer/CommandLineTools/usr/bin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;vim-ç¼–è¾‘å™¨ä½¿ç”¨æŠ€å·§&quot;&gt;vim ç¼–è¾‘å™¨ä½¿ç”¨æŠ€å·§&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/vim-key.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://harttle.land/2015/11/07/vim-cursor.html&quot;&gt;Vimä¸­å¦‚ä½•å¿«é€Ÿè¿›è¡Œå…‰æ ‡ç§»åŠ¨&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;sublime-text-3&quot;&gt;Sublime Text 3&lt;/h2&gt;

&lt;h3 id=&quot;åœ¨å‘½ä»¤è¡Œç»ˆç«¯å¯åŠ¨-sublime-text-3-çš„æ–¹æ³•&quot;&gt;åœ¨å‘½ä»¤è¡Œç»ˆç«¯å¯åŠ¨ sublime text 3 çš„æ–¹æ³•&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo ln&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl&quot;&lt;/span&gt; /usr/local/bin/subl 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;é…ç½®-cc-ä»£ç ç¼–è¯‘ç¯å¢ƒ&quot;&gt;é…ç½® C/C++ ä»£ç ç¼–è¯‘ç¯å¢ƒ&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Tools -&amp;gt; Build System -&amp;gt; New Buld System&lt;/code&gt; æ–°å»ºç¼–è¯‘ç³»ç»Ÿï¼Œåœ¨æ–°æ‰“å¼€çš„çª—å£ä¸­æ›¿æ¢ä¸‹é¢çš„ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{
	&quot;cmd&quot;: [&quot;bash&quot;, &quot;-c&quot;, &quot;g++ &apos;${file}&apos; -o &apos;${file_path}/${file_base_name}&apos; &amp;amp;&amp;amp; osascript -e &apos;tell application \&quot;Terminal\&quot; to activate do script \&quot;clear&amp;amp;&amp;amp;${file_path}/${file_base_name} &amp;amp;&amp;amp; read -p \\\&quot;Press Enter to exit.\\\&quot;&amp;amp;&amp;amp;exit\&quot;&apos;&quot;],
    &quot;file_regex&quot;: &quot;^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$&quot;,
    &quot;working_dir&quot;: &quot;${file_path}&quot;,
    &quot;selector&quot;: &quot;source.c, source.c++&quot;,

    &quot;variants&quot;:
    [
        {
            &quot;name&quot;: &quot;Run&quot;,
            &quot;cmd&quot;: [&quot;bash&quot;, &quot;-c&quot;, &quot;g++ &apos;${file}&apos; -o &apos;${file_path}/${file_base_name}&apos; &amp;amp;&amp;amp; &apos;${file_path}/${file_base_name}&apos;&quot;]
        }
    ]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Command + s&lt;/code&gt; ä¿å­˜ï¼Œå‘½åä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MyC++&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åæˆ‘ä»¬åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Tools -&amp;gt; Build System&lt;/code&gt; é€‰ä¸­ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MyC++&lt;/code&gt; ä½œä¸ºé»˜è®¤çš„ç¼–è¯‘è„šæœ¬ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œæ¯å½“æˆ‘ä»¬ç¼–å†™å®Œ C/C++ ä»£ç æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Command + Shift + B&lt;/code&gt; å¿«æ·é”®ç¼–è¯‘å¹¶è¿è¡Œç¨‹åºäº†ï¼ˆ&lt;strong&gt;æ³¨æ„é€‰æ‹©ä¸å¸¦ Run é‚£ä¸ªé€‰é¡¹&lt;/strong&gt;ï¼‰ï¼Œå®ƒé»˜è®¤ä¼šæ‰“å¼€å¹¶è·³è½¬åˆ°ä¸€ä¸ªç»ˆç«¯ç•Œé¢å»æ‰§è¡Œç¨‹åºã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¦‚æœä¸éœ€è¦ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–è¾“å…¥æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨å¿«æ·é”® Command + Shift + B ä¹‹åå¼¹å‡ºçš„é€‰æ‹©æ¡†ä¸­é€‰æ‹©åŠ  Run çš„é€‰é¡¹æ¥ç›´æ¥åœ¨ Sublime Text ä¸­è¿è¡Œç¨‹åºå¹¶çœ‹åˆ°æœ€ç»ˆç¨‹åºè¿è¡Œè¾“å‡ºçš„ç»“æœã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;è®©-sublime-è®°ä½ä¸Šä¸€æ¬¡å…³é—­å‰æ‰“å¼€çš„æ–‡ä»¶&quot;&gt;è®© Sublime è®°ä½ä¸Šä¸€æ¬¡å…³é—­å‰æ‰“å¼€çš„æ–‡ä»¶&lt;/h3&gt;
&lt;p&gt;åªéœ€è¦åœ¨ Sublime Text 3 é€€å‡ºæ—¶ï¼ŒæŒ‰ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;command + q&lt;/code&gt; é”®é€€å‡ºå³å¯ã€‚&lt;/p&gt;

&lt;h2 id=&quot;brew-åŒ…ç®¡ç†å·¥å…·&quot;&gt;brew åŒ…ç®¡ç†å·¥å…·&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew&lt;/code&gt; æ˜¯ Mac ä¸‹çš„ç¬¬ä¸‰æ–¹åŒ…ç®¡ç†å·¥å…·ï¼Œå®ƒç±»ä¼¼äº Ubuntu ç³»ç»Ÿä¸­è‡ªå¸¦çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apt&lt;/code&gt; åŒ…ç®¡ç†å·¥å…·ã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“çš„å®‰è£…æ–¹æ³•è¯¦è§å®˜ç½‘ï¼š&lt;a href=&quot;http://brew.sh/index_zh-cn.html&quot;&gt;Homebrew&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç¡®ä¿ brew è¿è¡Œæ­£å¸¸ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew doctor
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew&lt;/code&gt; å®‰è£…å‘½ä»¤è¡Œå·¥å…·çš„æ–¹æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &amp;lt;package_name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å®‰è£…å®Œæˆä¹‹åï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew&lt;/code&gt; é»˜è®¤å°†å‘½ä»¤è¡Œå·¥å…·å®‰è£…åˆ° &lt;em&gt;/usr/local/bin&lt;/em&gt;
 ç›®å½•ä¸‹é¢ã€‚&lt;/p&gt;

&lt;h3 id=&quot;brew-å¸¸ç”¨å‘½ä»¤&quot;&gt;brew å¸¸ç”¨å‘½ä»¤&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew search &amp;lt;pkg_name&amp;gt;  &lt;span class=&quot;c&quot;&gt;#æŸ¥æ‰¾è½¯ä»¶åŒ…&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &amp;lt;pkg_name&amp;gt;  &lt;span class=&quot;c&quot;&gt;#å®‰è£…è½¯ä»¶åŒ…&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew list &lt;span class=&quot;c&quot;&gt;#åˆ—å‡ºè½¯ä»¶åŒ…&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew uninstall &amp;lt;pkg_name&amp;gt; &lt;span class=&quot;c&quot;&gt;#å¸è½½è½¯ä»¶åŒ…&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew update &lt;span class=&quot;c&quot;&gt;#æ›´æ–°&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew info &amp;lt;pkg_name&amp;gt; &lt;span class=&quot;c&quot;&gt;#æŸ¥çœ‹è½¯ä»¶åŒ…çš„åŸºæœ¬èµ„æ–™&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;nodejs-å®‰è£…&quot;&gt;Node.js å®‰è£…&lt;/h2&gt;

&lt;h3 id=&quot;å®‰è£…-nvm-node-version-manager&quot;&gt;å®‰è£… NVM ï¼ˆNode Version Managerï¼‰&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew&lt;/code&gt; å®‰è£… nvm&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;nvm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é…ç½® nvm ç›¸å…³ç¯å¢ƒå˜é‡&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# You should create NVM&apos;s working directory if it doesn&apos;t exist:&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; ~/.nvm

&lt;span class=&quot;c&quot;&gt;# Add the following to ~/.zshrc or your desired shell&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#configuration file:&lt;/span&gt;

  &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;NVM_DIR&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$HOME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/.nvm&quot;&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/usr/local/opt/nvm/nvm.sh&quot;&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æµ‹è¯• nvm æ˜¯å¦å®‰è£…æˆåŠŸ&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;âœ  ~ nvm

Node Version Manager

Note: &amp;lt;version&amp;gt; refers to any version-like string nvm understands. This includes:
  - full or partial version numbers, starting with an optional &lt;span class=&quot;s2&quot;&gt;&quot;v&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.10, v0.1.2, v1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  - default &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;built-in&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; aliases: node, stable, unstable, iojs, system
  - custom aliases you define with &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;nvm &lt;span class=&quot;nb&quot;&gt;alias &lt;/span&gt;foo&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;

 Any options that produce colorized output should respect the &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--no-colors&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt; option.

Usage:
  nvm &lt;span class=&quot;nt&quot;&gt;--help&lt;/span&gt;                                Show this message
  nvm &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt;                             Print out the latest released version of nvm
  nvm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &amp;lt;version&amp;gt;                Download and &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;a &amp;lt;version&amp;gt;, &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; from source. Uses .nvmrc &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;available
    &lt;span class=&quot;nt&quot;&gt;--reinstall-packages-from&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;version&amp;gt;     When installing, reinstall packages installed &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &amp;lt;node|iojs|node version number&amp;gt;
    &lt;span class=&quot;nt&quot;&gt;--lts&lt;/span&gt;                                   When installing, only &lt;span class=&quot;k&quot;&gt;select &lt;/span&gt;from LTS &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;long-term support&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; versions
    &lt;span class=&quot;nt&quot;&gt;--lts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;LTS name&amp;gt;                        When installing, only &lt;span class=&quot;k&quot;&gt;select &lt;/span&gt;from versions &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;a specific LTS line
  nvm uninstall &amp;lt;version&amp;gt;                   Uninstall a version
  nvm uninstall &lt;span class=&quot;nt&quot;&gt;--lts&lt;/span&gt;                       Uninstall using automatic LTS &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;long-term support&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;alias&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;lts/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;, &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;available.
  nvm uninstall &lt;span class=&quot;nt&quot;&gt;--lts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;LTS name&amp;gt;            Uninstall using automatic &lt;span class=&quot;nb&quot;&gt;alias &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;provided LTS line, &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;available.
  nvm use &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--silent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &amp;lt;version&amp;gt;              Modify PATH to use &amp;lt;version&amp;gt;. Uses .nvmrc &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;available
    &lt;span class=&quot;nt&quot;&gt;--lts&lt;/span&gt;                                   Uses automatic LTS &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;long-term support&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;alias&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;lts/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;, &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;available.
    &lt;span class=&quot;nt&quot;&gt;--lts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;LTS name&amp;gt;                        Uses automatic &lt;span class=&quot;nb&quot;&gt;alias &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;provided LTS line, &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;available.
    ......
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ä½¿ç”¨-nvm-å®‰è£-nodejs&quot;&gt;ä½¿ç”¨ NVM å®‰è£ Node.js&lt;/h3&gt;
&lt;p&gt;æ‰¾å‡ºç›®å‰æ‰€æœ‰å¯å®‰è£çš„ Node.js ç‰ˆæœ¬&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;nvm ls-remote
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å®‰è£…å½“å‰æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Node.js&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;nvm &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;stable
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æµ‹è¯•å®‰è£…çš„ Node.js&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;âœ  ~ node &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;
v7.2.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æµ‹è¯• npm&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;âœ  ~ npm &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;
3.10.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ä¿®æ”¹-npm-åŒ…ç®¡ç†å™¨ä¸‹è½½çš„é•œåƒæº&quot;&gt;ä¿®æ”¹ npm åŒ…ç®¡ç†å™¨ä¸‹è½½çš„é•œåƒæº&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ taobo å®šåˆ¶çš„ cnpm (gzip å‹ç¼©æ”¯æŒ) å‘½ä»¤è¡Œå·¥å…·ä»£æ›¿é»˜è®¤çš„ npmï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;\n#alias for cnpm\nalias cnpm=&quot;npm --registry=https://registry.npm.taobao.org \
  --cache=$HOME/.npm/.cache/cnpm \
  --disturl=https://npm.taobao.org/dist \
  --userconfig=$HOME/.cnpmrc&quot;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; ~/.zshrc &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; ~/.zshrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;å®‰è£…æ¨¡å—&lt;/strong&gt;
ä» registry.npm.taobao.org å®‰è£…æ‰€æœ‰æ¨¡å—. å½“å®‰è£…çš„æ—¶å€™å‘ç°å®‰è£…çš„æ¨¡å—è¿˜æ²¡æœ‰åŒæ­¥è¿‡æ¥, æ·˜å® NPM ä¼šè‡ªåŠ¨åœ¨åå°è¿›è¡ŒåŒæ­¥, å¹¶ä¸”ä¼šè®©ä½ ä»å®˜æ–¹ NPM registry.npmjs.org è¿›è¡Œå®‰è£…. ä¸‹æ¬¡ä½ å†å®‰è£…è¿™ä¸ªæ¨¡å—çš„æ—¶å€™, å°±ä¼šç›´æ¥ä» æ·˜å® NPM å®‰è£…äº†.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//ä½¿ç”¨è¿™ç§æ–¹æ³•å®‰è£… node æ¨¡å—æ—¶ï¼Œåœ¨ç»ˆç«¯ä¸€å®šè¦å–æ¶ˆæ‰ http_proxy å’Œ https_proxy ä»£ç†Â·

&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; Blockquote

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;cnpm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;name]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;åŒæ­¥æ¨¡å—&lt;/strong&gt;
ç›´æ¥é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sync&lt;/code&gt; å‘½ä»¤é©¬ä¸ŠåŒæ­¥ä¸€ä¸ªæ¨¡å—, åªæœ‰ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cnpm&lt;/code&gt; å‘½ä»¤è¡Œæ‰æœ‰æ­¤åŠŸèƒ½:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;cnpm &lt;span class=&quot;nb&quot;&gt;sync &lt;/span&gt;connect
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;å‰ªè´´æ¿ç®¡ç†å‘½ä»¤pbcopy-å’Œ-pbpaste&quot;&gt;å‰ªè´´æ¿ç®¡ç†å‘½ä»¤ï¼špbcopy å’Œ pbpaste&lt;/h2&gt;
&lt;p&gt;è¿™ä¸¤ä¸ªå·¥å…·å¯ä»¥æ‰“é€šå‘½ä»¤è¡Œå’Œå‰ªè´´æ¿ã€‚å½“ç„¶ç”¨é¼ æ ‡æ“ä½œå¤åˆ¶ç²˜è´´ä¹Ÿå¯ä»¥â€”â€”ä½†è¿™ä¸¤ä¸ªå·¥å…·çš„çœŸæ­£å¨åŠ›ï¼Œå‘æŒ¥åœ¨å°†å…¶ç”¨ä½œUnixå·¥å…·çš„æ—¶å€™ã€‚æ„æ€å°±æ˜¯è¯´ï¼šå¯ä»¥å°†è¿™ä¸¤ä¸ªå·¥å…·ç”¨ä½œç®¡é“ã€IOé‡å®šå‘ä»¥åŠå’Œå…¶ä»–å‘½ä»¤çš„æ•´åˆã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; ~ | pbcopy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;å¯ä»¥å°†ä¸»ç›®å½•çš„æ–‡ä»¶åˆ—è¡¨å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚&lt;/p&gt;

&lt;p&gt;ä¹Ÿå¯ä»¥æŠŠä»»æ„æ–‡ä»¶çš„å†…å®¹å¤åˆ¶åˆ°å‰ªè´´æ¿ä¸­ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pbcopy &amp;lt; blogpost.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å°†å‰ªè´´æ¿ä¸­çš„å†…å®¹è¾“å‡ºä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pbpaset &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; test.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;omnigraffle&quot;&gt;OmniGraffle&lt;/h2&gt;
&lt;p&gt;OmniGraffle æ˜¯ Mac ä¸Šéå¸¸å¼ºå¤§çš„ç»˜å›¾è½¯ä»¶ï¼Œå®ƒå¯ä»¥ç»˜åˆ¶æµç¨‹å›¾ï¼Œæ€ç»´å¯¼å›¾ï¼Œäº§å“åŸå‹å›¾ç­‰ç­‰ï¼Œè€Œä¸”è¿˜æœ‰éå¸¸ä¸°å¯Œçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;stencils&lt;/code&gt; æ¨¡æ¿ï¼Œç›´æ¥å¯¼å…¥ç„¶åè¿›è¡Œä¿®æ”¹ï¼Œå¾—åˆ°è‡ªå·±æƒ³è¦çš„å›¾å½¢ã€‚&lt;/p&gt;

&lt;h2 id=&quot;jekyllåšå®¢ç¯å¢ƒæ­å»º&quot;&gt;Jekyllåšå®¢ç¯å¢ƒæ­å»º&lt;/h2&gt;

&lt;h3 id=&quot;å®‰è£…-rvm&quot;&gt;å®‰è£… RVM&lt;/h3&gt;
&lt;p&gt;RVMæ˜¯Rubyçš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥å¸®åŠ©æˆ‘ä»¬å®‰è£…Rubyã€‚&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-L&lt;/span&gt; get.rvm.io | bash &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; stable
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åï¼Œæˆ‘ä»¬éœ€è¦å†å…¥RVMç¯å¢ƒã€‚&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; ~/.rvm/scripts/rvm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rvm -v&lt;/code&gt; å°±å¯ä»¥æ£€æŸ¥RVMæ˜¯å¦å®‰è£…æˆåŠŸäº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä½¿ç”¨rvmå®‰è£…ruby&quot;&gt;ä½¿ç”¨RVMå®‰è£…Ruby&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ rvm install ruby
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç­‰ä¸€æ®µæ—¶é—´ï¼ŒRubyï¼ŒRuby Gemså°±å®‰è£…å¥½äº†ã€‚&lt;/p&gt;

&lt;p&gt;å¯ä»¥ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gem -v&lt;/code&gt;å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ruby -v&lt;/code&gt;æ¥æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸã€‚&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# é…ç½®å¥½shellç¯å¢ƒä¸Šçš„ä»£ç†&lt;/span&gt;
gem update &lt;span class=&quot;nt&quot;&gt;--system&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ç”¨-rubygems-å®‰è£…-jekyll&quot;&gt;ç”¨ RubyGems å®‰è£… Jekyll&lt;/h3&gt;

&lt;p&gt;å®‰è£… Jekyll çš„æœ€å¥½æ–¹å¼å°±æ˜¯ä½¿ç”¨ RubyGems. ä½ åªéœ€è¦æ‰“å¼€ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤å°±å¯ä»¥å®‰è£…äº†ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gem &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;jekyll
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gem &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;jekyll-archives
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gem &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;jekyll-sitemap
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gem &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;jekyll-paginate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;æ‰€æœ‰çš„ Jekyll çš„ gem ä¾èµ–åŒ…éƒ½ä¼šè¢«è‡ªåŠ¨å®‰è£…ï¼Œæ‰€ä»¥ä½ å®Œå…¨ä¸ç”¨å»æ‹…å¿ƒã€‚&lt;/p&gt;

&lt;h2 id=&quot;ssh-å¸¸ç”¨æŠ€å·§&quot;&gt;ssh å¸¸ç”¨æŠ€å·§&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;å…å¯†ç™»å½•è¿œç¨‹ä¸»æœº&lt;/p&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; # å¦‚æœæœ¬æœºå…¬é’¥è¿˜æ²¡æœ‰ç”Ÿæˆï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼šssh-keygen ç”Ÿæˆ
 $ ssh-copy-id arclab@10.214.9.170
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¿«é€Ÿç™»å½•è¿œç¨‹ä¸»æœº&lt;/p&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; # ä¸ºäº†é¿å…æ¯æ¬¡ ssh è¿æ¥è¿œç¨‹ä¸»æœºæ—¶è¾“å…¥ä¸€é•¿ä¸²çš„ username@host-ipï¼Œå¯ä»¥å°†è¿œç¨‹ä¸»æœºç”¨ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²æ¥æ ‡è¯†ï¼Œä¿®æ”¹æ–¹æ³•å¦‚ä¸‹
 $ vim ~/.ssh/config
 HOST droidocker
 User arclab
 Port 22
 HostName 10.214.9.170
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;ç«¯å£è½¬å‘å·¥å…·&quot;&gt;ç«¯å£è½¬å‘å·¥å…·&lt;/h2&gt;

&lt;p&gt;ä¸€ä¸ªCè¯­è¨€å¼€å‘çš„å¼€æºTCPç«¯å£è½¬å‘å·¥å…·ï¼Œ å°†TCPè¿æ¥ä»ä¸€ä¸ªIPåœ°å€å’Œç«¯å£é‡å®šå‘åˆ°å¦ä¸€ä¸ªIPåœ°å€å’Œç«¯å£ã€‚&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# ä¸‹è½½&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git clone https://github.com/samhocevar/rinetd.git

&lt;span class=&quot;c&quot;&gt;# ç¼–è¯‘&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;rinetd
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./bootstrap
+ &lt;span class=&quot;nb&quot;&gt;test &lt;/span&gt;no &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;yes&lt;/span&gt;
+ aclocal &lt;span class=&quot;nt&quot;&gt;-I&lt;/span&gt; .auto &lt;span class=&quot;nt&quot;&gt;-I&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
+ autoconf
+ &lt;span class=&quot;nb&quot;&gt;test yes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;yes&lt;/span&gt;
+ autoheader
+ &lt;span class=&quot;nb&quot;&gt;test yes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;yes&lt;/span&gt;
+ automake &lt;span class=&quot;nt&quot;&gt;--foreign&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--add-missing&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--copy&lt;/span&gt;
configure.ac:10: installing &lt;span class=&quot;s1&quot;&gt;&apos;.auto/compile&apos;&lt;/span&gt;
configure.ac:7: installing &lt;span class=&quot;s1&quot;&gt;&apos;.auto/install-sh&apos;&lt;/span&gt;
configure.ac:7: installing &lt;span class=&quot;s1&quot;&gt;&apos;.auto/missing&apos;&lt;/span&gt;
src/Makefile.am: installing &lt;span class=&quot;s1&quot;&gt;&apos;.auto/depcomp&apos;&lt;/span&gt;
+ &lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Rf&lt;/span&gt; autom4te.cache

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./configure
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;make &lt;span class=&quot;nb&quot;&gt;install
&lt;/span&gt;Making &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;src
make[1]: Entering directory &lt;span class=&quot;s1&quot;&gt;&apos;/home/flyflypeng/OpenSourceProject/rinetd/src&apos;&lt;/span&gt;
make  install-am
make[2]: Entering directory &lt;span class=&quot;s1&quot;&gt;&apos;/home/flyflypeng/OpenSourceProject/rinetd/src&apos;&lt;/span&gt;
make[3]: Entering directory &lt;span class=&quot;s1&quot;&gt;&apos;/home/flyflypeng/OpenSourceProject/rinetd/src&apos;&lt;/span&gt;
 /bin/mkdir &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;/usr/local/sbin&apos;&lt;/span&gt;
  /usr/bin/install &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; ../rinetd &lt;span class=&quot;s1&quot;&gt;&apos;/usr/local/sbin&apos;&lt;/span&gt;
make[3]: Nothing to be &lt;span class=&quot;k&quot;&gt;done for&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;install-data-am&apos;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
make[3]: Leaving directory &lt;span class=&quot;s1&quot;&gt;&apos;/home/flyflypeng/OpenSourceProject/rinetd/src&apos;&lt;/span&gt;
make[2]: Leaving directory &lt;span class=&quot;s1&quot;&gt;&apos;/home/flyflypeng/OpenSourceProject/rinetd/src&apos;&lt;/span&gt;
make[1]: Leaving directory &lt;span class=&quot;s1&quot;&gt;&apos;/home/flyflypeng/OpenSourceProject/rinetd/src&apos;&lt;/span&gt;
make[1]: Entering directory &lt;span class=&quot;s1&quot;&gt;&apos;/home/flyflypeng/OpenSourceProject/rinetd&apos;&lt;/span&gt;
make[2]: Entering directory &lt;span class=&quot;s1&quot;&gt;&apos;/home/flyflypeng/OpenSourceProject/rinetd&apos;&lt;/span&gt;
 /bin/mkdir &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;/usr/local/etc&apos;&lt;/span&gt;
 /usr/bin/install &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; 644 rinetd.conf &lt;span class=&quot;s1&quot;&gt;&apos;/usr/local/etc&apos;&lt;/span&gt;
 /bin/mkdir &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;/usr/local/share/man/man8&apos;&lt;/span&gt;
 /usr/bin/install &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; 644 rinetd.8 &lt;span class=&quot;s1&quot;&gt;&apos;/usr/local/share/man/man8&apos;&lt;/span&gt;
make[2]: Leaving directory &lt;span class=&quot;s1&quot;&gt;&apos;/home/flyflypeng/OpenSourceProject/rinetd&apos;&lt;/span&gt;
make[1]: Leaving directory &lt;span class=&quot;s1&quot;&gt;&apos;/home/flyflypeng/OpenSourceProject/rinetd&apos;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é…ç½®æ–‡ä»¶è·¯å¾„ï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/rinetd.conf&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vim /usr/local/etc/rinetd.conf

&lt;span class=&quot;c&quot;&gt;# å°†æœ¬æœºä¸Š9000ç«¯å£è½¬åˆ°æœ¬æœºå›ç¯åœ°å€ä¸Šçš„12333ç«¯å£&lt;/span&gt;
0.0.0.0 9000 127.0.0.1 12333
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯åŠ¨rinetdæœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vi /etc/systemd/system/rinetd.service

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Unit]
&lt;span class=&quot;nv&quot;&gt;Description&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;rinetd

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Service]
&lt;span class=&quot;nv&quot;&gt;ExecStart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/sbin/rinetd &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; /usr/local/etc/rinetd.conf
&lt;span class=&quot;nv&quot;&gt;Restart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;always
  
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Install]
&lt;span class=&quot;nv&quot;&gt;WantedBy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;multi-user.target

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;rinetd.service &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; systemctl start rinetd.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000014992947&quot;&gt;iTerm2 + Oh My Zsh æ‰“é€ èˆ’é€‚ç»ˆç«¯ä½“éªŒ&lt;/a&gt;Â &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Mon, 23 Mar 2020 04:00:31 +0800</pubDate>
        <link>http://localhost:4000/%E5%88%A9%E5%99%A8/2020/03/23/Mac%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE.html</link>
        <guid isPermaLink="true">http://localhost:4000/%E5%88%A9%E5%99%A8/2020/03/23/Mac%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE.html</guid>
        
        <category>Mac</category>
        
        <category>Jekyll</category>
        
        <category>iTerm2</category>
        
        <category>zsh</category>
        
        
        <category>åˆ©å™¨</category>
        
      </item>
    
      <item>
        <title>QEMU/KVM åŸç†ç»¼è¿°</title>
        <description>&lt;h2 id=&quot;qemu-å·¥ä½œåŸç†ç®€ä»‹&quot;&gt;QEMU å·¥ä½œåŸç†ç®€ä»‹&lt;/h2&gt;

&lt;p&gt;QEMUæ˜¯ä¸€æ¬¾å¼€æºçš„æ¨¡æ‹Ÿå™¨å’Œè™šæ‹Ÿæœºç›‘è§†å™¨ï¼ˆVirtual Machine Monitor, VMMï¼‰ã€‚QEMUä¸»è¦æä¾›ä¸¤ä¸ªåŠŸèƒ½ç»™ç”¨æˆ·ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ä½œä¸ºç”¨æˆ·æ€æ¨¡æ‹Ÿå™¨ï¼šé€šè¿‡åŠ¨æ€ä»£ç ç¿»è¯‘æœºåˆ¶æ¥æ‰§è¡Œä¸åŒæ¶æ„çš„ä»£ç ï¼Œä¾‹å¦‚åœ¨X86å¹³å°ä¸Šæ¨¡æ‹ŸARMå¹³å°ä¸‹æ‰§è¡Œç¯å¢ƒã€‚&lt;/li&gt;
  &lt;li&gt;ä½œä¸ºè™šæ‹Ÿæœºç›‘è§†å™¨ï¼šæ¨¡æ‹Ÿå…¨ç³»ç»Ÿï¼Œåˆ©ç”¨å…¶å®ƒVMMï¼ˆXenï¼ŒKVMç­‰ç­‰ï¼‰æ¥ä½¿ç”¨ç¡¬ä»¶æä¾›çš„è™šæ‹ŸåŒ–æ”¯æŒï¼Œåˆ›å»ºæ¥è¿‘äºä¸»æœºæ€§èƒ½çš„è™šæ‹Ÿæœºã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;qemuè™šæ‹ŸåŒ–çš„ä¸»è¦åŸç†&quot;&gt;QEMUè™šæ‹ŸåŒ–çš„ä¸»è¦åŸç†&lt;/h3&gt;

&lt;p&gt;ç³»ç»Ÿè™šæ‹ŸåŒ–æœ€é‡è¦çš„å°±æ˜¯è™šæ‹ŸåŒ–å‡ºè®¡ç®—æœºç³»ç»Ÿä¸­æœ€é‡è¦çš„ä¸‰å¤§ç»„ä»¶ï¼šCPUã€å†…å­˜å’ŒIOè®¾å¤‡ã€‚QEMUè™šæ‹Ÿå‡ºæ¥çš„CPUæˆä¸ºvCPUï¼Œä¸ºäº†æå‡vCPUæ‰§è¡ŒGuest OSä¸­æŒ‡ä»¤çš„æ•ˆç‡ï¼Œé€šè¿‡KVMã€Xenç­‰è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œç›´æ¥åˆ©ç”¨CPUç¡¬ä»¶è™šæ‹ŸåŒ–çš„æ”¯æŒï¼Œåœ¨ä¸»æœºä¸Šå®‰å…¨åœ°æ‰§è¡Œè™šæ‹Ÿæœºä»£ç ï¼ˆéœ€è¦BIOSä¸­CPUå¼€å¯å¯¹åº”çš„ç¡¬ä»¶è™šæ‹ŸåŒ–æ”¯æŒï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨x86å¹³å°ä¸Šæœ€å¸¸è§çš„è™šæ‹ŸåŒ–ç»„åˆå°±æ˜¯QEMU/KVMçš„ç»„åˆäº†ï¼Œå…¶ä¸­åˆ©ç”¨QEMUæ¥æ¨¡æ‹ŸIOå¤–è®¾ï¼Œé€šè¿‡KVMæ¥æ•è·Guest OSä¸­è¿è¡Œçš„æŒ‡ä»¤å¹¶å°†å…¶ä¸­éç‰¹æƒæŒ‡ä»¤åœ¨ç‰©ç†CPUä¸Šç›´æ¥è¿è¡Œï¼Œè¾¾åˆ°ç¡¬ä»¶åŠ é€Ÿçš„ç›®çš„ã€‚&lt;/p&gt;

&lt;p&gt;KVMå†…æ ¸æ¨¡å—å¯¹ç”¨æˆ·ç©ºé—´åªæš´éœ²å‡ºä¸€ä¸ª&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dev/kvm&lt;/code&gt;çš„è®¾å¤‡æ–‡ä»¶ï¼Œç„¶åé€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ioctl&lt;/code&gt;å‘½ä»¤ä¸QEMUè¿›ç¨‹è¿›è¡Œé€šä¿¡ï¼ŒKVMåˆ©ç”¨ç¡¬ä»¶æ‰©å±•ç›´æ¥å°†è™šæ‹Ÿæœºä»£ç è¿è¡Œäºä¸»æœºä¹‹ä¸Šï¼Œå½“vCPUéœ€è¦æ‰§è¡Œè®¿é—®IOè®¾å¤‡å¯„å­˜å™¨çš„æŒ‡ä»¤æ—¶ï¼ŒvCPUå°±ä¼šåœæ­¢ä»é€€å›åˆ°QEMUè¿›ç¨‹ä¸­ï¼Œç”±QEMUå»æ¨¡æ‹Ÿæ“ä½œçš„ç»“æœã€‚&lt;/p&gt;

&lt;h2 id=&quot;kvm-è™šæ‹ŸåŒ–åŸç†ç®€ä»‹&quot;&gt;KVM è™šæ‹ŸåŒ–åŸç†ç®€ä»‹&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;KVMæ˜¯Linuxå†…æ ¸çš„ä¸€ä¸ªè™šæ‹ŸåŒ–ç‰¹æ€§ï¼Œç”±ä¸€ç»„å†…æ ¸æ¨¡å—æ–‡ä»¶ç»„æˆï¼Œå®ƒå¯ä»¥è®©QEMUä¸­è¿è¡Œçš„Guest OSçš„æŒ‡ä»¤ç›´æ¥åœ¨Host OSä¸Šçš„CPUä¸­æ‰§è¡Œï¼Œ&lt;strong&gt;å‰ææ˜¯Guest OSå’ŒHost OSçš„ç¡¬ä»¶æ¶æ„ç›¸åŒ&lt;/strong&gt;ã€‚&lt;/li&gt;
  &lt;li&gt;KVMè§£å†³äº†è™šæ‹ŸåŒ–ä¸­çš„å“ªä¸ªç—›ç‚¹ï¼Ÿæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ
  KVMä¸»è¦è§£å†³çš„è™šæ‹ŸåŒ–ä¸­CPUè™šæ‹ŸåŒ–çš„é—®é¢˜ï¼Œè¿™éƒ¨åˆ†è¯¦ç»†å†…å®¹å¯ä»¥å‚è§&lt;strong&gt;CPUè™šæ‹ŸåŒ–&lt;/strong&gt;ç›¸å…³å†…å®¹ã€‚
    &lt;ul&gt;
      &lt;li&gt;æ²¡æœ‰KVMè™šæ‹ŸåŒ–åŠ é€Ÿ
  QEMUéœ€è¦æˆªè·Guest OSä¸­è¿è¡Œçš„æ‰€æœ‰æŒ‡ä»¤ï¼Œç„¶åé€šè¿‡è½¯ä»¶çš„æ–¹å¼æ¨¡æ‹Ÿæ‰§è¡Œï¼Œå¦‚æœæ˜¯è·¨å¹³å°æ¶æ„çš„Guest OSï¼Œé‚£ä¹ˆè¿˜éœ€è¦é¢å¤–çš„äºŒè¿›åˆ¶æŒ‡ä»¤ç¿»è¯‘ï¼Œå°†Guest OSä¸­ç›®æ ‡æ¶æ„çš„æŒ‡ä»¤ç¿»è¯‘æˆHost OSä¸Šæ‰€èƒ½æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œå¯¼è‡´è™šæ‹ŸåŒ–çš„æ•ˆç‡éå¸¸ä½ã€‚&lt;/li&gt;
      &lt;li&gt;æœ‰KVMè™šæ‹ŸåŒ–åŠ é€Ÿ
  å¦‚æœQEMUä¸­è¿è¡Œçš„Guest OSå’ŒHost OSçš„ç¡¬ä»¶æ¶æ„ç›¸åŒï¼Œé‚£ä¹ˆGuest OSä¸­çš„æŒ‡ä»¤å¯ä»¥ç›´æ¥åœ¨Host OSä¸Šçš„ç‰©ç†CPUä¸Šæ‰§è¡Œï¼Œè€Œä¸éœ€è¦é€šè¿‡QEMUè½¯ä»¶æ¨¡æ‹Ÿçš„æ–¹å¼å»æ‰§è¡ŒGuest OSä¸­çš„æŒ‡ä»¤ï¼Œå¤§å¤§æé«˜äº†Guestè™šæ‹Ÿæœºçš„æ€§èƒ½ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;QEMUç»“åˆKVMæ‰§è¡ŒGuest OSæŒ‡ä»¤çš„æ­¥éª¤ç®€è¦æè¿°&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;ï¼š
    &lt;blockquote&gt;
      &lt;p&gt;æ‰“å¼€/dev/kvmè®¾å¤‡æ–‡ä»¶ã€åˆ›å»ºè™šæ‹Ÿæœºã€åˆ›å»ºvCPUã€å‘KVMæ¨¡å—å‘é€KVM_RUNçš„ioctlè°ƒç”¨ï¼Œæ¥ä¸‹æ¥KVMæ¨¡å—åˆ©ç”¨CPUä¸Šçš„ç¡¬ä»¶è™šæ‹ŸåŒ–æ‰©å±•åŠŸèƒ½æ¥ç›´æ¥æ‰§è¡Œguestçš„è¿è¡Œã€‚å½“gueståœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°è¯»å–ç¡¬ä»¶è®¾å¤‡å¯„å­˜å™¨ç­‰I/Oæ“ä½œã€æš‚åœguest CPUæˆ–å…¶ä»–ç‰¹æ®ŠæŒ‡ä»¤ç­‰KVMæ— æ³•æ‰§è¡Œçš„æ“ä½œæ—¶ï¼Œä¼šé€€å‡ºå½“å‰KVMå¹¶äº¤ç”±Qemuå¤„ç†ã€‚Qemuæ¨¡æ‹Ÿå™¨åˆ¤æ–­é€€å‡ºåŸå› å¹¶æ‰§è¡Œç›¸åº”çš„æ“ä½œï¼šå¦‚æœæ˜¯é‡åˆ°I/Oæ“ä½œæˆ–ç‰¹æ®ŠæŒ‡ä»¤ï¼ŒQemuä¼šå»æ¨¡æ‹Ÿæ‰§è¡Œè¿™äº›æ“ä½œï¼›å¦‚æœæ˜¯æš‚åœguest CPUæ“ä½œï¼ŒQemuåœæ­¢å¹¶ç­‰å¾…ä¸‹ä¸€æ¬¡guestä¸­æ–­ã€‚
  ä¸Šè¿°æµç¨‹ç”¨ä¸‹é¢çš„ä»£ç æ¥ç®€å•è¡¨ç¤ºï¼š&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;n&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/dev/kvm&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
  &lt;span class=&quot;n&quot;&gt;ioctl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KVM_CREATE_VM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
  &lt;span class=&quot;n&quot;&gt;ioctl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KVM_CREATE_VCPU&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
  &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(;;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    
       &lt;span class=&quot;n&quot;&gt;ioctl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KVM_RUN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
       &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exit_reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* åˆ†æé€€å‡ºåŸå› ï¼Œå¹¶æ‰§è¡Œç›¸åº”æ“ä½œ */&lt;/span&gt;
    
       &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;KVM_EXIT_IO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;cm&quot;&gt;/* ... */&lt;/span&gt;
    
       &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;KVM_EXIT_HLT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* ... */&lt;/span&gt;
    
       &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Host, QEMU, Guestä¹‹é—´çš„å…³ç³»å›¾
  &lt;img src=&quot;http://97.64.33.222/temp/1811/99149dd24c5fc6b2.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å‚è€ƒæ–‡ç« &quot;&gt;å‚è€ƒæ–‡ç« &lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.csdn.net/xiongwenwu/article/details/58586013&quot;&gt;KVM/Qemu å·¥ä½œåŸç†ç³»åˆ—ç›®å½•&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://www.ibm.com/developerworks/community/blogs/5144904d-5d75-45ed-9d2b-cf1754ee936a/entry/20160805?lang=en&quot;&gt;QEMUæ·±å…¥è§£æï¼šç»¼è¿°ç¯‡&lt;/a&gt;Â &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Wed, 21 Nov 2018 08:12:33 +0800</pubDate>
        <link>http://localhost:4000/%E8%99%9A%E6%8B%9F%E5%8C%96/2018/11/21/QEMU-KVM-%E5%8E%9F%E7%90%86%E7%BB%BC%E8%BF%B0.html</link>
        <guid isPermaLink="true">http://localhost:4000/%E8%99%9A%E6%8B%9F%E5%8C%96/2018/11/21/QEMU-KVM-%E5%8E%9F%E7%90%86%E7%BB%BC%E8%BF%B0.html</guid>
        
        <category>è™šæ‹ŸåŒ–</category>
        
        <category>QEMU</category>
        
        <category>KVM</category>
        
        
        <category>è™šæ‹ŸåŒ–</category>
        
      </item>
    
      <item>
        <title>Android ç³»ç»Ÿå›¾å½¢æ ˆï¼ˆäºŒï¼‰ï¼šOpenGL ES åº“å’Œ EGL åº“åŠ è½½è¿‡ç¨‹</title>
        <description>&lt;h2 id=&quot;1-opengl-es-å’Œ-opengl-es-åº“çš„åŒºåˆ«&quot;&gt;1. OpenGL ES å’Œ OpenGL ES åº“çš„åŒºåˆ«&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;OpenGL ES&lt;/strong&gt; ï¼š å®ƒæœ¬èº«åªæ˜¯ä¸€ä¸ªåè®®è§„èŒƒï¼Œå®šä¹‰äº†ä¸€å¥—å¯ä»¥ä¾›ä¸Šå±‚åº”ç”¨ç¨‹åºè¿›è¡Œè°ƒç”¨çš„ APIï¼Œå®ƒæŠ½è±¡äº† GPU çš„åŠŸèƒ½ï¼Œä½¿åº”ç”¨å¼€å‘è€…ä¸å¿…å…³å¿ƒåº•å±‚çš„ GPU ç±»å‹å’Œå…·ä½“å®ç°ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;OpenGL ES åº“&lt;/strong&gt;ï¼šOpenGL ES åº“å°±æ˜¯ä¸Šé¢ OpenGL ES ä¸­å®šä¹‰çš„ API çš„å…·ä½“å®ç°ã€‚ç”±äºæ¯ä¸ªæ˜¾å¡åˆ¶é€ å‚å•†çš„ GPU ç¡¬ä»¶ç»“æ„ä¸åŒï¼Œä»è€Œå¯¼è‡´å„ä¸ªå‚å•†çš„OpenGL ES åº“ä¹Ÿå„ä¸ç›¸åŒï¼Œæ‰€ä»¥ Android ç³»ç»Ÿä¸­çš„ OpenGL ES åº“é€šå¸¸æ˜¯ç”±ç¡¬ä»¶å‚å•†æä¾›çš„ï¼Œé€šå¸¸å­˜æ”¾åœ¨ Android ç³»ç»Ÿä¸­çš„ &lt;em&gt;/system/lib64/egl&lt;/em&gt; ä¸‹é¢æˆ–è€… &lt;em&gt;/vendor/lib64/egl&lt;/em&gt; ç›®å½•ä¸‹ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;OpenGL ES Wrapper åº“&lt;/strong&gt;ï¼šOpenGL ES Wrapper åº“æ˜¯ä¸€ä¸ªå¯¹ OpenGL ES API è¿›è¡Œå°è£…çš„ä¸€ä¸ªåŒ…è£¹åº“ï¼Œå®ƒå‘ä¸Šä¸ºåº”ç”¨ç¨‹åºæä¾›äº†æ ‡å‡†çš„ OpenGL ES APIï¼Œå‘ä¸‹å¯ä»¥å’Œä¸åŒå‚å•†å®ç°çš„ OpenGL ES åº“è¿›è¡Œç»‘å®šï¼Œå°† OpenGL ES API å’Œå¯¹åº”çš„å®ç°å‡½æ•°ä¸€ä¸€ç»‘å®šåœ¨ä¸€èµ·ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¹¶ä¸”ï¼ŒOpenGL ES åº“çš„å®ç°åˆ†ä¸ºï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;è½¯ä»¶æ¨¡æ‹Ÿå®ç°&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ç¡¬ä»¶åŠ é€Ÿå®ç°&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç°åœ¨ï¼Œå› ä¸ºæˆ‘ä»¬ Android æ‰‹æœºä¸­çš„ Soc ç‰‡ä¸ŠèŠ¯ç‰‡ä¸­éƒ½é›†æˆäº† GPU æ¨¡å—ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨çš„å°±æ˜¯ç¡¬ä»¶åŠ é€Ÿå®ç°çš„ OpenGL ES åº“ã€‚ä½†æ˜¯ï¼Œåƒ Android Emulator ä¸­çš„ Android ç³»ç»Ÿï¼Œå¦‚æœä¸æ”¯æŒå°† OpenGL ES API æŒ‡ä»¤é‡å®šå‘åˆ°ä¸»æœºç³»ç»Ÿçš„ GPU åŠ é€Ÿæ‰§è¡Œçš„è¯ï¼Œå®ƒæ‰€é‡‡ç”¨çš„ OpenGL ES åº“å°±æ˜¯è½¯ä»¶æ¨¡æ‹Ÿå®ç°çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è¡¥å……ï¼š&lt;/strong&gt;
åŒç†ï¼Œå¦‚å‰é¢ä¸€ç¯‡æ–‡ç« &lt;a href=&quot;http://woshijpf.github.io/android/2017/09/04/Android%E7%B3%BB%E7%BB%9F%E5%9B%BE%E5%BD%A2%E6%A0%88-OpenGLES%E5%92%8CEGL%E4%BB%8B%E7%BB%8D.html&quot;&gt;Android ç³»ç»Ÿå›¾å½¢æ ˆ: OpenGL ES å’Œ EGL ä»‹ç»&lt;/a&gt;ä¸­ä»‹ç»çš„ï¼ŒEGL ä¹Ÿæ˜¯ä¸€å¥— APIï¼Œå®ƒçš„å®ç°ä¹Ÿéœ€è¦ç³»ç»Ÿå‚å•†æ¥æä¾›ã€‚ç³»ç»Ÿå‚å•†é€šå¸¸ä¼šå°†è¿™ä¸¤å¥— API çš„å®ç°å°è£…åœ¨ä¸€ä¸ªå…±äº«é“¾æ¥åº“ä¸­ï¼Œä½†æ˜¯æ ¹æ®æœ€æ–°çš„æ ‡å‡†ï¼ŒOpenGL ES API å®ç°çš„å…±äº«é“¾æ¥åº“å’Œ EGL API å®ç°çš„å…±äº«é“¾æ¥åº“æ˜¯ç‹¬ç«‹åˆ†å¼€çš„ï¼Œä¾‹å¦‚ 2.2 å°èŠ‚ä¸­åˆ—ä¸¾çš„ Nexus 9 å¹³æ¿è®¾å¤‡ä¸­ OpenGL ES å’Œ EGL API å®ç°åº“å°±æ˜¯ç‹¬ç«‹åˆ†å¼€çš„ã€‚&lt;/p&gt;

&lt;h2 id=&quot;2-android-ä¸­-opengl-es-è½¯ä»¶å±‚æ¬¡æ ˆ&quot;&gt;2. Android ä¸­ OpenGL ES è½¯ä»¶å±‚æ¬¡æ ˆ&lt;/h2&gt;
&lt;p&gt;æŒ‰ç…§åˆ†å±‚ç†å¿µçš„è®¾è®¡ï¼ŒAndroid ä¸­çš„ OpenGL ES å®ç°ä¹Ÿæ˜¯å±‚æ¬¡è®¾è®¡çš„ï¼Œå½¢æˆä¸€ä¸ªè½¯ä»¶å±‚æ¬¡æ ˆã€‚æœ€ä¸Šé¢çš„æ˜¯ Java å±‚ï¼Œæ¥ç€ä¸‹é¢æ˜¯ JNI å±‚ï¼Œå†è°ƒç”¨ä¸‹é¢çš„ wrapper å±‚ï¼Œwrapper å±‚ä¸‹é¢åˆ™æ˜¯ OpenGL ES API çš„å…·ä½“è½¯ä»¶å®æˆ–è€…ç¡¬ä»¶å®ç°äº†ã€‚æ•´ä¸ª OpenGL è½¯ä»¶å±‚æ¬¡æ ˆçš„è°ƒç”¨å…³ç³»å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://picturebed.obs.cn-east-2.myhuaweicloud.com/blogPictures/OpenGL_ES_call_graph.png&quot; alt=&quot;OpenGL è½¯ä»¶å±‚æ¬¡æ ˆ&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;21-opengl-esegl-wrapper-åº“&quot;&gt;2.1 OpenGL ES/EGL Wrapper åº“&lt;/h3&gt;
&lt;p&gt;å‰é¢æˆ‘ä»¬å·²ç»ä»‹ç»è¿‡ OpenGL ES/EGL Wrapper åº“æ˜¯ä¸€ä¸ªå°† OpenGL ES API å’Œ OpenGL ES API å…·ä½“å®ç°ç»‘å®šåœ¨ä¸€èµ·çš„åº“ï¼Œå®ƒå¯¹åº”çš„æºç è·¯å¾„æ˜¯ï¼š&lt;em&gt;/frameworks/native/opengl/libs/&lt;/em&gt;ï¼Œå…¶ä¸­:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libGLESv1_CM.so&lt;/code&gt;ï¼šOpenGL ES 1.x API çš„ Wrapper åº“&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libGLESv2.so&lt;/code&gt;ï¼šOpenGL ES 2.0 çš„ Wrapper åº“&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libGLESv3.so&lt;/code&gt;ï¼šOpenGL ES 3.0 çš„ Wrapper åº“&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å…¶ä¸­å› ä¸º OpenGL ES 3.0 API æ˜¯å…¼å®¹ OpenGL ES 2.0 API çš„ï¼Œæ‰€ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libGLESv2.so&lt;/code&gt; åº“æœ¬è´¨ä¸Šå’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libGLESv3.so&lt;/code&gt; åº“æ˜¯ä¸€æ ·çš„ã€‚&lt;/p&gt;

&lt;h3 id=&quot;22-opengl-esegl-å®ç°åº“&quot;&gt;2.2 OpenGL ES/EGL å®ç°åº“&lt;/h3&gt;
&lt;p&gt;å¦‚æœAndroidç³»ç»Ÿå¹³å°æ”¯æŒ OpenGL ES ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“ï¼Œé‚£ä¹ˆ OpenGL ES/EGL å®ç°åº“ç”±ç³»ç»Ÿå‚å•†ä»¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.so&lt;/code&gt;çš„å…±äº«é“¾æ¥åº“çš„å½¢å¼æä¾›ï¼Œä¾‹å¦‚ï¼ŒNexus 9 å¹³æ¿ä¸­çš„å‚å•†æä¾›çš„ OpenGL ES/EGL å®ç°åº“ä¸ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;flounder:/vendor/lib64/egl &lt;span class=&quot;c&quot;&gt;# ls&lt;/span&gt;
libEGL_tegra.so libGLESv1_CM_tegra.so libGLESv2_tegra.so
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœAndroidç³»ç»Ÿå¹³å°ä¸æ”¯æŒ OpenGL ES ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šé»˜è®¤å¯ç”¨è½¯ä»¶æ¨¡æ‹Ÿæ¸²æŸ“ï¼Œè¿™æ—¶ OpenGL ES/EGL å®ç°åº“å°±æ˜¯ç”± AOSP æä¾›ï¼Œé“¾æ¥åº“çš„å­˜åœ¨çš„è·¯å¾„ä¸ºï¼š &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/system/lib64/egl/libGLES_android.so&lt;/code&gt;ã€‚è€Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libGLES_android.so&lt;/code&gt; åº“åœ¨ Android 7.1 ç³»ç»Ÿå¯¹åº”çš„å®ç°æºç è·¯å¾„ä¸ºï¼š&lt;em&gt;/frameworks/native/opengl/libagl/&lt;/em&gt; ã€‚&lt;/p&gt;

&lt;h2 id=&quot;3-android-71-ä¸­åŠ è½½-opengl-es-åº“çš„è¿‡ç¨‹&quot;&gt;3. Android 7.1 ä¸­åŠ è½½ OpenGL ES åº“çš„è¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;Android ä¸­å›¾å½¢æ¸²æŸ“æ‰€é‡‡ç”¨çš„æ–¹å¼ï¼ˆç¡¬ä»¶ or è½¯ä»¶ï¼‰æ˜¯åœ¨ç³»ç»Ÿå¯åŠ¨ä¹‹ååŠ¨æ€ç¡®å®šçš„ï¼Œè€Œç¡®å®šæ¸²æŸ“æ–¹å¼çš„è¿™ä¸ªæºç æ–‡ä»¶å°±æ˜¯ &lt;em&gt;/frameworks/native/opengl/libs/EGL/Loader.cpp&lt;/em&gt; ã€‚&lt;/p&gt;

&lt;h3 id=&quot;31-android-71-opengl-es-åº“å’Œ-egl-åº“åŠ è½½è¯´æ˜&quot;&gt;3.1 Android 7.1 OpenGL ES åº“å’Œ EGL åº“åŠ è½½è¯´æ˜&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://www.2net.co.uk/tutorial/android-egl-cgf-is-dead&quot;&gt;How Android finds OpenGL libraries, and the death of egl.cfg&lt;/a&gt; è¿™ç¯‡æ–‡ç« ä¸­æåˆ°äº†éå¸¸å…³é”®çš„ä¸€ç‚¹ï¼Œå°±æ˜¯ä» Android Kitkat 4.4 ä¹‹åï¼ŒAndroid ä¸­åŠ è½½ OpenGL ES/EGL åº“çš„æ–¹æ³•å‘ç”Ÿäº†å˜åŒ–äº†ï¼ˆ&lt;strong&gt;ä½†æ˜¯æ•´ä¸ªåŠ è½½è¿‡ç¨‹éƒ½æ˜¯ç”± /frameworks/native/opengl/libs/EGL/Loader.cpp ç¨‹åºæ‰€å†³å®šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ Loader.cpp æ–‡ä»¶å‘ç”Ÿäº†å˜åŒ–&lt;/strong&gt;ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ &lt;strong&gt;Android 4.4 ä¹‹å‰&lt;/strong&gt;ï¼ŒåŠ è½½ OpenGL ES åº“æ˜¯ç”± &lt;em&gt;/system/lib/egl/egl.cfg&lt;/em&gt; æ–‡ä»¶æ‰€å†³å®šçš„ï¼Œé€šè¿‡è¯»å–è¿™ä¸ªé…ç½®æ–‡ä»¶æ¥ç¡®å®šæ˜¯åŠ è½½ OpenGL ES è½¯ä»¶æ¨¡æ‹Ÿå®ç°çš„åº“ï¼Œè¿˜æ˜¯OpenGL ES ç¡¬ä»¶åŠ é€Ÿå®ç°çš„åº“ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯ï¼Œåœ¨Android 4.4 ä¹‹åï¼ŒAndroid ä¸å†é€šè¿‡è¯»å– egl.cfg é…ç½®æ–‡ä»¶çš„æ–¹å¼æ¥åŠ è½½ OpenGL ES åº“ï¼Œæ–°çš„åŠ è½½ OpenGL ES åº“çš„è§„åˆ™ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ä» &lt;em&gt;/system/lib/egl&lt;/em&gt; æˆ–è€… &lt;em&gt;/vendor/lib/egl/&lt;/em&gt; ç›®å½•ä¸‹åŠ è½½ libGLES.so åº“æ–‡ä»¶æˆ–è€… libEGL_vendor.soï¼ŒlibGLESv1_CM_vendor.soï¼ŒlibGLESv2_vendor.so åº“æ–‡ä»¶ã€‚&lt;/li&gt;
  &lt;li&gt;ä¸ºäº†å‘ä¸‹å…¼å®¹æ—§çš„åº“çš„å‘½åæ–¹å¼ï¼ŒåŒæ ·ä¹Ÿä¼šåŠ è½½ &lt;em&gt;/system/lib/egl&lt;/em&gt; æˆ–è€… &lt;em&gt;/vendor/lib/egl/&lt;/em&gt; ç›®å½•ä¸‹çš„ libGLES_*.so æˆ–è€… libEGL_*.soï¼ŒlibGLESv1&lt;em&gt;CM&lt;/em&gt;*.soï¼ŒlibGLESv2_*.so åº“æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;32ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“-or-è½¯ä»¶æ¨¡æ‹Ÿæ¸²æŸ“&quot;&gt;3.2ã€€ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“ or è½¯ä»¶æ¨¡æ‹Ÿæ¸²æŸ“ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;å‰é¢æˆ‘ä»¬æåˆ° OpenGL ES åº“çš„å®ç°æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ç¡¬ä»¶åŠ é€Ÿå®ç°ï¼Œä¸€ç§æ˜¯è½¯ä»¶æ¨¡æ‹Ÿå®ç°ï¼Œé‚£ä¹ˆç³»ç»Ÿæ˜¯æ€ä¹ˆç¡®å®šåŠ è½½é‚£ä¸€ç§ OpenGL ES åº“çš„å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;Android 7.1 æºç ä¸­è´Ÿè´£åŠ è½½ OpenGL ES/EGL åº“éƒ¨åˆ†çš„ä»£ç ä½äºï¼š&lt;em&gt;/frameworks/native/opengl/libs/EGL/Loader.cpp&lt;/em&gt; æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­ä»£ç çš„ä¸»è¦å…¥å£å‡½æ•°æ˜¯ &lt;strong&gt;Loader::open()&lt;/strong&gt; å‡½æ•°ï¼Œè€Œå†³å®šåŠ è½½&lt;strong&gt;ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“åº“&lt;/strong&gt;è¿˜æ˜¯&lt;strong&gt;è½¯ä»¶æ¨¡æ‹Ÿæ¸²æŸ“åº“&lt;/strong&gt;ä¸»è¦æ¶‰åŠåˆ°ä¸‹é¢ä¸¤ä¸ªå‡½æ•°ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;setEmulatorGlesValue()&lt;/li&gt;
  &lt;li&gt;checkGlesEmulationStatus()&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸‹é¢å°±æ¥ç®€è¦çš„åˆ†æä¸€ä¸‹ Android ç³»ç»Ÿæ˜¯å¦‚ä½•é€‰æ‹©åŠ è½½&lt;strong&gt;ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“åº“&lt;/strong&gt;è¿˜æ˜¯&lt;strong&gt;è½¯ä»¶æ¨¡æ‹Ÿæ¸²æŸ“åº“&lt;/strong&gt;ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;é¦–å…ˆï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Loader::open()&lt;/code&gt; å…¥å£å‡½æ•°ä¼šè°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setEmulatorGlesValue()&lt;/code&gt; ä» property å±æ€§ç³»ç»Ÿä¸­è·å–ä¸€äº›å±æ€§å€¼æ¥åˆ¤æ–­å½“å‰ Android ç³»ç»Ÿæ˜¯å¦åœ¨ Emulator ç¯å¢ƒä¸­è¿è¡Œï¼Œå¹¶æ ¹æ®è¯»å–å‡ºæ¥çš„ä¿¡æ¯æ¥é‡æ–°è®¾ç½®æ–°çš„å±æ€§é”®å€¼å¯¹ï¼ŒsetEmulatorGlesValue() å‡½æ•°çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; static void setEmulatorGlesValue(void) {
     char prop[PROPERTY_VALUE_MAX];
     property_get(&quot;ro.kernel.qemu&quot;, prop, &quot;0&quot;); //è¯»å– ro.kernel.qemu å±æ€§å€¼ï¼Œåˆ¤æ–­Androidç³»ç»Ÿæ˜¯å¦è¿è¡Œåœ¨ qemu ä¸­
     if (atoi(prop) != 1) return;
    
     property_get(&quot;ro.kernel.qemu.gles&quot;, prop, &quot;0&quot;); //è¯»å– ro.kernel.qemu.gles å±æ€§å€¼ï¼Œåˆ¤æ–­ qemu ä¸­ OpenGL ES åº“çš„å®ç°æ–¹å¼
     if (atoi(prop) == 1) {
         ALOGD(&quot;Emulator has host GPU support, qemu.gles is set to 1.&quot;);
         property_set(&quot;qemu.gles&quot;, &quot;1&quot;);
         return;
     }
    
     // for now, checking the following
     // directory is good enough for emulator system images
     const char* vendor_lib_path =
 #if defined(__LP64__)
         &quot;/vendor/lib64/egl&quot;;
 #else
         &quot;/vendor/lib/egl&quot;;
 #endif
    
     const bool has_vendor_lib = (access(vendor_lib_path, R_OK) == 0);
     //å¦‚æœå­˜åœ¨ vendor_lib_path è¿™ä¸ªè·¯å¾„ï¼Œé‚£ä¹ˆå°±è¯´æ˜å‚å•†æä¾›äº† OpenGL ESåº“è‡ªå·±çš„è½¯ä»¶æ¨¡æ‹Ÿæ¸²æŸ“åº“ï¼Œè€Œä¸æ˜¯ Android ç³»ç»Ÿè‡ªå·±ç¼–è¯‘å¾—åˆ°çš„è½¯ä»¶æ¨¡æ‹Ÿæ¸²æŸ“åº“
     if (has_vendor_lib) {
         ALOGD(&quot;Emulator has vendor provided software renderer, qemu.gles is set to 2.&quot;);
         property_set(&quot;qemu.gles&quot;, &quot;2&quot;);
     } else {
         ALOGD(&quot;Emulator without GPU support detected. &quot;
               &quot;Fallback to legacy software renderer, qemu.gles is set to 0.&quot;);
         property_set(&quot;qemu.gles&quot;, &quot;0&quot;); //æœ€åï¼Œé»˜è®¤é‡‡å–çš„æ˜¯æ–¹æ¡ˆå°±æ˜¯è°ƒç”¨ä¼ ç»Ÿçš„Androidç³»ç»Ÿè‡ªå·±ç¼–è¯‘å¾—åˆ°è½¯ä»¶æ¨¡æ‹Ÿæ¸²æŸ“åº“
     }
 }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_system_driver()&lt;/code&gt; å‡½æ•°ä¸­ï¼Œå†…éƒ¨ç±» MatchFile ç±»ä¸­ä¼šè°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;checkGlesEmulationStatus()&lt;/code&gt; å‡½æ•°æ¥æ£€æŸ¥ Android ç³»ç»Ÿæ˜¯å¦è¿è¡Œåœ¨æ¨¡æ‹Ÿå™¨ä¸­ï¼Œä»¥åŠåœ¨æ¨¡æ‹Ÿå™¨ä¸­æ˜¯å¦å¯ç”¨äº†ä¸»æœºç¡¬ä»¶åŠ é€Ÿçš„åŠŸèƒ½ï¼Œç„¶åæ ¹æ® checkGlesEmulationStatus() å‡½æ•°çš„è¿”å›çŠ¶æ€å€¼æ¥ç¡®å®šè¦åŠ è½½å…±äº«é“¾æ¥åº“çš„æ–‡ä»¶ç»å¯¹è·¯å¾„ã€‚load_system_driver() å’Œ checkGlesEmulationStatus() å‡½æ•°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; static void* load_system_driver(const char* kind) {
     ATRACE_CALL();
     class MatchFile {
     public:
         //è¿™ä¸ªå‡½æ•°ä½œç”¨æ˜¯è¿”å›éœ€è¦åŠ è½½æ‰“å¼€çš„ OpenGL ES å’Œ EGL API å®ç°åº“æ–‡ä»¶çš„ç»å¯¹è·¯å¾„
         static String8 find(const char* kind) {
             String8 result;
             int emulationStatus = checkGlesEmulationStatus(); //æ£€æŸ¥ Android ç³»ç»Ÿæ˜¯å¦è¿è¡Œåœ¨æ¨¡æ‹Ÿå™¨ä¸­ï¼Œä»¥åŠåœ¨æ¨¡æ‹Ÿå™¨ä¸­æ˜¯å¦å¯ç”¨äº†ä¸»æœºç¡¬ä»¶åŠ é€Ÿçš„åŠŸèƒ½
             switch (emulationStatus) {
             case 0: //Android è¿è¡Œåœ¨æ¨¡æ‹Ÿå™¨ä¸­ï¼Œä½¿ç”¨ç³»ç»Ÿè½¯ä»¶æ¨¡æ‹Ÿå®ç°çš„ OpenGL ES API åº“ libGLES_android.so
 #if defined(__LP64__)
                 result.setTo(&quot;/system/lib64/egl/libGLES_android.so&quot;);
 #else
                 result.setTo(&quot;/system/lib/egl/libGLES_android.so&quot;);
 #endif
                 return result;
             case 1: // Android è¿è¡Œåœ¨æ¨¡æ‹Ÿå™¨ä¸­ï¼Œé€šè¿‡ä¸»æœºç³»ç»Ÿä¸­å®ç° OpenGL ES åŠ é€Ÿæ¸²æŸ“ï¼Œé€šè¿‡ libGLES_emulation.so åº“å°†  OpenGL ES API æŒ‡ä»¤é‡å®šå‘åˆ° host ä¸­æ‰§è¡Œ
                 // Use host-side OpenGL through the &quot;emulation&quot; library
 #if defined(__LP64__)
                 result.appendFormat(&quot;/system/lib64/egl/lib%s_emulation.so&quot;, kind);
 #else
                 result.appendFormat(&quot;/system/lib/egl/lib%s_emulation.so&quot;, kind);
 #endif
                 return result;
             default:
                 // Not in emulator, or use other guest-side implementation
                 break;
             }
    
             // å¦‚æœä¸æ˜¯ä¸Šé¢ä¸¤ç§æƒ…å†µï¼Œå°±æ ¹æ®åº“çš„å‘½åè§„åˆ™å»æ‰¾åˆ°å‚å•†å®ç°åº“æ–‡ä»¶çš„ç»å¯¹è·¯å¾„
             String8 pattern;
             pattern.appendFormat(&quot;lib%s&quot;, kind);
             const char* const searchPaths[] = {
 #if defined(__LP64__)
                 &quot;/vendor/lib64/egl&quot;,
                 &quot;/system/lib64/egl&quot;
 #else
                 &quot;/vendor/lib/egl&quot;,
                 &quot;/system/lib/egl&quot;
 #endif
             };
                
             ......
     }
        
 }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; static int
 checkGlesEmulationStatus(void)
 {
     /* We&apos;re going to check for the following kernel parameters:
      *
      *    qemu=1                      -&amp;gt; tells us that we run inside the emulator
      *    android.qemu.gles=&amp;lt;number&amp;gt;  -&amp;gt; tells us the GLES GPU emulation status
      *
      * Note that we will return &amp;lt;number&amp;gt; if we find it. This let us support
      * more additionnal emulation modes in the future.
      */
     char  prop[PROPERTY_VALUE_MAX];
     int   result = -1;
    
     /* Check if hardware acceleration disabled explicitly */
     property_get(&quot;debug.egl.hw&quot;, prop, &quot;1&quot;); //è¯»å– debu.egl.hw å±æ€§å€¼ï¼Œåˆ¤æ–­3Dç¡¬ä»¶åŠ é€ŸåŠŸèƒ½æ˜¯å¦è¢«å…³é—­äº†
     if (!atoi(prop)) {
         ALOGD(&quot;3D hardware acceleration is disabled&quot;);
         return 0;
     }
    
     /* First, check for qemu=1 */
     property_get(&quot;ro.kernel.qemu&quot;, prop, &quot;0&quot;); //è¯»å–ro.kernel.qemuï¼Œåˆ¤æ–­æ˜¯å¦è¿è¡Œåœ¨ qemu ä¸­
     if (atoi(prop) != 1)
         return -1;
    
     /* We are in the emulator, get GPU status value */
     property_get(&quot;qemu.gles&quot;, prop, &quot;0&quot;); // å¦‚æœ Android ç³»ç»Ÿè¿è¡Œåœ¨ qemu ä¸­ï¼Œå°±è¿”å› qemu.gles çš„å€¼ï¼Œæ ¹æ®è¿™ä¸ªå€¼å°±å¯ä»¥ç¡®å®šåŠ è½½çš„æ˜¯é‚£ç§ OpenGL ES åº“äº†
     return atoi(prop);
 }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;æ€»ç»“ä¸€ä¸‹ä¸Šé¢ä»£ç çš„åŠŸèƒ½å°±æ˜¯ï¼Œé¦–å…ˆåˆ¤æ–­ Android æ˜¯å¦åœ¨ qemu è™šæ‹Ÿæœºä¸­è¿è¡Œï¼Œå¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆå°±ç›´æ¥å»åŠ è½½å‚å•†å­˜æ”¾åº“çš„è·¯å¾„ä¸­å»åŠ è½½ OpenGL ES å®ç°åº“ï¼ˆä¸ç®¡æ˜¯ç¡¬ä»¶åŠ é€Ÿå®ç°çš„ï¼Œè¿˜æ˜¯è½¯ä»¶æ¨¡æ‹Ÿå®ç°çš„ï¼‰ï¼›å¦‚æœæ˜¯åœ¨ qemu ä¸­è¿è¡Œï¼Œé‚£ä¹ˆå°±è¦æ ¹æ®è¿”å›çš„ &lt;strong&gt;emulationStatus&lt;/strong&gt; å€¼ æ¥ç¡®å®šæ˜¯åŠ è½¯ä»¶æ¨¡æ‹Ÿå®ç°çš„ OpenGL ES API åº“ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libGLES_android.so&lt;/code&gt;ï¼Œè¿˜æ˜¯åŠ è½½ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libGLES_emulation.so&lt;/code&gt;åº“å°† OpenGL ES æŒ‡ä»¤é‡å®šå‘åˆ° Host ç³»ç»Ÿä¸­å»æ‰§è¡Œã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;33-opengl-esegl-åº“åŠ è½½å’Œè§£æè¿‡ç¨‹&quot;&gt;3.3 OpenGL ES/EGL åº“åŠ è½½å’Œè§£æè¿‡ç¨‹&lt;/h3&gt;
&lt;p&gt;æ­£å¦‚&lt;a href=&quot;http://woshijpf.github.io/android/2017/09/04/Android%E7%B3%BB%E7%BB%9F%E5%9B%BE%E5%BD%A2%E6%A0%88-OpenGLES%E5%92%8CEGL%E4%BB%8B%E7%BB%8D.html&quot;&gt;Android ç³»ç»Ÿå›¾å½¢æ ˆ: OpenGL ES å’Œ EGL ä»‹ç»&lt;/a&gt;è¿™ç¯‡æ–‡ç« ä¸­åˆ†æçš„é‚£æ ·ï¼Œåœ¨è¿›è¡Œ OpenGL ç¼–ç¨‹æ—¶ï¼Œæœ€å…ˆå¼€å§‹éœ€è¦è·å– Displayï¼Œè¿™å°†è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eglgGetDisplay()&lt;/code&gt; å‡½æ•°è¢«è°ƒç”¨ã€‚åœ¨ eglGetDisplay() é‡Œåˆ™ä¼šè°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;egl_init_drivers()&lt;/code&gt; åˆå§‹åŒ–é©±åŠ¨ï¼šè£…è½½å„ä¸ªåº“è¿›è¡Œè§£æï¼Œå°† OpenGL ES/EGL API å‡½æ•°æ¥å£å’Œå…·ä½“çš„å®ç°ç»‘å®šåœ¨ä¸€èµ·ï¼Œå¹¶å°†ç»“æœä¿å­˜åœ¨ &lt;strong&gt;egl_connection_t&lt;/strong&gt; ç±»å‹çš„å…¨å±€å˜é‡ &lt;strong&gt;gEGLImpl&lt;/strong&gt; çš„ç»“æ„ä½“çš„æˆå‘˜å˜é‡ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢ä»¥ SurfaceFlinger è¿›ç¨‹ä¸ºä¾‹è¿›è¡Œåˆ†æï¼Œæ•´ä¸ª OpenGL ES/EGL åº“çš„åŠ è½½å’Œè§£ææµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-flow&quot;&gt;st=&amp;gt;start: Start
op1=&amp;gt;operation: SurfaceFlinger::init()
sub=&amp;gt;subroutine: Your Subroutine
op2=&amp;gt;operation: eglGetDisplay(EGL_DEFAULT_DISPLAY)
op3=&amp;gt;operation: egl_init_drivers()
op4=&amp;gt;operation: egl_init_drivers_locked();
op5=&amp;gt;operation: loader.open()
op6=&amp;gt;operation: load_driver()
op7=&amp;gt;operation: load_system_driver()
op8=&amp;gt;operation: Loader::init_api()
e=&amp;gt;end

st-&amp;gt;op1-&amp;gt;op2-&amp;gt;op3-&amp;gt;op4-&amp;gt;op5-&amp;gt;op6-&amp;gt;op7-&amp;gt;op8-&amp;gt;e
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&quot;331-geglimpl-å…¨å±€å˜é‡&quot;&gt;3.3.1 gEGLImpl å…¨å±€å˜é‡&lt;/h4&gt;

&lt;p&gt;struct egl_connection_t ç±»å‹çš„ gEGLImpl å…¨å±€å˜é‡æ˜¯ä¸€ä¸ªéå¸¸é‡è¦å˜é‡ï¼Œå®ƒé‡Œé¢çš„æˆå‘˜æŒ‡å‘äº†æ‰“å¼€çš„ OpenGL ES/EGL Wrapper åº“å’Œ OpenGL ES/EGL å®ç°åº“ï¼š
&lt;em&gt;/frameworks/native/opengl/libs/EGL/egl.cpp&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;egl_connection_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gEGLImpl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gl_hooks_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gHooks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gl_hooks_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gHooksNoContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å…¶ä¸­ egl_connection_t çš„å®šä¹‰ï¼š
&lt;em&gt;/frameworks/native/opengl/libs/EGL/egldefs.h&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;egl_connection_t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;GLESv1_INDEX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;GLESv2_INDEX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

    &lt;span class=&quot;kr&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;egl_connection_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;              &lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//æŒ‡å‘æ‰“å¼€çš„å…±äº«é“¾æ¥åº“çš„å¥æŸ„&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;gl_hooks_t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;hooks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//æŒ‡å‘æ‰“å¼€çš„ OpenGL ES API å¯¹è±¡&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;EGLint&lt;/span&gt;              &lt;span class=&quot;n&quot;&gt;major&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// ä¸»ç‰ˆæœ¬å¥½&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;EGLint&lt;/span&gt;              &lt;span class=&quot;n&quot;&gt;minor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;egl_t&lt;/span&gt;               &lt;span class=&quot;n&quot;&gt;egl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//dui x&lt;/span&gt;

    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;               &lt;span class=&quot;n&quot;&gt;libEgl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;               &lt;span class=&quot;n&quot;&gt;libGles1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;               &lt;span class=&quot;n&quot;&gt;libGles2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸‹é¢å°±å¯¹å…¶ä¸­çš„ä¸»è¦æˆå‘˜è¿›è¡Œä¸€ä¸ªè¯´æ˜ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;hooksï¼šè¿™æ˜¯ä¸€ä¸ª gl_hook_t* ç±»å‹çš„æŒ‡é’ˆæ•°ç»„ï¼Œå®ƒæœ€ç»ˆå°† OpenGL ES API å’Œå®ç°åº“é’©åœ¨ä¸€èµ·ã€‚&lt;/li&gt;
  &lt;li&gt;eglï¼šè¿™æ˜¯ä¸€ä¸ª egl_t ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œå®ƒæœ€ç»ˆå°† EGL API å’Œ EGL å®ç°åº“äº†é’©åœ¨ä¸€èµ·ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é‚£ä¹ˆ gl_hook_t å’Œ egl_t æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;gl_hook_t&lt;/strong&gt; å’Œ &lt;strong&gt;egl_t&lt;/strong&gt; çš„å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š
&lt;em&gt;/frameworks/native/opengl/libs/hooks.h&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#define GL_ENTRY(_r, _api, ...) _r (*_api)(__VA_ARGS__);
#define EGL_ENTRY(_r, _api, ...) _r (*_api)(__VA_ARGS__);
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;egl_t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;cp&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;cpf&quot;&gt;&quot;EGL/egl_entries.in&quot;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;gl_hooks_t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;gl_t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;cp&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;cpf&quot;&gt;&quot;entries.in&quot;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;
&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;gl_ext_t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// __eglMustCastToProperFunctionPointerType æ˜¯ä¸€ä¸ª typedef çš„å‡½æ•°æŒ‡é’ˆç±»å‹ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯voidï¼Œå‚æ•°ä¹Ÿæ˜¯void&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;__eglMustCastToProperFunctionPointerType&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;extensions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MAX_NUMBER_OF_GL_EXTENSIONS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä»ä¸Šé¢çš„å®šä¹‰ä¸­æˆ‘ä»¬å‘ç°ï¼Œegl_t å’Œ gl_hooks_t è¿™ä¸¤ä¸ªç»“æ„ä½“ä¸­ä¸»è¦å°±æ˜¯ä¸€ä¸ª include è¯­å¥ï¼Œé‚£ä¹ˆå®ƒä»¬åŒ…å«çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;#include â€œEGL/egl_entries.in&lt;/strong&gt;
åŒ…å«çš„æ–‡ä»¶è·¯å¾„å¦‚ä¸‹æ‰€ç¤ºï¼š
&lt;em&gt;/frameworks/native/opengl/libs/EGL/egl_entries.in&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;EGL_ENTRY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EGLDisplay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eglGetDisplay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NativeDisplayType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;EGL_ENTRY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EGLBoolean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eglInitialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGLDisplay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGLint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGLint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;EGL_ENTRY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EGLBoolean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eglTerminate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGLDisplay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;EGL_ENTRY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EGLBoolean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eglGetConfigs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGLDisplay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGLConfig&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGLint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGLint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;EGL_ENTRY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EGLBoolean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eglChooseConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGLDisplay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGLint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGLConfig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGLint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGLint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„å†…å®¹éƒ½æ˜¯ EGL_ENTRY å®å®šä¹‰çš„ï¼Œæ ¹æ® EGL_ENTRY å®å®šä¹‰ï¼š
&lt;em&gt;/frameworks/native/opengl/libs/EGL/hooks.h&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//ä¸‹é¢çš„ä¸¤ä¸ªå®å®šä¹‰åˆ†åˆ«æ˜¯ OpenGL å’Œ EGL API å‡½æ•°çš„å‡½æ•°æŒ‡é’ˆå˜é‡
//è¿™äº›å‡½æ•°å˜é‡æœ€åä¼šå’Œå…·ä½“çš„ OpenGL å’Œ EGL API çš„å®ç°ç»‘å®šåœ¨ä¸€èµ·
#define GL_ENTRY(_r,_api,...) _r (*_api)(__VA_ARGS__);
#define EGL_ENTRY(_r,_api,...) _r(*_api)(__VA_ARGS__);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥å°†ä¸‹é¢çš„è¿™ä¸ªå®å®šä¹‰å±•å¼€æˆå¦‚ä¸‹çš„å½¢å¼:&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;EGL_ENTRY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EGLDisplay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eglGetDisplay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NativeDisplayType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//å±•å¼€åçš„å½¢å¼å¦‚ä¸‹æ‰€ç¤ºï¼Œå®ƒå®é™…ä¸Šå°±æ˜¯ EGL API å‡½æ•°å£°æ˜&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;EGLDisplay&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eglGetDisplay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NativeDisplayType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;#include â€œentries.inâ€&lt;/strong&gt;
åŒ…å«çš„æ–‡ä»¶è·¯å¾„ä¸ºï¼š
&lt;em&gt;/frameworks/native/opengl/libs/entries.in&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;GL_ENTRY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;glReadPixels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLint&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLint&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLsizei&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLsizei&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLenum&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLenum&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pixels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å’Œä¸Šé¢çš„ EGL_ENTRY ä¸€æ ·ï¼ŒGL_ENTRY éƒ½æ˜¯é€šè¿‡å®å®šä¹‰çš„å½¢å¼æ¥å°† OpenGL ES çš„ API å‡½æ•°æ¥å£è¿›è¡Œå£°æ˜ï¼Œä¾‹å¦‚ï¼Œä¸Šé¢çš„å®å®šä¹‰å£°æ˜å¯ä»¥å±•å¼€æˆä¸‹é¢çš„å½¢å¼ï¼š&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;GL_ENTRY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;glReadPixels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLint&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLint&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLsizei&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLsizei&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLenum&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLenum&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pixels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// å±•å¼€åçš„å½¢å¼å¦‚ä¸‹æ‰€ç¤ºï¼Œå®ƒå®é™…ä¸Šå°±æ˜¯ OpenGL ES API å‡½æ•°å£°æ˜&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;glReadPixels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GLint&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLint&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLsizei&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLsizei&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLenum&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLenum&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pixels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æœ€åï¼Œé€šè¿‡ entries.in å’Œ egl_entries.in è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ° OpenGL ES å’Œ EGL ä¸­çš„æ‰€æœ‰ API å‡½æ•°æ¥å£çš„è¯´æ˜ã€‚&lt;/p&gt;

&lt;h4 id=&quot;332-surfaceflinger-åˆå§‹åŒ–æˆå‘˜å˜é‡-megldisplay&quot;&gt;3.3.2 SurfaceFlinger åˆå§‹åŒ–æˆå‘˜å˜é‡ mEGLDisplay&lt;/h4&gt;
&lt;p&gt;åœ¨ SurfaceFlinger ç±»ä¸­æœ‰ä¸€ä¸ª EGLDisplay ç±»å‹çš„æˆå‘˜å˜é‡ mEGLDisplayï¼Œå®ƒæ˜¯ EGL ä¸­ç”¨æ¥æ„å»º OpenGL ES æ¸²æŸ“ç¯å¢ƒæ‰€éœ€çš„å‚æ•°ã€‚&lt;/p&gt;

&lt;p&gt;SurfaceFlinger ä¸­è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eglGetDisplay()&lt;/code&gt; åˆå§‹åŒ– mEGLDisplay çš„ä»£ç å¦‚ä¸‹ï¼š
&lt;em&gt;/frameworks/native/services/surfaceflinger/SurfaceFlinger.cpp&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SurfaceFlinger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ALOGI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;  &lt;span class=&quot;s&quot;&gt;&quot;SurfaceFlinger&apos;s main thread ready to run. &quot;&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;Initializing graphics H/W...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;status_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Mutex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Autolock&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mStateLock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// initialize EGL for the default display&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// è°ƒç”¨ eglGetDisplay å‡½æ•°è·å–é»˜è®¤çš„æ˜¾ç¤ºè®¾å¤‡&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mEGLDisplay&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eglGetDisplay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EGL_DEFAULT_DISPLAY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;eglInitialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mEGLDisplay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç´§æ¥ç€åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eglGetDisplay()&lt;/code&gt; ä¸­è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;egl_init_drivers()&lt;/code&gt;
&lt;em&gt;/frameworks/native/opengl/libs/EGL/eglApi.cpp&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;EGLDisplay&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;eglGetDisplay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EGLNativeDisplayType&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// è°ƒç”¨egl_init_drivers() åŠ è½½ OpenGL ES åº“å’Œ EGL åº“&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;egl_init_drivers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGL_FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EGL_BAD_PARAMETER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGL_NO_DISPLAY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;EGLDisplay&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dpy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;egl_display_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getFromNativeDisplay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dpy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æœ€åï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;egl_init_drivers()&lt;/code&gt; å‡½æ•°ä¸­ä½¿ç”¨äº† pthread_mutex_lock ä¸Šé”ä¿æŠ¤ï¼Œç»§ç»­è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;egl_init_drivers_locked()&lt;/code&gt; å‡½æ•°
&lt;em&gt;/frameworks/native/opengl/libs/EGL/egl.cpp&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;EGLBoolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;egl_init_drivers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;EGLBoolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pthread_mutex_lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sInitDriverMutex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ä½¿ç”¨äº† pthread_mutex_lock ä¸Šé”ä¿æŠ¤ï¼Œç»§ç»­è°ƒç”¨ egl_init_drivers_locked&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;egl_init_drivers_locked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pthread_mutex_unlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sInitDriverMutex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸‹é¢å°±æ˜¯å¯¹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;egl_init_drivers_locked()&lt;/code&gt; å‡½æ•°è¿›è¡Œä¸€ä¸ªåˆ†æï¼š&lt;/p&gt;

&lt;p&gt;egl_init_drivers_locked() å‡½æ•°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š
&lt;em&gt;/frameworks/native/opengl/libs/EGL/egl.cpp&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//åœ¨è¯¥æ–‡ä»¶èµ·å§‹ä½ç½®å®šä¹‰çš„å…¨å±€å˜é‡&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;egl_connection_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gEGLImpl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æè¿°EGLå®ç°å†…å®¹çš„ç»“æ„ä½“å¯¹è±¡&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gl_hooks_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gHooks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// gl_hooks_t æ˜¯åŒ…å« OpenGL ES API å‡½æ•°å£°æ˜å¯¹åº”çš„å‡½æ•°æŒ‡é’ˆç»“æ„ä½“&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gl_hooks_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gHooksNoContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pthread_key_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gGLWrapperKey&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGLBoolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;egl_init_drivers_locked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sEarlyInitState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// initialized by static ctor. should be set here.&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGL_FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// å¾—åˆ° Loader å¯¹è±¡å•ä¾‹&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// get our driver loader&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Loader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Loader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//  gEGLImple æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ•°æ®ç±»å‹ä¸º egl_connection_t ç»“æ„ä½“ç±»å‹&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// dynamically load our EGL implementation&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;egl_connection_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gEGLImpl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// cnx-&amp;gt;dso æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª (void *)ç±»å‹çš„æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘çš„å¯¹è±¡æ˜¯ EGL å…±äº«åº“æ‰“å¼€ä¹‹åçš„å¥æŸ„&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
        &lt;span class=&quot;c1&quot;&gt;// &amp;gt;= å°†cnxä¸­çš„ hooks æ•°ç»„ä¸­æŒ‡å‘OpenGL ES API å‡½æ•°æŒ‡é’ˆç»“æ„ä½“æŒ‡çš„æ•°ç»„æˆå‘˜ï¼Œç”¨ gHooks ä¸­çš„æˆå‘˜çš„åœ°å€å»åˆå§‹åŒ–&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//ä¹Ÿå°±æ˜¯è¯´ gEGLImpl ä¸­ hook æ•°ç»„æŒ‡å‘ gHooks æ•°ç»„ï¼Œæœ€ç»ˆæŒ‡å‘åŒä¸€ä¸ª OpenGL ES API å‡½æ•°æŒ‡é’ˆçš„å®ç°&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hooks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;egl_connection_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GLESv1_INDEX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gHooks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;egl_connection_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GLESv1_INDEX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hooks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;egl_connection_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GLESv2_INDEX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gHooks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;egl_connection_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GLESv2_INDEX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;// &amp;gt;= æœ€åé€šè¿‡loaderå¯¹è±¡çš„openå‡½æ•°å¼€å§‹åŠ è½½ OpenGL ES å’Œ EGL wrapper åº“&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGL_TRUE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGL_FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œæœ‰ä¸€ä¸ªéå¸¸å…³é”®çš„ egl_connection_t æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªå…¨å±€å˜é‡ gEGLImplï¼Œå½“ç¬¬ä¸€æ¬¡åˆå§‹åŒ–åŠ è½½ OpenGL ES å®ç°åº“å’Œ EGL å®ç°åº“æ—¶ï¼Œè¿˜éœ€è¦å°† gEGLImpl ä¸­çš„ hooks æ•°ç»„ä¸­çš„ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªå…¨å±€çš„ gl_hooks_t æ•°ç»„ gHooksï¼ˆè¿™å°±æ˜¯ä¸¤ä¸ªæŒ‡é’ˆé’©å­ï¼Œæœ€ç»ˆåˆå§‹åŒ–å®Œæˆåå°†åˆ†åˆ«å‹¾ä½ OpenGL ES 1.0 å’Œ OpenGL ES 2.0 çš„å®ç°åº“ï¼‰ï¼Œæ¥ç€è°ƒç”¨ Loader ç±»çš„å®ä¾‹çš„ open() å‡½æ•°å®Œæˆä» OpenGL ES å®ç°åº“ä¸­å®Œæˆç¬¦å·è§£æå·¥ä½œã€‚&lt;/p&gt;

&lt;h4 id=&quot;333-é€šè¿‡-loader-ç±»åŠ è½½å’Œè§£æ-opengl-es-åº“å’Œ-egl-åº“&quot;&gt;3.3.3 é€šè¿‡ Loader ç±»åŠ è½½å’Œè§£æ OpenGL ES åº“å’Œ EGL åº“&lt;/h4&gt;

&lt;p&gt;Loader::open() å‡½æ•°çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š
&lt;em&gt;/frameworks/native/opengl/libs/EGL/Loader.cpp&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// &amp;gt;= Loader ç±»å¯¹è±¡æ„é€ å®Œæˆåï¼Œå°±åœ¨ /EGL/egl.cpp æ–‡ä»¶ä¸­çš„ egl_init_drivers_locked() ä¸­è¢«è°ƒç”¨&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Loader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;egl_connection_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ATRACE_CALL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;driver_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hnd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;setEmulatorGlesValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_driver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;GLES&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLESv1_CM&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLESv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;hnd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;driver_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Always load EGL first&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_driver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;EGL&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;hnd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;driver_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;hnd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_driver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;GLESv1_CM&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLESv1_CM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLESv1_CM&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;hnd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_driver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;GLESv2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLESv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;GLESv2&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;LOG_ALWAYS_FATAL_IF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hnd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;couldn&apos;t find an OpenGL ES implementation&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;libEgl&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_wrapper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EGL_WRAPPER_DIR&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/libEGL.so&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;libGles2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_wrapper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EGL_WRAPPER_DIR&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/libGLESv2.so&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;libGles1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_wrapper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EGL_WRAPPER_DIR&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/libGLESv1_CM.so&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;LOG_ALWAYS_FATAL_IF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;libEgl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;couldn&apos;t load system EGL wrapper libraries&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;LOG_ALWAYS_FATAL_IF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;libGles2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;libGles1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;couldn&apos;t load system OpenGL ES wrapper libraries&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hnd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;open()&lt;/code&gt; å‡½æ•°ä¸»è¦è´Ÿè´£ OpenGL ES åº“åŠ è½½å‰çš„å‡†å¤‡å·¥ä½œï¼Œå…·ä½“çš„åŠ è½½ç»†èŠ‚ï¼Œåˆ™æ˜¯é€šè¿‡è°ƒç”¨ load_driver() å»å®Œæˆçš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Loader::load_driver()&lt;/code&gt; å‡½æ•°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š
&lt;em&gt;/frameworks/native/opengl/libs/EGL/Loader.cpp&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Loader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load_driver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                          &lt;span class=&quot;n&quot;&gt;egl_connection_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ATRACE_CALL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mGetDriverNamespace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;android_namespace_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mGetDriverNamespace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_updated_driver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//åŠ è½½ OpenGL ES å®ç°åº“ï¼Œæ”¾å›æ‰“å¼€çš„å…±äº«é“¾æ¥åº“çš„å¥æŸ„&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_system_driver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// è§£æ EGL åº“ï¼Œå¹¶å°†wrapper åº“ libEGL.so ä¸­çš„å‡½æ•° API æŒ‡é’ˆå’Œå…·ä½“çš„å®ç°ç»‘å®šåœ¨ä¸€èµ·&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EGL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;getProcAddress&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getProcAddressType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dlsym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;eglGetProcAddress&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;ALOGE_IF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getProcAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;s&quot;&gt;&quot;can&apos;t find eglGetProcAddress() in EGL driver library&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;egl_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;egl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;egl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//å°† egl æŒ‡é’ˆæŒ‡å‘æè¿°å½“å‰ç³»ç»Ÿæ”¯æŒ OpenGL ESå’Œ EGL å…¨å±€å˜é‡çš„ gEGLImpl&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;__eglMustCastToProperFunctionPointerType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;curr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__eglMustCastToProperFunctionPointerType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;egl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;egl_names&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//egl_names æ˜¯å®šä¹‰åœ¨ egl.cpp æ–‡ä»¶ä¸­çš„ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯ EGL API å‡½æ•°æŒ‡é’ˆ&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;__eglMustCastToProperFunctionPointerType&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__eglMustCastToProperFunctionPointerType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dlsym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// couldn&apos;t find the entry-point, use eglGetProcAddress()&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getProcAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__eglMustCastToProperFunctionPointerType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;curr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//è¿™ä¸€æ­¥å°±æ˜¯æœ€å…³é”®çš„å°†å…±äº«é“¾æ¥åº“ä¸­çš„ EGL API çš„å®ç°å’Œä¸Šå±‚è°ƒç”¨çš„ API å‡½æ•°æŒ‡é’ˆç»‘å®šåœ¨ä¸€èµ·&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//æŒ‡å‘ä¸‹ä¸€ä¸ªéœ€è¦ç»‘å®šçš„ api å‡½æ•°&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// è§£æ OpenGL ES åº“ä¸­çš„ OpenGL ES 1.x API ç¬¦å·&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLESv1_CM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// è°ƒç”¨ init_api å®ç° OpenGL API å’Œå¯¹åº”å®ç°å‡½æ•°çš„ç»‘å®š&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;init_api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gl_names&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// gl_names æ˜¯å®šä¹‰åœ¨ egl.cpp æ–‡ä»¶ä¸­çš„ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯ OpenGL ES API å‡½æ•°æŒ‡é’ˆ&lt;/span&gt;
                 &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__eglMustCastToProperFunctionPointerType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                 &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hooks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;egl_connection_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GLESv1_INDEX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//glæˆå‘˜å˜é‡æ˜¯ä¸€ä¸ªç»“æ„ä½“å˜é‡ï¼Œç»“æ„ä½“ä¸­çš„æ˜¯ OpenGL ES API å‡½æ•°æŒ‡é’ˆ&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;getProcAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// è§£æ OpenGL ES åº“ä¸­çš„ OpenGL ES 2.0 API ç¬¦å·&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GLESv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;init_api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gl_names&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__eglMustCastToProperFunctionPointerType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                 &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cnx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hooks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;egl_connection_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GLESv2_INDEX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;getProcAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dso&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Loader::load_driver()&lt;/code&gt; å®ƒä¸»è¦å®ç°äº†ä¸¤ä¸ªåŠŸèƒ½ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_system_driver() &lt;/code&gt; å‡½æ•°æŸ¥æ‰¾ OpenGL ES/EGL å®ç°åº“ï¼Œå¹¶åœ¨æŒ‡å®šçš„å­˜æ”¾è·¯å¾„ä¸­æ‰¾åˆ°å…±äº«é“¾æ¥åº“æ–‡ä»¶å¹¶æ‰“å¼€å®ƒã€‚&lt;/li&gt;
  &lt;li&gt;è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;init_api()&lt;/code&gt;è§£ææ‰“å¼€çš„ OpenGL ES/EGL å…±äº«é“¾æ¥åº“ï¼Œå°† OpenGL ES/EGL API å‡½æ•°æŒ‡é’ˆå’Œå…±äº«é“¾æ¥åº“ä¸­å®ç°çš„å¯¹åº”çš„å‡½æ•°ç¬¦å·ç»‘å®šåœ¨ä¸€èµ·ï¼Œè¿™æ ·è°ƒç”¨ OpenGL ES/EGL API å°±ä¼šè°ƒç”¨åˆ°å…·ä½“å®ç°çš„OpenGL ES/EGL å…±äº«é“¾æ¥åº“ä¸­å¯¹åº”å‡½æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å…·ä½“ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_system_driver()&lt;/code&gt; å‡½æ•°å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;init_api()&lt;/code&gt; å‡½æ•°çš„å®ç°å°±ä¸ä¸€ä¸€å±•å¼€äº†ï¼Œå¤§å®¶å¯ä»¥åˆ° &lt;em&gt;/frameworks/native/opengl/libs/EGL/Loader.cpp&lt;/em&gt; æ–‡ä»¶ä¸­æŸ¥çœ‹ï¼Œåº”è¯¥å†™å¾—éå¸¸ç›´æ¥æ¸…æ¥šäº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;34-å°ç»“&quot;&gt;3.4 &lt;strong&gt;å°ç»“&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;è‡³æ­¤ï¼Œæœ‰å…³ OpenGL ES/EGL åº“çš„åŠ è½½å’Œè§£æè¿‡ç¨‹å°±åˆ†æå®Œäº†ï¼Œ&lt;strong&gt;æ•´ä¸ªåŠ è½½å’Œè§£æçš„ç›®çš„å°±æ˜¯å°† OpenGL ES/EGL API å’Œå…·ä½“å®ç°å‡½æ•°ç»‘å®šåœ¨ä¸€èµ·&lt;/strong&gt;ï¼Œè¿™æ ·å½“ç¨‹åºè°ƒç”¨ OpenGL ES/EGL API æ—¶ï¼Œå°±ä¼šè°ƒç”¨åˆ°å®é™…çš„å®ç°å‡½æ•°äº†ã€‚ç„¶åï¼Œåœ¨ç¡¬ä»¶å¹³å°ä¸Šçš„ Android ç³»ç»ŸåŠ è½½çš„æ˜¯ç¡¬ä»¶å‚å•†æä¾›çš„ OpenGL ES/EGL å®ç°åº“ï¼Œè€Œåœ¨ qemu æ¨¡æ‹Ÿå™¨ä¸­è¿è¡Œçš„ Android ç³»ç»Ÿä¸­åŠ è½½çš„åˆ™æ˜¯è½¯ä»¶æ¨¡æ‹Ÿå®ç°çš„ 
OpenGL ES/EGL åº“æˆ–è€…æ˜¯å°† OpenGL ES é‡å®šå‘åˆ°ä¸»æœºç³»ç»Ÿä¸­è¿›è¡Œç¡¬ä»¶åŠ é€Ÿçš„åº“ã€‚&lt;/p&gt;

&lt;h3 id=&quot;35-å‚è€ƒæ–‡ç« &quot;&gt;3.5 å‚è€ƒæ–‡ç« &lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.2net.co.uk/tutorial/android-egl-cgf-is-dead&quot;&gt;How Android finds OpenGL libraries, and the death of egl.cfg&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

</description>
        <pubDate>Tue, 05 Sep 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/android/2017/09/05/Android%E7%B3%BB%E7%BB%9F%E5%9B%BE%E5%BD%A2%E6%A0%88OpenGLES%E5%92%8CEGL%E5%BA%93%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B.html</link>
        <guid isPermaLink="true">http://localhost:4000/android/2017/09/05/Android%E7%B3%BB%E7%BB%9F%E5%9B%BE%E5%BD%A2%E6%A0%88OpenGLES%E5%92%8CEGL%E5%BA%93%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B.html</guid>
        
        <category>Android</category>
        
        <category>OpenGLES</category>
        
        <category>EGL</category>
        
        <category>Graphic</category>
        
        
        <category>android</category>
        
      </item>
    
  </channel>
</rss>
